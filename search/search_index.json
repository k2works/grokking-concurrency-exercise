{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Grokking Concurrency","text":"<p>Python\u3001Java\u3001C#\u3001Scala\u3001F#\u3001Rust\u3001Haskell\u3001Clojure \u3067\u5b66\u3076\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0</p>"},{"location":"#_1","title":"\u6982\u8981","text":"<p>\u672c\u30b5\u30a4\u30c8\u306f\u300cGrokking Concurrency\u300d\uff08Kirill Bobrov \u8457\uff09\u306e\u5b66\u7fd2\u30b3\u30f3\u30d1\u30cb\u30aa\u30f3\u3068\u3057\u3066\u3001\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u6982\u5ff5\u3092\u8907\u6570\u306e\u8a00\u8a9e\u3067\u5b9f\u88c5\u3057\u306a\u304c\u3089\u65e5\u672c\u8a9e\u3067\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"#_2","title":"\u591a\u8a00\u8a9e\u7d71\u5408\u89e3\u8aac","text":"<p>8 \u3064\u306e\u8a00\u8a9e\u3092\u6a2a\u65ad\u7684\u306b\u6bd4\u8f03\u3057\u3001\u4e26\u884c\u51e6\u7406\u306e\u672c\u8cea\u3068\u8a00\u8a9e\u56fa\u6709\u306e\u8868\u73fe\u3092\u7d71\u5408\u7684\u306b\u89e3\u8aac\u3057\u307e\u3059\u3002</p> Part \u30c8\u30d4\u30c3\u30af \u7d71\u5408\u8a18\u4e8b I \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e \u9010\u6b21\u51e6\u7406\u306e\u8a00\u8a9e\u5225\u6bd4\u8f03 II \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 \u30b9\u30ec\u30c3\u30c9\u751f\u6210\u30fb\u7ba1\u7406\u306e API \u6bd4\u8f03 III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30e2\u30c7\u30eb\u306e\u6bd4\u8f03 IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u30fb\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u6bd4\u8f03 V \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 Lock/STM/\u6240\u6709\u6a29\u306e\u6bd4\u8f03 VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O Reactor \u30d1\u30bf\u30fc\u30f3\u3068 I/O \u30e2\u30c7\u30eb\u6bd4\u8f03 VII \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 async/await \u3068 Future/Promise \u6bd4\u8f03 VIII \u5206\u6563\u4e26\u5217\u51e6\u7406 MapReduce \u3068\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u6bd4\u8f03 <p>\u8a73\u7d30\u306f \u591a\u8a00\u8a9e\u7d71\u5408\u89e3\u8aac \u6982\u8981 \u3092\u53c2\u7167</p>"},{"location":"#_3","title":"\u8a00\u8a9e\u5225\u5b66\u7fd2\u30ac\u30a4\u30c9","text":"\u8a00\u8a9e \u7279\u5fb4 \u4e3b\u8981\u306a\u4e26\u884c\u51e6\u7406\u6a5f\u80fd Python \u52d5\u7684\u578b\u4ed8\u3051\u3001\u30b7\u30f3\u30d7\u30eb threading, multiprocessing, asyncio Java JVM\u3001\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba ExecutorService, CompletableFuture C# .NET\u3001\u30e2\u30c0\u30f3\u69cb\u6587 Task, async/await, TPL Scala \u95a2\u6570\u578b+\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411 Future, Akka Actor F# .NET \u95a2\u6570\u578b Async, MailboxProcessor Rust \u30e1\u30e2\u30ea\u5b89\u5168\u3001\u30bc\u30ed\u30b3\u30b9\u30c8 std::thread, Rayon, tokio Haskell \u7d14\u7c8b\u95a2\u6570\u578b STM, async, forkIO Clojure Lisp \u7cfb\u3001JVM atom, ref/STM, core.async"},{"location":"#_4","title":"\u5b66\u7fd2\u30c8\u30d4\u30c3\u30af","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u306f\u4ee5\u4e0b\u306e\u30c8\u30d4\u30c3\u30af\u3092\u6271\u3044\u307e\u3059\uff1a</p> Part \u30c8\u30d4\u30c3\u30af \u30ad\u30fc\u30ef\u30fc\u30c9 I \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e \u9010\u6b21\u51e6\u7406\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6e2c\u5b9a II \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 Process\u3001Thread\u3001\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u3001\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0 IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 V \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 Lock\u3001Semaphore\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3001Reactor VII \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 asyncio\u3001async/await VIII \u5206\u6563\u4e26\u5217\u51e6\u7406 MapReduce\u3001\u5206\u6563\u51e6\u7406"},{"location":"#_5","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency - \u539f\u8457\uff08Manning Publications\uff09</li> </ul>"},{"location":"all/","title":"Grokking Concurrency\uff1a\u591a\u8a00\u8a9e\u7d71\u5408\u89e3\u8aac","text":"<p>\u672c\u8a18\u4e8b\u30b7\u30ea\u30fc\u30ba\u306f\u30018 \u3064\u306e\u8a00\u8a9e\uff08Python, Java, C#, Scala, F#, Rust, Haskell, Clojure\uff09\u3067\u306e\u5b9f\u88c5\u3092\u6a2a\u65ad\u7684\u306b\u6bd4\u8f03\u3057\u3001\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u672c\u8cea\u3068\u8a00\u8a9e\u56fa\u6709\u306e\u8868\u73fe\u3092\u7d71\u5408\u7684\u306b\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"all/#_1","title":"\u672c\u30b7\u30ea\u30fc\u30ba\u306e\u76ee\u7684","text":"<p>\u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b\u306f\u300c\u305d\u306e\u8a00\u8a9e\u3067\u3069\u3046\u5b9f\u88c5\u3059\u308b\u304b\u300d\u306b\u7126\u70b9\u3092\u5f53\u3066\u3066\u3044\u307e\u3059\u3002\u672c\u7d71\u5408\u8a18\u4e8b\u306f\u3001\u305d\u308c\u3089\u3092\u6a2a\u65ad\u3057\u3066\u4ee5\u4e0b\u3092\u660e\u3089\u304b\u306b\u3057\u307e\u3059\uff1a</p> <ul> <li>\u5171\u901a\u306e\u672c\u8cea: \u8a00\u8a9e\u3092\u8d85\u3048\u3066\u6210\u308a\u7acb\u3064\u4e26\u884c\u51e6\u7406\u306e\u539f\u5247</li> <li>\u8a00\u8a9e\u9593\u306e\u5dee\u7570: \u30e9\u30f3\u30bf\u30a4\u30e0\u3001\u30e1\u30e2\u30ea\u30e2\u30c7\u30eb\u3001\u4e26\u884c\u51e6\u7406\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u306e\u9055\u3044\u304c\u5b9f\u88c5\u306b\u3069\u3046\u5f71\u97ff\u3059\u308b\u304b</li> <li>\u9078\u629e\u306e\u6307\u91dd: \u3069\u306e\u8a00\u8a9e\u30fb\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3069\u306e\u4e26\u884c\u51e6\u7406\u30d1\u30bf\u30fc\u30f3\u306b\u9069\u3057\u3066\u3044\u308b\u304b</li> </ul>"},{"location":"all/#_2","title":"\u8a00\u8a9e\u7279\u6027\u30de\u30c8\u30ea\u30af\u30b9","text":""},{"location":"all/#_3","title":"\u8a00\u8a9e\u5206\u985e","text":"\u30b0\u30eb\u30fc\u30d7 \u8a00\u8a9e \u7279\u5fb4 \u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8 Haskell, Clojure \u4e0d\u5909\u6027\u30fbSTM \u306b\u3088\u308b\u5b89\u5168\u306a\u4e26\u884c\u51e6\u7406 \u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\uff08\u9759\u7684\uff09 Scala, Rust, F# \u578b\u30b7\u30b9\u30c6\u30e0\u3092\u6d3b\u7528\u3057\u305f\u4e26\u884c\u51e6\u7406\u306e\u5b89\u5168\u6027\u4fdd\u8a3c OOP \u30d5\u30a1\u30fc\u30b9\u30c8 + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea Java, C#, Python \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u4e26\u884c\u51e6\u7406 API \u3092\u6d3b\u7528"},{"location":"all/#_4","title":"\u7279\u6027\u6bd4\u8f03","text":"\u7279\u6027 Python Java C# Scala F# Rust Haskell Clojure \u5b9f\u884c\u74b0\u5883 CPython JVM .NET (CLR) JVM .NET (CLR) \u30cd\u30a4\u30c6\u30a3\u30d6 GHC JVM \u30b9\u30ec\u30c3\u30c9\u30e2\u30c7\u30eb OS \u30b9\u30ec\u30c3\u30c9 (GIL) OS \u30b9\u30ec\u30c3\u30c9 + Virtual Thread OS \u30b9\u30ec\u30c3\u30c9 + Task OS \u30b9\u30ec\u30c3\u30c9 + Future OS \u30b9\u30ec\u30c3\u30c9 + Async OS \u30b9\u30ec\u30c3\u30c9 Green Thread OS \u30b9\u30ec\u30c3\u30c9 (JVM) \u8efd\u91cf\u30bf\u30b9\u30af asyncio Task Virtual Thread (21+) Task (TPL) Future Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc tokio Task forkIO core.async go \u30d6\u30ed\u30c3\u30af \u6392\u4ed6\u5236\u5fa1 threading.Lock synchronized / ReentrantLock lock / Monitor synchronized MailboxProcessor Mutex / RwLock MVar / TVar atom / ref \u5171\u6709\u72b6\u614b\u7ba1\u7406 Lock + \u5909\u6570 synchronized lock + volatile synchronized Agent / MailboxProcessor Arc\\&lt;Mutex\\&lt;T&gt;&gt; STM / TVar atom / ref / STM \u30c1\u30e3\u30cd\u30eb / \u30e1\u30c3\u30bb\u30fc\u30b8 queue.Queue BlockingQueue Channel \u306a\u3057\uff08\u6a19\u6e96\uff09 MailboxProcessor mpsc / crossbeam Chan / TChan core.async chan \u975e\u540c\u671f I/O asyncio NIO / CompletableFuture async/await (Task) Future Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc tokio (async/await) async \u30e9\u30a4\u30d6\u30e9\u30ea core.async \u4e26\u5217\u30a4\u30c6\u30ec\u30fc\u30bf multiprocessing.Pool parallelStream Parallel LINQ .par Array.Parallel Rayon par_iter par (parallel) pmap / reducers \u30e1\u30e2\u30ea\u5b89\u5168\u6027 \u30e9\u30f3\u30bf\u30a4\u30e0 (GIL) \u30e9\u30f3\u30bf\u30a4\u30e0 (JVM) \u30e9\u30f3\u30bf\u30a4\u30e0 (CLR) \u30e9\u30f3\u30bf\u30a4\u30e0 (JVM) \u30e9\u30f3\u30bf\u30a4\u30e0 (CLR) \u30b3\u30f3\u30d1\u30a4\u30eb\u6642 (\u6240\u6709\u6a29) \u30e9\u30f3\u30bf\u30a4\u30e0 (GC) \u30e9\u30f3\u30bf\u30a4\u30e0 (JVM) \u30c7\u30fc\u30bf\u7af6\u5408\u9632\u6b62 GIL\uff08\u90e8\u5206\u7684\uff09 \u30e9\u30f3\u30bf\u30a4\u30e0\u691c\u51fa \u30e9\u30f3\u30bf\u30a4\u30e0\u691c\u51fa \u30e9\u30f3\u30bf\u30a4\u30e0\u691c\u51fa \u578b\u30ec\u30d9\u30eb\uff08\u90e8\u5206\u7684\uff09 \u30b3\u30f3\u30d1\u30a4\u30eb\u6642 (Send/Sync) \u578b\u30ec\u30d9\u30eb (STM) \u4e0d\u5909\u30c7\u30fc\u30bf + STM"},{"location":"all/#_5","title":"\u8a18\u4e8b\u69cb\u6210","text":""},{"location":"all/#part-i-2","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e\uff08\u7b2c 2 \u7ae0\uff09","text":"Part \u7d71\u5408\u8a18\u4e8b \u30c6\u30fc\u30de \u6bd4\u8f03\u306e\u30dd\u30a4\u30f3\u30c8 I \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e \u9010\u6b21\u51e6\u7406\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0 \u5404\u8a00\u8a9e\u306e\u57fa\u672c\u69cb\u6587\u3001\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3001\u30cf\u30c3\u30b7\u30e5\u8a08\u7b97\u306e\u8868\u73fe\u30b9\u30bf\u30a4\u30eb"},{"location":"all/#_6","title":"\u4e3b\u306a\u8a00\u8a9e\u9593\u6bd4\u8f03\u30c6\u30fc\u30de","text":"<ul> <li>\u57fa\u672c\u69cb\u6587: \u5404\u8a00\u8a9e\u306e\u30eb\u30fc\u30d7\u30fb\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8868\u73fe\uff08for vs \u30a4\u30c6\u30ec\u30fc\u30bf vs \u518d\u5e30\uff09</li> <li>\u30cf\u30c3\u30b7\u30e5\u8a08\u7b97: \u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea vs \u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\uff08sha2 crate vs MessageDigest vs hashlib\uff09</li> <li>\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u6e2c: \u5404\u8a00\u8a9e\u306e\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u624b\u6cd5\u306e\u9055\u3044</li> </ul>"},{"location":"all/#part-ii-4-5","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\uff08\u7b2c 4-5 \u7ae0\uff09","text":"Part \u7d71\u5408\u8a18\u4e8b \u30c6\u30fc\u30de \u6bd4\u8f03\u306e\u30dd\u30a4\u30f3\u30c8 II \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 \u30d7\u30ed\u30bb\u30b9\u3001\u30b9\u30ec\u30c3\u30c9\u3001\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb \u30b9\u30ec\u30c3\u30c9\u751f\u6210 API\u3001\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406\u3001IPC \u306e\u9055\u3044"},{"location":"all/#_7","title":"\u4e3b\u306a\u8a00\u8a9e\u9593\u6bd4\u8f03\u30c6\u30fc\u30de","text":"<ul> <li>\u30b9\u30ec\u30c3\u30c9\u751f\u6210: <code>std::thread::spawn</code> vs <code>Thread()</code> vs <code>threading.Thread</code> vs <code>forkIO</code> vs <code>future</code></li> <li>\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb: Rayon vs ExecutorService vs ThreadPoolExecutor vs Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc</li> <li>\u6240\u6709\u6a29\u3068\u30b9\u30ec\u30c3\u30c9: Rust \u306e <code>Send</code>/<code>Sync</code> \u30c8\u30ec\u30a4\u30c8 vs \u4ed6\u8a00\u8a9e\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u4fdd\u8b77</li> </ul>"},{"location":"all/#part-iii-6","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\uff08\u7b2c 6 \u7ae0\uff09","text":"Part \u7d71\u5408\u8a18\u4e8b \u30c6\u30fc\u30de \u6bd4\u8f03\u306e\u30dd\u30a4\u30f3\u30c8 III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7 \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3001\u6761\u4ef6\u5909\u6570\u3001\u5354\u8abf\u7684\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u306e\u5b9f\u73fe\u65b9\u6cd5"},{"location":"all/#_8","title":"\u4e3b\u306a\u8a00\u8a9e\u9593\u6bd4\u8f03\u30c6\u30fc\u30de","text":"<ul> <li>\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7: Condvar (Rust) vs wait/notify (Java) vs Monitor (C#) vs MVar (Haskell)</li> <li>\u5354\u8abf\u7684\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0: asyncio (Python) vs core.async (Clojure) vs Async (F#)</li> <li>\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6 vs \u5354\u8abf\u7684: \u5404\u8a00\u8a9e\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u30e2\u30c7\u30eb</li> </ul>"},{"location":"all/#part-iv-7","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3\uff08\u7b2c 7 \u7ae0\uff09","text":"Part \u7d71\u5408\u8a18\u4e8b \u30c6\u30fc\u30de \u6bd4\u8f03\u306e\u30dd\u30a4\u30f3\u30c8 IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3001\u30c7\u30fc\u30bf\u4e26\u5217 \u4e26\u5217\u30d1\u30bf\u30fc\u30f3\u306e\u30a4\u30c7\u30a3\u30aa\u30e0\u3001\u30c1\u30e3\u30cd\u30eb vs \u30b9\u30c8\u30ea\u30fc\u30e0"},{"location":"all/#_9","title":"\u4e3b\u306a\u8a00\u8a9e\u9593\u6bd4\u8f03\u30c6\u30fc\u30de","text":"<ul> <li>Fork/Join: ForkJoinPool (Java/Scala) vs Rayon (Rust) vs parallel (Haskell) vs pmap (Clojure)</li> <li>\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3: mpsc (Rust) vs BlockingQueue (Java) vs Channel (C#) vs core.async pipeline (Clojure)</li> <li>\u30c7\u30fc\u30bf\u4e26\u5217: parallelStream (Java) vs par_iter (Rust) vs Array.Parallel (F#) vs pmap (Clojure)</li> </ul>"},{"location":"all/#part-v-8-9","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1\uff08\u7b2c 8-9 \u7ae0\uff09","text":"Part \u7d71\u5408\u8a18\u4e8b \u30c6\u30fc\u30de \u6bd4\u8f03\u306e\u30dd\u30a4\u30f3\u30c8 V \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 Race Condition\u3001Lock\u3001Semaphore\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af \u6392\u4ed6\u5236\u5fa1\u306e\u62bd\u8c61\u5ea6\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u9632\u6b62\u7b56\u306e\u9055\u3044"},{"location":"all/#_10","title":"\u4e3b\u306a\u8a00\u8a9e\u9593\u6bd4\u8f03\u30c6\u30fc\u30de","text":"<ul> <li>\u6392\u4ed6\u5236\u5fa1: <code>Mutex&lt;T&gt;</code> (Rust) vs <code>synchronized</code> (Java) vs <code>lock</code> (C#) vs STM (Haskell/Clojure)</li> <li>\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f: Rust \u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u691c\u51fa vs Haskell STM \u306e\u697d\u89b3\u7684\u4e26\u884c\u5236\u5fa1 vs \u30ed\u30c3\u30af\u9806\u5e8f\u898f\u7d04</li> <li>\u4e0d\u5909\u6027\u306b\u3088\u308b\u56de\u907f: Clojure \u306e\u6c38\u7d9a\u30c7\u30fc\u30bf\u69cb\u9020 + atom vs Haskell \u306e\u7d14\u7c8b\u6027\u306b\u3088\u308b\u526f\u4f5c\u7528\u5206\u96e2</li> </ul>"},{"location":"all/#part-vi-io-10-11","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O\uff08\u7b2c 10-11 \u7ae0\uff09","text":"Part \u7d71\u5408\u8a18\u4e8b \u30c6\u30fc\u30de \u6bd4\u8f03\u306e\u30dd\u30a4\u30f3\u30c8 VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u3001\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3001Reactor \u30d1\u30bf\u30fc\u30f3 I/O \u30e2\u30c7\u30eb\u3001\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u5b9f\u88c5\u3001Reactor \u30d1\u30bf\u30fc\u30f3\u306e\u8868\u73fe"},{"location":"all/#_11","title":"\u4e3b\u306a\u8a00\u8a9e\u9593\u6bd4\u8f03\u30c6\u30fc\u30de","text":"<ul> <li>I/O \u30e2\u30c7\u30eb: NIO (Java) vs async I/O (Python) vs tokio (Rust) vs async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc (F#)</li> <li>\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7: asyncio (Python) vs libuv \u76f8\u5f53 (tokio) vs GHC I/O \u30de\u30cd\u30fc\u30b8\u30e3 (Haskell)</li> <li>Reactor \u30d1\u30bf\u30fc\u30f3: Selector (Java) vs epoll/kqueue \u30e9\u30c3\u30d1\u30fc (Rust) vs \u5404\u8a00\u8a9e\u306e\u62bd\u8c61\u5316\u30ec\u30d9\u30eb</li> </ul>"},{"location":"all/#part-vii-12","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\uff08\u7b2c 12 \u7ae0\uff09","text":"Part \u7d71\u5408\u8a18\u4e8b \u30c6\u30fc\u30de \u6bd4\u8f03\u306e\u30dd\u30a4\u30f3\u30c8 VII \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Future\u3001Coroutine\u3001async/await async/await \u306e\u610f\u5473\u8ad6\u3001Future/Promise \u306e\u578b\u8868\u73fe"},{"location":"all/#_12","title":"\u4e3b\u306a\u8a00\u8a9e\u9593\u6bd4\u8f03\u30c6\u30fc\u30de","text":"<ul> <li>async/await: Rust (\u30bc\u30ed\u30b3\u30b9\u30c8 Future) vs Python (\u30b3\u30eb\u30fc\u30c1\u30f3) vs C# (Task \u30d9\u30fc\u30b9) vs Scala (Future)</li> <li>\u30b3\u30eb\u30fc\u30c1\u30f3: Python \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf vs Clojure go \u30d6\u30ed\u30c3\u30af vs Haskell \u8efd\u91cf\u30b9\u30ec\u30c3\u30c9</li> <li>Future \u306e\u578b\u8868\u73fe: <code>Future&lt;Output=T&gt;</code> (Rust) vs <code>CompletableFuture&lt;T&gt;</code> (Java) vs <code>Task&lt;T&gt;</code> (C#) vs <code>Async&lt;'a&gt;</code> (F#)</li> </ul>"},{"location":"all/#part-viii-13","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406\uff08\u7b2c 13 \u7ae0\uff09","text":"Part \u7d71\u5408\u8a18\u4e8b \u30c6\u30fc\u30de \u6bd4\u8f03\u306e\u30dd\u30a4\u30f3\u30c8 VIII \u5206\u6563\u4e26\u5217\u51e6\u7406 MapReduce\u3001\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u3001\u884c\u5217\u4e57\u7b97 MapReduce \u306e\u95a2\u6570\u578b\u7684\u8868\u73fe\u3001\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3"},{"location":"all/#_13","title":"\u4e3b\u306a\u8a00\u8a9e\u9593\u6bd4\u8f03\u30c6\u30fc\u30de","text":"<ul> <li>MapReduce: parallelStream (Java) vs par_iter (Rust) vs pmap/reducers (Clojure) vs parMap (Haskell)</li> <li>\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3: Scala <code>.par</code> vs Rayon vs Array.Parallel (F#) vs multiprocessing.Pool (Python)</li> <li>\u95a2\u6570\u578b\u7684\u8868\u73fe: map/reduce \u306e\u5408\u6210\u3001\u4e0d\u5909\u30c7\u30fc\u30bf\u69cb\u9020\u4e0a\u3067\u306e\u4e26\u5217\u6f14\u7b97</li> </ul>"},{"location":"all/#_14","title":"\u5404\u7ae0\u306e\u7d71\u5408\u8a18\u4e8b\u69cb\u6210\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8","text":"<p>\u5404\u7d71\u5408\u8a18\u4e8b\u306f\u4ee5\u4e0b\u306e\u69cb\u6210\u3067\u57f7\u7b46\u3057\u307e\u3059\uff1a</p> <pre><code>1. \u306f\u3058\u3081\u306b\n   - \u30c6\u30fc\u30de\u306e\u6982\u8981\u3068\u4e26\u884c\u51e6\u7406\u3067\u306e\u610f\u7fa9\n\n2. \u5171\u901a\u306e\u672c\u8cea\n   - \u8a00\u8a9e\u3092\u8d85\u3048\u3066\u6210\u308a\u7acb\u3064\u4e26\u884c\u51e6\u7406\u306e\u539f\u5247\n\n3. \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03\n   - 8 \u8a00\u8a9e\u306e\u4ee3\u8868\u7684\u306a\u30b3\u30fc\u30c9\u3092\u4e26\u3079\u3066\u6bd4\u8f03\n   - \u5404\u8a00\u8a9e\u306e\u30a4\u30c7\u30a3\u30aa\u30e0\u3092\u6d3b\u304b\u3057\u305f\u5b9f\u88c5\u306e\u9055\u3044\n   - \u8a00\u8a9e\u30b0\u30eb\u30fc\u30d7\u5225\u306e\u50be\u5411\u5206\u6790\n\n4. \u6bd4\u8f03\u5206\u6790\n   - \u30e9\u30f3\u30bf\u30a4\u30e0\u3068\u30e1\u30e2\u30ea\u30e2\u30c7\u30eb\u306e\u5f71\u97ff\n   - \u5b89\u5168\u6027\u4fdd\u8a3c\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\uff08\u30b3\u30f3\u30d1\u30a4\u30eb\u6642 vs \u30e9\u30f3\u30bf\u30a4\u30e0\uff09\n   - \u8868\u73fe\u529b\u3068\u5b89\u5168\u6027\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\n\n5. \u5b9f\u8df5\u7684\u306a\u9078\u629e\u6307\u91dd\n   - \u3069\u306e\u8a00\u8a9e\u7279\u6027\u304c\u3053\u306e\u30c6\u30fc\u30de\u306b\u6700\u3082\u9069\u3057\u3066\u3044\u308b\u304b\n   - \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u5fdc\u3058\u305f\u9078\u629e\u57fa\u6e96\n\n6. \u307e\u3068\u3081\n   - \u8a00\u8a9e\u6a2a\u65ad\u7684\u306a\u5b66\u3073\n   - \u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b\u3078\u306e\u30ea\u30f3\u30af\n</code></pre>"},{"location":"all/#_15","title":"\u57f7\u7b46\u30eb\u30fc\u30eb","text":""},{"location":"all/#1","title":"1. \u57f7\u7b46\u30d5\u30a9\u30fc\u30de\u30c3\u30c8","text":"<pre><code># Part N: \u30d1\u30fc\u30c8\u30bf\u30a4\u30c8\u30eb\n\n## N.1 \u30bb\u30af\u30b7\u30e7\u30f3\u30bf\u30a4\u30c8\u30eb\n\n\u672c\u6587...\n\n### \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03\n\n#### \u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e\n\n&lt;details&gt;\n&lt;summary&gt;Haskell \u5b9f\u88c5&lt;/summary&gt;\n\n```haskell\n-- \u30b3\u30fc\u30c9\u4f8b\n```\n\n&lt;/details&gt;\n\n&lt;details&gt;\n&lt;summary&gt;Clojure \u5b9f\u88c5&lt;/summary&gt;\n\n```clojure\n;; \u30b3\u30fc\u30c9\u4f8b\n```\n\n&lt;/details&gt;\n\n#### \u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e\n\n&lt;details&gt;\n&lt;summary&gt;Scala \u5b9f\u88c5&lt;/summary&gt;\n\n```scala\n// \u30b3\u30fc\u30c9\u4f8b\n```\n\n&lt;/details&gt;\n\n&lt;details&gt;\n&lt;summary&gt;Rust \u5b9f\u88c5&lt;/summary&gt;\n\n```rust\n// \u30b3\u30fc\u30c9\u4f8b\n```\n\n&lt;/details&gt;\n\n&lt;details&gt;\n&lt;summary&gt;F# \u5b9f\u88c5&lt;/summary&gt;\n\n```fsharp\n// \u30b3\u30fc\u30c9\u4f8b\n```\n\n&lt;/details&gt;\n\n#### OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u8a00\u8a9e\n\n&lt;details&gt;\n&lt;summary&gt;Java \u5b9f\u88c5&lt;/summary&gt;\n\n```java\n// \u30b3\u30fc\u30c9\u4f8b\n```\n\n&lt;/details&gt;\n\n&lt;details&gt;\n&lt;summary&gt;C# \u5b9f\u88c5&lt;/summary&gt;\n\n```csharp\n// \u30b3\u30fc\u30c9\u4f8b\n```\n\n&lt;/details&gt;\n\n&lt;details&gt;\n&lt;summary&gt;Python \u5b9f\u88c5&lt;/summary&gt;\n\n```python\n# \u30b3\u30fc\u30c9\u4f8b\n```\n\n&lt;/details&gt;\n</code></pre>"},{"location":"all/#2","title":"2. \u30ea\u30b9\u30c8\u8a18\u8ff0\u30eb\u30fc\u30eb","text":"<p>\u30bf\u30b9\u30af\u9805\u76ee\u3084\u30ea\u30b9\u30c8\u9805\u76ee\u306f\u3001\u30e9\u30d9\u30eb\u884c\u306e\u5f8c\u306b 1 \u884c\u7a7a\u3051\u3066 \u304b\u3089\u8a18\u8ff0\u3057\u307e\u3059\u3002</p> <p>OK:</p> <pre><code>**\u6bd4\u8f03\u30dd\u30a4\u30f3\u30c8**:\n\n- \u6392\u4ed6\u5236\u5fa1\u306e\u62bd\u8c61\u5ea6\n- \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u7279\u6027\n- \u5b89\u5168\u6027\u4fdd\u8a3c\n</code></pre>"},{"location":"all/#3","title":"3. \u8a00\u8a9e\u30b0\u30eb\u30fc\u30d7\u5225\u306e\u6574\u7406","text":"<p>\u30b3\u30fc\u30c9\u6bd4\u8f03\u3067\u306f 8 \u8a00\u8a9e\u3092\u4ee5\u4e0b\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u5206\u3051\u3066\u63d0\u793a\u3057\u307e\u3059\uff1a</p> <ol> <li>\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8: Haskell \u2192 Clojure</li> <li>\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\uff08\u9759\u7684\uff09: Scala \u2192 Rust \u2192 F#</li> <li>OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea: Java \u2192 C# \u2192 Python</li> </ol>"},{"location":"all/#_16","title":"\u57f7\u7b46\u8a08\u753b","text":""},{"location":"all/#_17","title":"\u6982\u8981","text":"<p>\u5168 8 Part \u306e\u7d71\u5408\u8a18\u4e8b\u3092\u3001Part \u3054\u3068\u306e\u7d71\u5408\u96e3\u6613\u5ea6\u306b\u57fa\u3065\u304d 3 \u3064\u306e\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3067\u57f7\u7b46\u3057\u307e\u3059\u3002</p> <ul> <li>\u7dcf\u30bd\u30fc\u30b9\u91cf: 8 \u8a00\u8a9e \u00d7 8 Part = 64 \u30d5\u30a1\u30a4\u30eb</li> <li>\u7d71\u5408\u8a18\u4e8b\u6570: 8 \u672c</li> <li>\u5404\u8a18\u4e8b\u306e\u60f3\u5b9a\u898f\u6a21: 500\u301c1,000 \u884c</li> <li>\u8a73\u7d30\u8a08\u753b: writing-plan.md \u3092\u53c2\u7167</li> </ul>"},{"location":"all/#_18","title":"\u96e3\u6613\u5ea6\u5206\u985e","text":"\u96e3\u6613\u5ea6 Part \u6570 \u7279\u5fb4 Low 3 Part\uff08I-III\uff09 \u5168\u8a00\u8a9e\u3067\u69cb\u9020\u304c\u4e00\u8cab\u3001\u57fa\u790e\u6982\u5ff5\u3067\u7d71\u5408\u3057\u3084\u3059\u3044 Medium 3 Part\uff08IV, VII, VIII\uff09 \u30d1\u30bf\u30fc\u30f3\u306e\u8868\u73fe\u65b9\u6cd5\u306b\u8a00\u8a9e\u5dee\u304c\u3042\u308b\u304c\u5171\u901a\u69cb\u9020\u3042\u308a High 2 Part\uff08V, VI\uff09 \u540c\u671f\u30e2\u30c7\u30eb\u30fbI/O \u30e2\u30c7\u30eb\u304c\u8a00\u8a9e\u3054\u3068\u306b\u6839\u672c\u7684\u306b\u7570\u306a\u308b"},{"location":"all/#1-low","title":"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3 1: \u57fa\u790e\u3068\u4e26\u884c\u51e6\u7406\u5165\u9580\uff08Low \u96e3\u6613\u5ea6\uff09","text":"<p>\u5bfe\u8c61: Part I + Part II + Part III\uff08\u7b2c 2, 4-6 \u7ae0\uff09</p> <p>\u5168\u8a00\u8a9e\u3067\u6982\u5ff5\u69cb\u9020\u304c\u4e00\u8cab\u3057\u3066\u304a\u308a\u3001\u7d71\u5408\u304c\u6700\u3082\u5bb9\u6613\u3067\u3059\u3002</p> Part \u30bf\u30a4\u30c8\u30eb \u96e3\u6613\u5ea6 \u7d71\u5408\u65b9\u91dd I \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e Low \u9010\u6b21\u51e6\u7406\u306e\u8868\u73fe\u3092\u5168\u8a00\u8a9e\u3067\u6a2a\u65ad\u6bd4\u8f03 II \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 Low \u30b9\u30ec\u30c3\u30c9\u751f\u6210\u30fb\u7ba1\u7406\u306e API \u3092\u8a00\u8a9e\u5225\u306b\u6bd4\u8f03 III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 Low \u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u5b9f\u88c5\u3092\u901a\u3058\u305f\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30e2\u30c7\u30eb\u306e\u6bd4\u8f03 <p>\u57f7\u7b46\u9806\u5e8f: I \u2192 II \u2192 III</p> <p>\u5b8c\u4e86\u6761\u4ef6:</p> <ul> <li> \u5404 Part \u304c\u7d71\u5408\u8a18\u4e8b\u69cb\u6210\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6e96\u62e0</li> <li> 8 \u8a00\u8a9e\u3059\u3079\u3066\u306e\u30b3\u30fc\u30c9\u4f8b\u3092\u542b\u3080</li> <li> \u8a00\u8a9e\u30b0\u30eb\u30fc\u30d7\u5225\u306e\u50be\u5411\u5206\u6790\u3092\u542b\u3080</li> </ul>"},{"location":"all/#2-medium","title":"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3 2: \u4e26\u5217\u30d1\u30bf\u30fc\u30f3\u3068\u975e\u540c\u671f\uff08Medium \u96e3\u6613\u5ea6\uff09","text":"<p>\u5bfe\u8c61: Part IV + Part VII + Part VIII\uff08\u7b2c 7, 12, 13 \u7ae0\uff09</p> <p>\u4e26\u5217\u30d1\u30bf\u30fc\u30f3\u306e\u8868\u73fe\u5dee\u304c\u5927\u304d\u3044\u304c\u3001\u5171\u901a\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u69cb\u9020\u3092\u8ef8\u306b\u7d71\u5408\u53ef\u80fd\u3067\u3059\u3002</p> Part \u30bf\u30a4\u30c8\u30eb \u96e3\u6613\u5ea6 \u7d71\u5408\u65b9\u91dd IV \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Medium Fork/Join\u30fb\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u69cb\u9020\u3092\u8ef8\u306b\u8a00\u8a9e\u5225\u5b9f\u88c5\u3092\u6bd4\u8f03 VII \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Medium async/await \u3068 Future/Promise \u306e\u578b\u8868\u73fe\u3092\u6bd4\u8f03 VIII \u5206\u6563\u4e26\u5217\u51e6\u7406 Medium MapReduce \u306e\u95a2\u6570\u578b\u7684\u8868\u73fe\u3068\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6bd4\u8f03 <p>\u57f7\u7b46\u9806\u5e8f: IV \u2192 VIII \u2192 VII</p> <p>\u5b8c\u4e86\u6761\u4ef6:</p> <ul> <li> Fork/Join \u30d1\u30bf\u30fc\u30f3\u306e 8 \u8a00\u8a9e\u6bd4\u8f03\u8868\u3092\u542b\u3080</li> <li> async/await \u306e\u610f\u5473\u8ad6\u306e\u9055\u3044\u3092\u56f3\u89e3</li> <li> MapReduce \u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u7279\u6027\u306e\u6bd4\u8f03\u3092\u542b\u3080</li> </ul>"},{"location":"all/#3-io-high","title":"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3 3: \u540c\u671f\u3068 I/O \u30e2\u30c7\u30eb\uff08High \u96e3\u6613\u5ea6\uff09","text":"<p>\u5bfe\u8c61: Part V + Part VI\uff08\u7b2c 8-11 \u7ae0\uff09</p> <p>\u540c\u671f\u30e2\u30c7\u30eb\u3068 I/O \u30e2\u30c7\u30eb\u304c\u8a00\u8a9e\u3054\u3068\u306b\u6839\u672c\u7684\u306b\u7570\u306a\u308a\u3001\u6700\u96e3\u95a2\u3067\u3059\u3002</p> Part \u30bf\u30a4\u30c8\u30eb \u96e3\u6613\u5ea6 \u7d71\u5408\u65b9\u91dd V \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 High Lock/STM/\u6240\u6709\u6a29\u306e\u6839\u672c\u7684\u306a\u9055\u3044\u3092\u8a00\u8a9e\u5225\u306b\u6df1\u6398\u308a VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O High Reactor \u30d1\u30bf\u30fc\u30f3\u3068 I/O \u30e2\u30c7\u30eb\u306e\u9055\u3044\u3092\u8a00\u8a9e\u5225\u306b\u89e3\u8aac <p>\u57f7\u7b46\u9806\u5e8f: V \u2192 VI</p> <p>\u5b8c\u4e86\u6761\u4ef6:</p> <ul> <li> \u6392\u4ed6\u5236\u5fa1\u30e2\u30c7\u30eb\uff08Lock vs STM vs \u6240\u6709\u6a29\uff09\u306e\u6bd4\u8f03\u8868\u3092\u542b\u3080</li> <li> I/O \u30e2\u30c7\u30eb\uff08\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u975e\u540c\u671f\uff09\u306e\u6bd4\u8f03\u8868\u3092\u542b\u3080</li> <li> \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u9632\u6b62\u7b56\u306e\u8a00\u8a9e\u5225\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u6bd4\u8f03</li> </ul>"},{"location":"all/#_19","title":"\u5168\u4f53\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb","text":"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3 Part \u6570 \u96e3\u6613\u5ea6\u69cb\u6210 \u4e3b\u306a\u8ab2\u984c 1 3 Part\uff08I-III\uff09 Low \u00d7 3 \u30a6\u30a9\u30fc\u30e0\u30a2\u30c3\u30d7\u30018 \u8a00\u8a9e\u6bd4\u8f03\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u78ba\u7acb 2 3 Part\uff08IV, VII, VIII\uff09 Medium \u00d7 3 \u4e26\u5217\u30d1\u30bf\u30fc\u30f3\u306e\u8868\u73fe\u5dee\u306e\u6574\u7406\u3001async \u30e2\u30c7\u30eb\u306e\u6bd4\u8f03 3 2 Part\uff08V, VI\uff09 High \u00d7 2 \u540c\u671f\u30e2\u30c7\u30eb\u30fbI/O \u30e2\u30c7\u30eb\u306e\u6839\u672c\u7684\u5dee\u7570\u3078\u306e\u5bfe\u5fdc"},{"location":"all/#_20","title":"\u9032\u6357\u7ba1\u7406","text":"Part \u30bf\u30a4\u30c8\u30eb \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3 \u96e3\u6613\u5ea6 \u72b6\u614b I \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e 1 Low \u5b8c\u4e86 II \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 1 Low \u5b8c\u4e86 III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 1 Low \u5b8c\u4e86 IV \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 2 Medium \u5b8c\u4e86 V \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 3 High \u5b8c\u4e86 VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O 3 High \u5b8c\u4e86 VII \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 2 Medium \u5b8c\u4e86 VIII \u5206\u6563\u4e26\u5217\u51e6\u7406 2 Medium \u5b8c\u4e86"},{"location":"all/#_21","title":"\u8a00\u8a9e\u5225\u500b\u5225\u8a18\u4e8b\u3078\u306e\u30ea\u30f3\u30af","text":"\u8a00\u8a9e \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea \u500b\u5225\u8a18\u4e8b\u4e00\u89a7 Python threading, asyncio, multiprocessing \u5168 8 Part Java ExecutorService, CompletableFuture, Virtual Thread \u5168 8 Part C# Task (TPL), async/await, Channel \u5168 8 Part Scala Future, synchronized, Parallel Collections \u5168 8 Part F# Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc, MailboxProcessor, Agent \u5168 8 Part Rust std::thread, Rayon, tokio \u5168 8 Part Haskell forkIO, async, STM \u5168 8 Part Clojure atom, ref/STM, core.async \u5168 8 Part"},{"location":"all/#_22","title":"\u53c2\u7167","text":"<ul> <li>\u300cGrokking Concurrency\u300dKirill Bobrov, Manning Publications</li> <li>Python threading \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</li> <li>Java Concurrency in Practice</li> <li>C# \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0</li> <li>Scala \u4e26\u884c\u51e6\u7406\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</li> <li>F# \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0</li> <li>Rust Fearless Concurrency</li> <li>Haskell Concurrency</li> <li>Clojure Concurrency</li> <li>Rayon</li> <li>Tokio</li> </ul>"},{"location":"all/part-1-ch02-sequential/","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":""},{"location":"all/part-1-ch02-sequential/#11","title":"1.1 \u306f\u3058\u3081\u306b","text":"<p>\u4e26\u884c\u51e6\u7406\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u307e\u305a\u9010\u6b21\u51e6\u7406\uff08Sequential Processing\uff09\u306e\u7279\u5fb4\u3068\u9650\u754c\u3092\u77e5\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3068\u3044\u3046\u8a08\u7b97\u91cf\u306e\u591a\u3044\u554f\u984c\u3092\u984c\u6750\u306b\u3001\u9010\u6b21\u51e6\u7406\u304c\u3069\u306e\u3088\u3046\u306b\u52d5\u4f5c\u3057\u3001\u306a\u305c\u4e26\u884c\u51e6\u7406\u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u304b\u3092 8 \u3064\u306e\u8a00\u8a9e\u3067\u5b9f\u88c5\u3057\u306a\u304c\u3089\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-1-ch02-sequential/#_1","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3068\u306f","text":"<p>SHA-256 \u30cf\u30c3\u30b7\u30e5\u304b\u3089\u5143\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u9006\u7b97\u3059\u308b\u3053\u3068\u306f\u8a08\u7b97\u4e0a\u4e0d\u53ef\u80fd\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\uff08\u7dcf\u5f53\u305f\u308a\uff09\u3067\u5019\u88dc\u3092\u751f\u6210\u3057\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u6bd4\u8f03\u3059\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u53d6\u308a\u307e\u3059\u3002\u3053\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f\u4ee5\u4e0b\u306e 3 \u30b9\u30c6\u30c3\u30d7\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\uff1a</p> <ol> <li>\u5019\u88dc\u751f\u6210 \u2014 \u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5168\u7d44\u307f\u5408\u308f\u305b\u3092\u751f\u6210\u3059\u308b</li> <li>\u30cf\u30c3\u30b7\u30e5\u8a08\u7b97 \u2014 \u5404\u5019\u88dc\u306e SHA-256 \u30cf\u30c3\u30b7\u30e5\u3092\u8a08\u7b97\u3059\u308b</li> <li>\u7167\u5408 \u2014 \u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u30cf\u30c3\u30b7\u30e5\u3068\u4e00\u81f4\u3059\u308b\u304b\u78ba\u8a8d\u3059\u308b</li> </ol>"},{"location":"all/part-1-ch02-sequential/#12","title":"1.2 \u5171\u901a\u306e\u672c\u8cea","text":""},{"location":"all/part-1-ch02-sequential/#_2","title":"\u9010\u6b21\u51e6\u7406\u306e\u69cb\u9020","text":"<p>\u3059\u3079\u3066\u306e\u8a00\u8a9e\u3067\u5171\u901a\u3059\u308b\u9010\u6b21\u51e6\u7406\u306e\u69cb\u9020\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\uff1a</p> <pre><code>\u5165\u529b: \u30bf\u30fc\u30b2\u30c3\u30c8\u30cf\u30c3\u30b7\u30e5\u3001\u63a2\u7d22\u7a7a\u9593\uff08\u6587\u5b57\u7a2e \u00d7 \u9577\u3055\uff09\n\u51fa\u529b: \u4e00\u81f4\u3059\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u898b\u3064\u304b\u3089\u306a\u3051\u308c\u3070 None/null\uff09\n\nfor each candidate in \u63a2\u7d22\u7a7a\u9593:\n    hash = SHA256(candidate)\n    if hash == \u30bf\u30fc\u30b2\u30c3\u30c8\u30cf\u30c3\u30b7\u30e5:\n        return candidate\nreturn None\n</code></pre>"},{"location":"all/part-1-ch02-sequential/#_3","title":"\u306a\u305c\u9010\u6b21\u51e6\u7406\u3067\u306f\u4e0d\u5341\u5206\u304b","text":"<p>8 \u6841\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u6570\u5b57\u306e\u307f\uff09\u306e\u5834\u5408\u3001\u63a2\u7d22\u7a7a\u9593\u306f 1 \u5104\u901a\u308a \u3067\u3059\u3002\u9010\u6b21\u51e6\u7406\u3067\u306f CPU \u30b3\u30a2\u3092 1 \u3064\u3057\u304b\u4f7f\u3048\u306a\u3044\u305f\u3081\u30014 \u30b3\u30a2 CPU \u3067\u3082 25% \u306e\u5229\u7528\u7387 \u306b\u3068\u3069\u307e\u308a\u307e\u3059\u3002\u6b8b\u308a\u306e 75% \u306e\u8a08\u7b97\u80fd\u529b\u306f\u7121\u99c4\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u3053\u308c\u304c\u4e26\u884c\u51e6\u7406\u3092\u5b66\u3076\u52d5\u6a5f\u3067\u3059\u3002\u63a2\u7d22\u7a7a\u9593\u3092\u5206\u5272\u3057\u3001\u8907\u6570\u306e\u30b3\u30a2\u3067\u540c\u6642\u306b\u51e6\u7406\u3059\u308c\u3070\u3001\u7406\u8ad6\u4e0a\u306f\u30b3\u30a2\u6570\u306b\u6bd4\u4f8b\u3057\u305f\u9ad8\u901f\u5316\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"all/part-1-ch02-sequential/#_4","title":"\u5171\u901a\u306e\u51e6\u7406\u30d5\u30ed\u30fc","text":"\u30b9\u30c6\u30c3\u30d7 \u95a2\u6570\u540d \u8aac\u660e 1 <code>getCombinations</code> / <code>generate</code> \u5019\u88dc\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u751f\u6210 2 <code>getCryptoHash</code> SHA-256 \u30cf\u30c3\u30b7\u30e5\u306e\u8a08\u7b97 3 <code>checkPassword</code> \u30cf\u30c3\u30b7\u30e5\u306e\u7167\u5408 4 <code>crackPassword</code> \u9010\u6b21\u63a2\u7d22\u306e\u5b9f\u884c"},{"location":"all/part-1-ch02-sequential/#13","title":"1.3 \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"all/part-1-ch02-sequential/#_5","title":"\u5019\u88dc\u751f\u6210\u306e\u30a2\u30d7\u30ed\u30fc\u30c1","text":"<p>8 \u8a00\u8a9e\u306e\u5b9f\u88c5\u306f\u3001\u5019\u88dc\u751f\u6210\u306e\u65b9\u6cd5\u3067\u5927\u304d\u304f 2 \u3064\u306b\u5206\u304b\u308c\u307e\u3059\uff1a</p> \u30a2\u30d7\u30ed\u30fc\u30c1 \u8a00\u8a9e \u63a2\u7d22\u7a7a\u9593 \u65b9\u6cd5 \u6570\u5024\u30bc\u30ed\u30d1\u30c7\u30a3\u30f3\u30b0 Python, Java, C# <code>00000000</code>\u301c<code>99999999</code> \u6570\u5024\u3092\u30bc\u30ed\u57cb\u3081\u3057\u3066\u6587\u5b57\u5217\u5316 \u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u76f4\u7a4d Scala, F#, Rust, Haskell, Clojure <code>aa</code>\u301c<code>zz</code>\uff0826^n \u901a\u308a\uff09 \u6587\u5b57\u96c6\u5408\u306e\u76f4\u7a4d\u3067\u5019\u88dc\u3092\u518d\u5e30\u751f\u6210"},{"location":"all/part-1-ch02-sequential/#sha-256","title":"SHA-256 \u30cf\u30c3\u30b7\u30e5\u8a08\u7b97","text":""},{"location":"all/part-1-ch02-sequential/#_6","title":"\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e","text":"Haskell \u5b9f\u88c5 <pre><code>module Ch02.PasswordCracker (getCryptoHash, crackPassword) where\n\nimport qualified Crypto.Hash.SHA256 as SHA256\nimport qualified Data.ByteString.Char8 as BS\nimport qualified Data.ByteString as BSW\nimport Data.ByteString (ByteString)\n\ngetCryptoHash :: String -&gt; String\ngetCryptoHash password =\n    let hash = SHA256.hash (BS.pack password)\n    in concatMap (\\w -&gt; let hex = showHex w \"\"\n                        in if length hex == 1 then '0' : hex else hex)\n                 (BSW.unpack hash)\n</code></pre>  **\u7279\u5fb4**:  - \u7d14\u7c8b\u95a2\u6570\u3068\u3057\u3066\u5b9a\u7fa9\uff08\u526f\u4f5c\u7528\u306a\u3057\uff09 - `ByteString` \u3092\u4f7f\u3063\u305f\u52b9\u7387\u7684\u306a\u30d0\u30a4\u30c8\u64cd\u4f5c - `concatMap` \u306b\u3088\u308b\u95a2\u6570\u578b\u7684\u306a\u30d0\u30a4\u30c8\u219216 \u9032\u6570\u5909\u63db   Clojure \u5b9f\u88c5 <pre><code>(ns grokking-concurrency.ch02.password-cracker\n  (:require [buddy.core.hash :as hash]\n            [buddy.core.codecs :as codecs]))\n\n(defn sha256 [s]\n  (-&gt; (hash/sha256 s)\n      (codecs/bytes-&gt;hex)))\n</code></pre>  **\u7279\u5fb4**:  - \u30b9\u30ec\u30c3\u30c7\u30a3\u30f3\u30b0\u30de\u30af\u30ed `-&gt;` \u306b\u3088\u308b\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u306e\u660e\u793a - `buddy-core` \u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3088\u308b\u7c21\u6f54\u306a\u30cf\u30c3\u30b7\u30e5\u8a08\u7b97 - \u95a2\u6570\u578b\u30b9\u30bf\u30a4\u30eb\u306e\u5408\u6210"},{"location":"all/part-1-ch02-sequential/#_7","title":"\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e","text":"Scala \u5b9f\u88c5 <pre><code>import java.security.MessageDigest\n\nobject PasswordCracker:\n  def getCryptoHash(password: String): String =\n    val md = MessageDigest.getInstance(\"SHA-256\")\n    val bytes = md.digest(password.getBytes(\"UTF-8\"))\n    bytes.map(b =&gt; f\"$b%02x\").mkString\n</code></pre>  **\u7279\u5fb4**:  - `f\"$b%02x\"` \u6587\u5b57\u5217\u88dc\u9593\u306b\u3088\u308b\u7c21\u6f54\u306a 16 \u9032\u6570\u5909\u63db - `map` + `mkString` \u306e\u95a2\u6570\u578b\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 - Java \u306e `MessageDigest` \u3092\u76f4\u63a5\u5229\u7528\uff08JVM \u4e92\u63db\uff09   Rust \u5b9f\u88c5 <pre><code>use sha2::{Sha256, Digest};\n\npub fn get_crypto_hash(password: &amp;str) -&gt; String {\n    let mut hasher = Sha256::new();\n    hasher.update(password.as_bytes());\n    let result = hasher.finalize();\n    format!(\"{:x}\", result)\n}\n</code></pre>  **\u7279\u5fb4**:  - `&amp;str` \u53c2\u7167\u306b\u3088\u308b\u6240\u6709\u6a29\u3092\u79fb\u52d5\u3057\u306a\u3044\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 - `sha2` \u30af\u30ec\u30fc\u30c8\u306e\u30d3\u30eb\u30c0\u30fc\u30d1\u30bf\u30fc\u30f3 - `format!` \u30de\u30af\u30ed\u306b\u3088\u308b 16 \u9032\u6570\u30d5\u30a9\u30fc\u30de\u30c3\u30c8   F# \u5b9f\u88c5 <pre><code>module PasswordCracker =\n    open System.Security.Cryptography\n    open System.Text\n\n    let getCryptoHash (password: string) : string =\n        let bytes = Encoding.UTF8.GetBytes(password)\n        let hash = SHA256.HashData(bytes)\n        hash\n        |&gt; Array.map (fun b -&gt; b.ToString(\"x2\"))\n        |&gt; String.concat \"\"\n</code></pre>  **\u7279\u5fb4**:  - \u30d1\u30a4\u30d7\u6f14\u7b97\u5b50 `|&gt;` \u306b\u3088\u308b\u30c7\u30fc\u30bf\u5909\u63db\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 - `Array.map` + `String.concat` \u306e\u95a2\u6570\u578b\u5408\u6210 - .NET \u306e `SHA256.HashData()` \u3092\u76f4\u63a5\u5229\u7528"},{"location":"all/part-1-ch02-sequential/#oop","title":"OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u8a00\u8a9e","text":"Java \u5b9f\u88c5 <pre><code>import java.security.MessageDigest;\nimport java.util.HexFormat;\n\npublic class PasswordCracker {\n    public static String getCryptoHash(String password) {\n        try {\n            MessageDigest md = MessageDigest.getInstance(\"SHA-256\");\n            byte[] hash = md.digest(password.getBytes(StandardCharsets.UTF_8));\n            return HexFormat.of().formatHex(hash);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>  **\u7279\u5fb4**:  - `MessageDigest` \u306b\u3088\u308b\u6a19\u6e96\u7684\u306a\u30cf\u30c3\u30b7\u30e5 API - Java 17+ \u306e `HexFormat` \u306b\u3088\u308b\u7c21\u6f54\u306a 16 \u9032\u6570\u5909\u63db - \u30c1\u30a7\u30c3\u30af\u4f8b\u5916\u306e\u30e9\u30c3\u30d7\u51e6\u7406   C# \u5b9f\u88c5 <pre><code>using System.Security.Cryptography;\nusing System.Text;\n\npublic static class PasswordCracker\n{\n    public static string GetCryptoHash(string password)\n    {\n        var bytes = Encoding.UTF8.GetBytes(password);\n        var hash = SHA256.HashData(bytes);\n        return Convert.ToHexString(hash).ToLowerInvariant();\n    }\n}\n</code></pre>  **\u7279\u5fb4**:  - `SHA256.HashData()` \u306e\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc API - `Convert.ToHexString()` \u306b\u3088\u308b .NET 5+ \u30b9\u30bf\u30a4\u30eb\u306e\u5909\u63db - PascalCase \u306e .NET \u547d\u540d\u898f\u5247   Python \u5b9f\u88c5 <pre><code>import hashlib\n\ndef get_crypto_hash(password: str) -&gt; str:\n    return hashlib.sha256(password.encode(\"utf-8\")).hexdigest()\n</code></pre>  **\u7279\u5fb4**:  - `hashlib` \u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3088\u308b\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc - \u578b\u30d2\u30f3\u30c8\u4ed8\u304d\u306e\u7c21\u6f54\u306a\u5b9a\u7fa9 - \u6700\u3082\u77ed\u3044\u30b3\u30fc\u30c9\u91cf"},{"location":"all/part-1-ch02-sequential/#_8","title":"\u5019\u88dc\u751f\u6210\u3068\u63a2\u7d22","text":""},{"location":"all/part-1-ch02-sequential/#python-java-c","title":"\u6570\u5024\u30bc\u30ed\u30d1\u30c7\u30a3\u30f3\u30b0\u65b9\u5f0f\uff08Python, Java, C#\uff09","text":"Python \u5b9f\u88c5 <pre><code>def get_combinations(*, length: int, min_number: int = 0,\n                     max_number: T.Optional[int] = None) -&gt; T.List[str]:\n    if max_number is None:\n        max_number = int(\"9\" * length)\n    combinations = []\n    for i in range(min_number, max_number + 1):\n        str_num = str(i)\n        zeros = \"0\" * (length - len(str_num))\n        combinations.append(\"\".join((zeros, str_num)))\n    return combinations\n</code></pre> Java \u5b9f\u88c5 <pre><code>public static List&lt;String&gt; getCombinations(int length, int minNumber, int maxNumber) {\n    List&lt;String&gt; combinations = new ArrayList&lt;&gt;();\n    String format = \"%0\" + length + \"d\";\n    for (int i = minNumber; i &lt;= maxNumber; i++) {\n        combinations.add(String.format(format, i));\n    }\n    return combinations;\n}\n</code></pre> C# \u5b9f\u88c5 <pre><code>public static List&lt;string&gt; GetCombinations(int length, int minNumber, int maxNumber)\n{\n    var combinations = new List&lt;string&gt;();\n    var format = new string('0', length);\n    for (var i = minNumber; i &lt;= maxNumber; i++)\n    {\n        combinations.Add(i.ToString(format));\n    }\n    return combinations;\n}\n</code></pre>"},{"location":"all/part-1-ch02-sequential/#scala-f-rust-haskell-clojure","title":"\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u76f4\u7a4d\u65b9\u5f0f\uff08Scala, F#, Rust, Haskell, Clojure\uff09","text":"Scala \u5b9f\u88c5\uff08\u672b\u5c3e\u518d\u5e30 + for-yield\uff09 <pre><code>private val Letters = ('a' to 'z').toList\n\ndef getCombinations(length: Int): List[String] =\n  @tailrec\n  def generate(current: List[String], remaining: Int): List[String] =\n    if remaining &lt;= 0 then current\n    else\n      val next = for\n        prefix &lt;- current\n        letter &lt;- Letters\n      yield prefix + letter\n      generate(next, remaining - 1)\n\n  generate(List(\"\"), length)\n</code></pre> F# \u5b9f\u88c5\uff08\u30ea\u30b9\u30c8\u5185\u5305\u8868\u8a18 + \u30d1\u30a4\u30d7\uff09 <pre><code>let getCombinations (length: int) : string list =\n    let letters = [ 'a' .. 'z' ]\n\n    let rec generate (current: string list) (remaining: int) =\n        if remaining &lt;= 0 then current\n        else\n            let next =\n                [ for prefix in current do\n                  for letter in letters do\n                      yield prefix + string letter ]\n            generate next (remaining - 1)\n\n    generate [ \"\" ] length\n</code></pre> Rust \u5b9f\u88c5\uff08\u518d\u5e30 + clone\uff09 <pre><code>fn crack_recursive(\n    crypto_hash: &amp;str,\n    alphabet: &amp;[char],\n    prefix: String,\n    remaining: usize,\n) -&gt; Option&lt;String&gt; {\n    if remaining == 0 {\n        return if get_crypto_hash(&amp;prefix) == crypto_hash {\n            Some(prefix)\n        } else {\n            None\n        };\n    }\n    for &amp;c in alphabet {\n        let mut candidate = prefix.clone();\n        candidate.push(c);\n        if let Some(result) = crack_recursive(crypto_hash, alphabet, candidate, remaining - 1) {\n            return Some(result);\n        }\n    }\n    None\n}\n</code></pre> Haskell \u5b9f\u88c5\uff08foldr + Maybe\uff09 <pre><code>crackRecursive :: String -&gt; String -&gt; String -&gt; Int -&gt; Maybe String\ncrackRecursive cryptoHash alphabet prefix 0 =\n    if getCryptoHash prefix == cryptoHash\n        then Just prefix\n        else Nothing\ncrackRecursive cryptoHash alphabet prefix remaining =\n    foldr tryChar Nothing alphabet\n  where\n    tryChar c acc =\n        case crackRecursive cryptoHash alphabet (prefix ++ [c]) (remaining - 1) of\n            Just result -&gt; Just result\n            Nothing     -&gt; acc\n</code></pre> Clojure \u5b9f\u88c5\uff08loop/recur + \u57fa\u6570\u5909\u63db\uff09 <pre><code>(def alphabet \"abcdefghijklmnopqrstuvwxyz\")\n\n(defn generate-password [index length]\n  (let [base (count alphabet)]\n    (loop [idx index\n           acc '()]\n      (if (= (count acc) length)\n        (apply str acc)\n        (recur (quot idx base)\n               (cons (nth alphabet (mod idx base)) acc))))))\n\n(defn crack-password [target-hash length]\n  (let [total (long (Math/pow (count alphabet) length))]\n    (loop [i 0]\n      (when (&lt; i total)\n        (let [password (generate-password i length)]\n          (if (= (sha256 password) target-hash)\n            password\n            (recur (inc i))))))))\n</code></pre>"},{"location":"all/part-1-ch02-sequential/#_9","title":"\u623b\u308a\u5024\u306e\u578b\u8868\u73fe","text":"<p>\u300c\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u300d\u30b1\u30fc\u30b9\u306e\u8868\u73fe\u65b9\u6cd5\u306f\u3001\u8a00\u8a9e\u306e\u578b\u30b7\u30b9\u30c6\u30e0\u306b\u5927\u304d\u304f\u4f9d\u5b58\u3057\u307e\u3059\uff1a</p> \u8a00\u8a9e \u623b\u308a\u5024\u578b \u300c\u898b\u3064\u304b\u3089\u306a\u3044\u300d\u306e\u8868\u73fe Python <code>None</code>\uff08\u6697\u9ed9\uff09 \u95a2\u6570\u304c\u4f55\u3082\u8fd4\u3055\u306a\u3044 Java <code>String</code> (nullable) <code>null</code> \u3092\u8fd4\u3059 C# <code>string?</code> <code>null</code> \u3092\u8fd4\u3059 Scala <code>Option[String]</code> <code>None</code> \u3092\u8fd4\u3059 F# <code>string option</code> <code>None</code> \u3092\u8fd4\u3059 Rust <code>Option&lt;String&gt;</code> <code>None</code> \u3092\u8fd4\u3059 Haskell <code>Maybe String</code> <code>Nothing</code> \u3092\u8fd4\u3059 Clojure \u52d5\u7684\uff08<code>nil</code>\uff09 <code>nil</code> \u3092\u8fd4\u3059 <p>\u5b89\u5168\u6027\u306e\u968e\u5c64:</p> <ul> <li>\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u4fdd\u8a3c: Rust (<code>Option&lt;T&gt;</code>), Haskell (<code>Maybe</code>), Scala (<code>Option</code>), F# (<code>option</code>)</li> <li>\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3092\u5f37\u5236\u3057\u3001<code>null</code> \u53c2\u7167\u30a8\u30e9\u30fc\u3092\u9632\u6b62</li> <li>\u578b\u30d2\u30f3\u30c8: Python (<code>Optional[T]</code>), C# (<code>string?</code>)</li> <li>IDE \u3068\u30ea\u30f3\u30bf\u30fc\u304c\u8b66\u544a\u3092\u51fa\u3059\u304c\u3001\u30e9\u30f3\u30bf\u30a4\u30e0\u3067\u306f\u5f37\u5236\u3055\u308c\u306a\u3044</li> <li>\u898f\u7d04\u30d9\u30fc\u30b9: Java (<code>null</code>), Clojure (<code>nil</code>)</li> <li>\u547c\u3073\u51fa\u3057\u5074\u306e\u6ce8\u610f\u306b\u4f9d\u5b58</li> </ul>"},{"location":"all/part-1-ch02-sequential/#14","title":"1.4 \u6bd4\u8f03\u5206\u6790","text":""},{"location":"all/part-1-ch02-sequential/#_10","title":"\u30e9\u30f3\u30bf\u30a4\u30e0\u3068\u30cf\u30c3\u30b7\u30e5\u30e9\u30a4\u30d6\u30e9\u30ea","text":"\u8a00\u8a9e \u30cf\u30c3\u30b7\u30e5\u30e9\u30a4\u30d6\u30e9\u30ea \u4f9d\u5b58\u95a2\u4fc2 Python <code>hashlib</code>\uff08\u6a19\u6e96\uff09 \u306a\u3057 Java <code>MessageDigest</code>\uff08\u6a19\u6e96\uff09 \u306a\u3057 C# <code>SHA256</code>\uff08\u6a19\u6e96\uff09 \u306a\u3057 Scala <code>MessageDigest</code>\uff08JVM \u6a19\u6e96\uff09 \u306a\u3057 F# <code>SHA256</code>\uff08.NET \u6a19\u6e96\uff09 \u306a\u3057 Rust <code>sha2</code> \u30af\u30ec\u30fc\u30c8 \u5916\u90e8\u4f9d\u5b58 Haskell <code>cryptohash-sha256</code> \u5916\u90e8\u4f9d\u5b58 Clojure <code>buddy-core</code> \u5916\u90e8\u4f9d\u5b58 <p>Python, Java, C#, Scala, F# \u306f\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u3060\u3051\u3067 SHA-256 \u3092\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\u4e00\u65b9\u3001Rust, Haskell, Clojure \u306f\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u4f9d\u5b58\u3057\u307e\u3059\u304c\u3001\u3088\u308a\u6d17\u7df4\u3055\u308c\u305f API \u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"all/part-1-ch02-sequential/#_11","title":"\u30b3\u30fc\u30c9\u306e\u7c21\u6f54\u3055","text":"<p>SHA-256 \u30cf\u30c3\u30b7\u30e5\u8a08\u7b97\u306e\u30b3\u30fc\u30c9\u884c\u6570\u3092\u6bd4\u8f03\u3059\u308b\u3068\u3001\u8a00\u8a9e\u306e\u8868\u73fe\u529b\u306e\u9055\u3044\u304c\u660e\u78ba\u306b\u306a\u308a\u307e\u3059\uff1a</p> \u8a00\u8a9e \u884c\u6570 \u7279\u5fb4 Python 1 \u884c <code>hashlib</code> \u306e\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc Clojure 2 \u884c \u30b9\u30ec\u30c3\u30c7\u30a3\u30f3\u30b0\u30de\u30af\u30ed C# 3 \u884c <code>SHA256.HashData()</code> + <code>Convert.ToHexString()</code> Rust 4 \u884c \u30d3\u30eb\u30c0\u30fc\u30d1\u30bf\u30fc\u30f3 Scala 3 \u884c <code>map</code> + <code>mkString</code> F# 4 \u884c \u30d1\u30a4\u30d7\u6f14\u7b97\u5b50\u30c1\u30a7\u30fc\u30f3 Java 5 \u884c <code>MessageDigest</code> + \u4f8b\u5916\u51e6\u7406 Haskell 4 \u884c <code>ByteString</code> \u64cd\u4f5c + <code>concatMap</code>"},{"location":"all/part-1-ch02-sequential/#_12","title":"\u63a2\u7d22\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u8a2d\u8a08\u601d\u60f3","text":"\u30a2\u30d7\u30ed\u30fc\u30c1 \u8a00\u8a9e \u30e1\u30ea\u30c3\u30c8 \u30c7\u30e1\u30ea\u30c3\u30c8 \u547d\u4ee4\u578b\u30eb\u30fc\u30d7 Python, Java, C# \u76f4\u611f\u7684\u3001\u30c7\u30d0\u30c3\u30b0\u3057\u3084\u3059\u3044 \u4e26\u5217\u5316\u306e\u969b\u306b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5206\u5272\u304c\u5fc5\u8981 \u672b\u5c3e\u518d\u5e30 Scala, F# \u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u9632\u6b62\u3001FP \u3089\u3057\u3044 \u672b\u5c3e\u518d\u5e30\u6700\u9069\u5316\u304c\u5fc5\u8981 \u518d\u5e30 + \u65e9\u671f\u30ea\u30bf\u30fc\u30f3 Rust, Haskell \u63a2\u7d22\u6728\u306e\u81ea\u7136\u306a\u8868\u73fe \u30b9\u30bf\u30c3\u30af\u6d88\u8cbb\uff08\u6df1\u3044\u63a2\u7d22\u3067\u306f\u554f\u984c\uff09 loop/recur Clojure JVM \u4e0a\u3067\u30b9\u30bf\u30c3\u30af\u30bb\u30fc\u30d5 Lisp \u69cb\u6587\u306b\u6163\u308c\u304c\u5fc5\u8981"},{"location":"all/part-1-ch02-sequential/#15","title":"1.5 \u5b9f\u8df5\u7684\u306a\u9078\u629e\u6307\u91dd","text":""},{"location":"all/part-1-ch02-sequential/#_13","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5225\u306e\u63a8\u5968","text":"<p>\u30d7\u30ed\u30c8\u30bf\u30a4\u30d4\u30f3\u30b0\u30fb\u5b66\u7fd2\u7528\u9014:</p> <ul> <li>Python \u2014 \u6700\u3082\u7c21\u6f54\u3067\u3001\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u3060\u3051\u3067\u5b8c\u7d50</li> <li>Clojure \u2014 REPL \u99c6\u52d5\u958b\u767a\u3067\u7d20\u65e9\u304f\u5b9f\u9a13\u53ef\u80fd</li> </ul> <p>\u578b\u5b89\u5168\u6027\u3092\u91cd\u8996\u3059\u308b\u5834\u5408:</p> <ul> <li>Rust \u2014 \u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u30e1\u30e2\u30ea\u5b89\u5168\u6027\u3068\u578b\u5b89\u5168\u6027\u3092\u4fdd\u8a3c</li> <li>Haskell \u2014 \u7d14\u7c8b\u95a2\u6570\u578b\u3067\u526f\u4f5c\u7528\u3092\u578b\u30ec\u30d9\u30eb\u3067\u7ba1\u7406</li> </ul> <p>\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u74b0\u5883:</p> <ul> <li>Java / C# \u2014 \u8c4a\u5bcc\u306a\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u3068\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea</li> <li>Scala / F# \u2014 \u65e2\u5b58\u306e JVM/.NET \u8cc7\u7523\u3092\u6d3b\u7528\u3057\u3064\u3064\u95a2\u6570\u578b\u306e\u5229\u70b9\u3092\u4eab\u53d7</li> </ul>"},{"location":"all/part-1-ch02-sequential/#_14","title":"\u4e26\u884c\u5316\u3078\u306e\u6e96\u5099\u5ea6","text":"<p>\u6b21\u7ae0\uff08Part II\uff09\u3067\u63a2\u7d22\u3092\u4e26\u5217\u5316\u3059\u308b\u969b\u3001\u5404\u8a00\u8a9e\u306e\u9010\u6b21\u5b9f\u88c5\u304c\u3069\u308c\u3060\u3051\u30b9\u30e0\u30fc\u30ba\u306b\u4e26\u884c\u7248\u306b\u79fb\u884c\u3067\u304d\u308b\u304b\u306f\u91cd\u8981\u306a\u6307\u6a19\u3067\u3059\uff1a</p> \u8a00\u8a9e \u4e26\u884c\u5316\u306e\u5bb9\u6613\u3055 \u7406\u7531 Rust \u9ad8\u3044 \u6240\u6709\u6a29\u30b7\u30b9\u30c6\u30e0\u304c\u4e26\u884c\u5b89\u5168\u6027\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u4fdd\u8a3c Haskell \u9ad8\u3044 \u7d14\u7c8b\u95a2\u6570\u306f\u526f\u4f5c\u7528\u304c\u306a\u304f\u3001\u5b89\u5168\u306b\u4e26\u5217\u5b9f\u884c\u53ef\u80fd Clojure \u9ad8\u3044 \u4e0d\u5909\u30c7\u30fc\u30bf\u69cb\u9020\u306b\u3088\u308a\u5171\u6709\u72b6\u614b\u306e\u554f\u984c\u304c\u767a\u751f\u3057\u306a\u3044 Scala \u9ad8\u3044 <code>Future</code> \u3084 <code>.par</code> \u3067\u5bb9\u6613\u306b\u4e26\u5217\u5316\u53ef\u80fd F# \u9ad8\u3044 <code>Async</code> \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3067\u81ea\u7136\u306b\u4e26\u5217\u5316 Java \u4e2d\u7a0b\u5ea6 <code>ExecutorService</code> \u3067\u4e26\u5217\u5316\u53ef\u80fd\u3060\u304c\u3001\u5171\u6709\u72b6\u614b\u306e\u7ba1\u7406\u306f\u624b\u52d5 C# \u4e2d\u7a0b\u5ea6 <code>Parallel.ForEach</code> \u3084 <code>Task</code> \u3067\u4e26\u5217\u5316\u53ef\u80fd Python \u4f4e\u3044 GIL \u306e\u5236\u7d04\u306b\u3088\u308a <code>threading</code> \u3067\u306f\u771f\u306e\u4e26\u5217\u5316\u304c\u3067\u304d\u305a\u3001<code>multiprocessing</code> \u304c\u5fc5\u8981"},{"location":"all/part-1-ch02-sequential/#16","title":"1.6 \u307e\u3068\u3081","text":""},{"location":"all/part-1-ch02-sequential/#_15","title":"\u8a00\u8a9e\u6a2a\u65ad\u7684\u306a\u5b66\u3073","text":"<ol> <li>\u9010\u6b21\u51e6\u7406\u306e\u9650\u754c\u306f\u666e\u904d\u7684 \u2014 \u3069\u306e\u8a00\u8a9e\u3067\u66f8\u3044\u3066\u3082\u3001\u9010\u6b21\u51e6\u7406\u3067\u306f 1 \u30b3\u30a2\u3057\u304b\u6d3b\u7528\u3067\u304d\u306a\u3044</li> <li>\u5019\u88dc\u751f\u6210\u306e\u8a2d\u8a08\u304c\u4e26\u884c\u5316\u3092\u5de6\u53f3\u3059\u308b \u2014 \u63a2\u7d22\u7a7a\u9593\u306e\u5206\u5272\u3057\u3084\u3059\u3055\u304c\u91cd\u8981</li> <li>\u578b\u5b89\u5168\u306a\u623b\u308a\u5024\u306f\u4fdd\u5b88\u6027\u3092\u9ad8\u3081\u308b \u2014 <code>Option</code>/<code>Maybe</code> \u3092\u4f7f\u3046\u8a00\u8a9e\u306f <code>null</code> \u53c2\u7167\u30a8\u30e9\u30fc\u3092\u9632\u6b62</li> <li>\u8a00\u8a9e\u306e\u601d\u60f3\u304c\u5b9f\u88c5\u306b\u73fe\u308c\u308b \u2014 \u547d\u4ee4\u578b\u30eb\u30fc\u30d7 vs \u518d\u5e30 vs \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u9055\u3044</li> </ol>"},{"location":"all/part-1-ch02-sequential/#_16","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 \u3067\u306f\u3001\u3053\u306e\u9010\u6b21\u51e6\u7406\u3092\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u3067\u4e26\u5217\u5316\u3057\u3001CPU \u306e\u5168\u30b3\u30a2\u3092\u6d3b\u7528\u3059\u308b\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"all/part-1-ch02-sequential/#_17","title":"\u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b","text":"\u8a00\u8a9e \u500b\u5225\u8a18\u4e8b Python Part I - \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e Java Part I - \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e C# Part I - \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e Scala Part I - \u9010\u6b21\u51e6\u7406 F# Part I - \u9010\u6b21\u51e6\u7406 Rust Part I - \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e Haskell Part I - \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e Clojure Part I - \u9010\u6b21\u51e6\u7406"},{"location":"all/part-2-ch04-05-threads/","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":""},{"location":"all/part-2-ch04-05-threads/#21","title":"2.1 \u306f\u3058\u3081\u306b","text":"<p>Part I \u3067\u9010\u6b21\u51e6\u7406\u306e\u9650\u754c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\u672c\u7ae0\u3067\u306f\u3001\u4e26\u884c\u51e6\u7406\u306e\u57fa\u672c\u5358\u4f4d\u3067\u3042\u308b\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u3092\u5b66\u3073\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\u3092\u4e26\u5217\u5316\u3057\u3066 CPU \u306e\u5168\u30b3\u30a2\u3092\u6d3b\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-2-ch04-05-threads/#_1","title":"\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u306e\u9055\u3044","text":"\u7279\u6027 \u30d7\u30ed\u30bb\u30b9 \u30b9\u30ec\u30c3\u30c9 \u30e1\u30e2\u30ea\u7a7a\u9593 \u72ec\u7acb\uff08\u9694\u96e2\uff09 \u5171\u6709 \u751f\u6210\u30b3\u30b9\u30c8 \u9ad8\u3044 \u4f4e\u3044 \u901a\u4fe1\u65b9\u6cd5 IPC\uff08\u30d1\u30a4\u30d7\u3001\u30bd\u30b1\u30c3\u30c8\u7b49\uff09 \u5171\u6709\u30e1\u30e2\u30ea \u969c\u5bb3\u306e\u5f71\u97ff \u4ed6\u30d7\u30ed\u30bb\u30b9\u306b\u5f71\u97ff\u3057\u306a\u3044 \u30d7\u30ed\u30bb\u30b9\u5168\u4f53\u306b\u5f71\u97ff"},{"location":"all/part-2-ch04-05-threads/#22","title":"2.2 \u5171\u901a\u306e\u672c\u8cea","text":""},{"location":"all/part-2-ch04-05-threads/#_2","title":"\u30b9\u30ec\u30c3\u30c9\u4e26\u5217\u5316\u306e\u30d1\u30bf\u30fc\u30f3","text":"<p>\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\u306e\u4e26\u5217\u5316\u306f\u3001\u5168\u8a00\u8a9e\u3067\u5171\u901a\u306e\u6226\u7565\u3092\u53d6\u308a\u307e\u3059\uff1a</p> <pre><code>1. \u63a2\u7d22\u7a7a\u9593\u3092 N \u5206\u5272\u3059\u308b\uff08N = CPU \u30b3\u30a2\u6570\uff09\n2. \u5404\u30c1\u30e3\u30f3\u30af\u306b\u5bfe\u3057\u3066\u30b9\u30ec\u30c3\u30c9/\u30bf\u30b9\u30af\u3092\u751f\u6210\u3059\u308b\n3. \u5404\u30b9\u30ec\u30c3\u30c9\u304c\u62c5\u5f53\u7bc4\u56f2\u3092\u9010\u6b21\u63a2\u7d22\u3059\u308b\n4. \u6700\u521d\u306b\u898b\u3064\u304b\u3063\u305f\u7d50\u679c\u3092\u53ce\u96c6\u3057\u3001\u4ed6\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u505c\u6b62\u3059\u308b\n</code></pre>"},{"location":"all/part-2-ch04-05-threads/#_3","title":"\u30c1\u30e3\u30f3\u30af\u5206\u5272\u306e\u5171\u901a\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0","text":"<pre><code>total = \u63a2\u7d22\u7a7a\u9593\u306e\u30b5\u30a4\u30ba\nchunkSize = ceil(total / numCores)\n\nchunks = []\nfor i in 0..numCores:\n    start = i * chunkSize\n    end = min(start + chunkSize, total)\n    chunks.append(ChunkRange(start, end))\n</code></pre> <p>\u3053\u306e\u5206\u5272\u6226\u7565\u306b\u3088\u308a\u3001\u7406\u8ad6\u4e0a\u306f\u30b3\u30a2\u6570\u306b\u6bd4\u4f8b\u3057\u305f\u9ad8\u901f\u5316\uff084 \u30b3\u30a2\u306a\u3089\u7d04 4 \u500d\uff09\u304c\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"all/part-2-ch04-05-threads/#23","title":"2.3 \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"all/part-2-ch04-05-threads/#_4","title":"\u30b9\u30ec\u30c3\u30c9\u751f\u6210","text":""},{"location":"all/part-2-ch04-05-threads/#_5","title":"\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e","text":"Haskell \u5b9f\u88c5 <pre><code>import Control.Concurrent.Async (async, wait, mapConcurrently)\n\n-- \u5358\u4e00\u30b9\u30ec\u30c3\u30c9\ncreateThread :: IO () -&gt; IO ThreadId\ncreateThread = forkIO\n\n-- \u8907\u6570\u30b9\u30ec\u30c3\u30c9\uff08async \u30e9\u30a4\u30d6\u30e9\u30ea\uff09\nrunThreads :: Int -&gt; (Int -&gt; IO ()) -&gt; IO ()\nrunThreads count action = do\n    handles &lt;- forM [0..count-1] $ \\i -&gt; async (action i)\n    forM_ handles wait\n</code></pre>  **\u7279\u5fb4**:  - `forkIO` \u306f\u8efd\u91cf\u30b9\u30ec\u30c3\u30c9\uff08Green Thread\uff09\u3092\u751f\u6210 - `async` \u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u7d50\u679c\u306e\u578b\u4ed8\u304d\u53d6\u5f97\u3092\u63d0\u4f9b - `mapConcurrently` \u3067\u30ea\u30b9\u30c8\u8981\u7d20\u3054\u3068\u306b\u4e26\u5217\u5b9f\u884c   Clojure \u5b9f\u88c5 <pre><code>;; Java Thread \u306e\u76f4\u63a5\u5229\u7528\n(defn run-in-thread [task]\n  (let [thread (Thread. task)]\n    (.start thread)\n    thread))\n\n;; future \u306b\u3088\u308b\u975e\u540c\u671f\u5b9f\u884c\n(def result (future\n  (Thread/sleep 1000)\n  (+ 1 2)))\n\n@result  ;; =&gt; 3\uff08\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d6\u5f97\uff09\n</code></pre>  **\u7279\u5fb4**:  - Java \u76f8\u4e92\u904b\u7528\u3067 `Thread` \u30af\u30e9\u30b9\u3092\u76f4\u63a5\u5229\u7528 - `future` \u306f\u6697\u9ed9\u306e\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3067\u975e\u540c\u671f\u5b9f\u884c - `@`\uff08deref\uff09\u3067\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d6\u5f97"},{"location":"all/part-2-ch04-05-threads/#_6","title":"\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e","text":"Scala \u5b9f\u88c5 <pre><code>import scala.concurrent.{Future, Await, ExecutionContext}\nimport scala.concurrent.duration.Duration\n\ngiven ExecutionContext = ExecutionContext.global\n\n// Future \u306b\u3088\u308b\u975e\u540c\u671f\u5b9f\u884c\nval futures = (0 until count).map { i =&gt;\n    Future { task(i) }\n}.toList\n\nfutures.foreach(f =&gt; Await.ready(f, Duration.Inf))\n</code></pre>  **\u7279\u5fb4**:  - `Future` \u306f\u30e2\u30ca\u30c9\u7684\u306b\u5408\u6210\u53ef\u80fd - `ExecutionContext` \u304c\u6697\u9ed9\u7684\u306b\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3092\u63d0\u4f9b - Scala 3 \u306e `given` \u69cb\u6587\u3067\u6697\u9ed9\u306e\u5f15\u6570\u3092\u5ba3\u8a00   Rust \u5b9f\u88c5 <pre><code>use std::thread;\nuse std::sync::Arc;\nuse std::sync::atomic::{AtomicUsize, Ordering};\n\npub fn run_threads&lt;F&gt;(count: usize, f: F)\nwhere\n    F: Fn(usize) + Send + Sync + Clone + 'static,\n{\n    let handles: Vec&lt;_&gt; = (0..count)\n        .map(|i| {\n            let f = f.clone();\n            thread::spawn(move || f(i))\n        })\n        .collect();\n\n    for handle in handles {\n        handle.join().unwrap();\n    }\n}\n</code></pre>  **\u7279\u5fb4**:  - `Send + Sync + 'static` \u30c8\u30ec\u30a4\u30c8\u5883\u754c\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u5b89\u5168\u6027\u3092\u4fdd\u8a3c - `move` \u30af\u30ed\u30fc\u30b8\u30e3\u3067\u6240\u6709\u6a29\u3092\u79fb\u52d5 - `JoinHandle` \u3067\u578b\u4ed8\u304d\u7d50\u679c\u3092\u53d6\u5f97   F# \u5b9f\u88c5 <pre><code>// Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\nlet runAsync (count: int) (task: int -&gt; unit) =\n    [ for i in 0 .. count - 1 do\n        async { task i } ]\n    |&gt; Async.Parallel\n    |&gt; Async.RunSynchronously\n    |&gt; ignore\n</code></pre>  **\u7279\u5fb4**:  - `async { ... }` \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3067\u30b3\u30f3\u30dd\u30fc\u30b6\u30d6\u30eb\u306a\u975e\u540c\u671f\u51e6\u7406 - `Async.Parallel` \u3067\u8907\u6570\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u4e26\u5217\u5b9f\u884c - \u30d1\u30a4\u30d7\u6f14\u7b97\u5b50 `|&gt;` \u3067\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u3092\u8868\u73fe"},{"location":"all/part-2-ch04-05-threads/#oop","title":"OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u8a00\u8a9e","text":"Java \u5b9f\u88c5 <pre><code>// ExecutorService \u306b\u3088\u308b\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\nExecutorService executor = Executors.newFixedThreadPool(numCores);\n\nList&lt;Future&lt;String&gt;&gt; futures = new ArrayList&lt;&gt;();\nfor (ChunkRange chunk : chunks) {\n    futures.add(executor.submit(() -&gt; crackChunk(cryptoHash, length, chunk)));\n}\n\nexecutor.shutdown();\n</code></pre>  **\u7279\u5fb4**:  - `ExecutorService` \u304c\u30b9\u30ec\u30c3\u30c9\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u7ba1\u7406 - `Future` \u3067\u975e\u540c\u671f\u7d50\u679c\u3092\u578b\u5b89\u5168\u306b\u53d6\u5f97 - Java 21+ \u306e `Virtual Thread` \u3067\u8efd\u91cf\u30b9\u30ec\u30c3\u30c9\u3082\u5229\u7528\u53ef\u80fd   C# \u5b9f\u88c5 <pre><code>// Task \u30d9\u30fc\u30b9\u306e\u4e26\u5217\u5b9f\u884c\nvar cts = new CancellationTokenSource();\nvar tasks = chunks.Select(chunk =&gt;\n    Task.Run(() =&gt; CrackChunk(cryptoHash, length, chunk), cts.Token)\n).ToArray();\n\nvar completed = await Task.WhenAny(tasks);\nif (completed.Result != null) cts.Cancel();\n</code></pre>  **\u7279\u5fb4**:  - `Task.Run()` \u3067\u975e\u540c\u671f\u30bf\u30b9\u30af\u3092\u751f\u6210 - `CancellationToken` \u3067\u5354\u8abf\u7684\u306a\u30ad\u30e3\u30f3\u30bb\u30eb\u3092\u5b9f\u73fe - `Task.WhenAny()` \u3067\u6700\u521d\u306b\u5b8c\u4e86\u3057\u305f\u30bf\u30b9\u30af\u3092\u53d6\u5f97   Python \u5b9f\u88c5 <pre><code>from multiprocessing import Pool\n\n# GIL \u306e\u305f\u3081 CPU \u30d0\u30a6\u30f3\u30c9\u306b\u306f multiprocessing \u3092\u4f7f\u7528\ndef crack_password_parallel(crypto_hash, length, num_cores=4):\n    chunks = get_chunks(length, num_cores)\n    with Pool(num_cores) as pool:\n        results = pool.starmap(crack_chunk, [\n            (crypto_hash, length, start, end) for start, end in chunks\n        ])\n    return next((r for r in results if r is not None), None)\n</code></pre>  **\u7279\u5fb4**:  - GIL \u306e\u5236\u7d04\u306b\u3088\u308a `threading` \u3067\u306f\u306a\u304f `multiprocessing` \u3092\u4f7f\u7528 - `Pool.starmap()` \u3067\u5f15\u6570\u4ed8\u304d\u95a2\u6570\u3092\u4e26\u5217\u5b9f\u884c - \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u3067\u30d7\u30fc\u30eb\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u7ba1\u7406"},{"location":"all/part-2-ch04-05-threads/#_7","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc","text":""},{"location":"all/part-2-ch04-05-threads/#_8","title":"\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e","text":"Haskell \u5b9f\u88c5 <pre><code>crackPasswordParallel :: String -&gt; String -&gt; Int -&gt; IO (Maybe String)\ncrackPasswordParallel _ _ 0 = return Nothing\ncrackPasswordParallel cryptoHash alphabet len = do\n    results &lt;- mapConcurrently\n        (\\c -&gt; return $ crackRecursive cryptoHash alphabet [c] (len - 1))\n        alphabet\n    return $ listToMaybe (catMaybes results)\n</code></pre>  **\u6226\u7565**: \u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u306e\u5404\u5148\u982d\u6587\u5b57\u3092 `mapConcurrently` \u3067\u4e26\u5217\u5316\u3002\u7d14\u7c8b\u95a2\u6570 `crackRecursive` \u306f\u526f\u4f5c\u7528\u304c\u306a\u3044\u305f\u3081\u3001\u5b89\u5168\u306b\u4e26\u5217\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002   Clojure \u5b9f\u88c5 <pre><code>(defn crack-password-parallel [target-hash length num-threads]\n  (let [total (long (Math/pow (count alphabet) length))\n        chunks (chunk-range 0 total num-threads)\n        futures (doall\n                  (for [[start end] chunks]\n                    (future\n                      (crack-password-range target-hash start end length))))]\n    (some identity (map deref futures))))\n</code></pre>  **\u6226\u7565**: \u63a2\u7d22\u7a7a\u9593\u3092\u30c1\u30e3\u30f3\u30af\u306b\u5206\u5272\u3057\u3001\u5404\u30c1\u30e3\u30f3\u30af\u3092 `future` \u3067\u4e26\u5217\u5b9f\u884c\u3002`some identity` \u3067\u6700\u521d\u306e\u975e nil \u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002"},{"location":"all/part-2-ch04-05-threads/#_9","title":"\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e","text":"Scala \u5b9f\u88c5 <pre><code>def crackPasswordParallel(cryptoHash: String, length: Int): Option[String] =\n  val combinations = getCombinations(length)\n  val numCores = Runtime.getRuntime.availableProcessors\n  val chunks = getChunks(numCores, combinations.length)\n  val result = new AtomicReference[Option[String]](None)\n\n  given ExecutionContext = ExecutionContext.global\n\n  val futures = chunks.map { chunk =&gt;\n    Future {\n      combinations.slice(chunk.start, chunk.end).find { password =&gt;\n        result.get().isEmpty &amp;&amp; checkPassword(password, cryptoHash)\n      } match\n        case Some(found) =&gt; result.compareAndSet(None, Some(found))\n        case None =&gt; ()\n    }\n  }\n\n  futures.foreach(f =&gt; Await.ready(f, Duration.Inf))\n  result.get()\n</code></pre>  **\u6226\u7565**: `AtomicReference` \u3067\u5171\u6709\u7d50\u679c\u3092\u30ed\u30c3\u30af\u30d5\u30ea\u30fc\u306b\u7ba1\u7406\u3002`compareAndSet` \u3067\u6700\u521d\u306e\u7d50\u679c\u306e\u307f\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002   Rust \u5b9f\u88c5\uff08Rayon\uff09 <pre><code>pub fn crack_password_parallel(\n    crypto_hash: &amp;str,\n    alphabet: &amp;[char],\n    length: usize,\n) -&gt; Option&lt;String&gt; {\n    if length == 0 { return None; }\n\n    alphabet.to_vec()\n        .par_iter()\n        .find_map_any(|&amp;first| {\n            crack_recursive(crypto_hash, alphabet, first.to_string(), length - 1)\n        })\n}\n</code></pre>  **\u6226\u7565**: Rayon \u306e `par_iter()` + `find_map_any()` \u3067\u3001\u30ef\u30fc\u30af\u30b9\u30c6\u30a3\u30fc\u30ea\u30f3\u30b0\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u304c\u81ea\u52d5\u7684\u306b\u8ca0\u8377\u5206\u6563\u3002\u6700\u521d\u306b\u898b\u3064\u304b\u3063\u305f\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\u6700\u3082\u30b3\u30fc\u30c9\u91cf\u304c\u5c11\u306a\u3044\u4e26\u5217\u5b9f\u88c5\u3067\u3059\u3002   F# \u5b9f\u88c5 <pre><code>let crackPasswordParallel (cryptoHash: string) (length: int) : string option =\n    let combinations = getCombinations length\n    let numCores = Environment.ProcessorCount\n    let chunks = getChunks numCores (List.length combinations)\n    let result = ref None\n    let arr = combinations |&gt; List.toArray\n\n    chunks\n    |&gt; List.map (fun chunk -&gt;\n        async {\n            for password in arr.[chunk.Start .. chunk.End - 1] do\n                if Option.isNone !result &amp;&amp; checkPassword password cryptoHash then\n                    result := Some password\n        })\n    |&gt; Async.Parallel\n    |&gt; Async.RunSynchronously\n    |&gt; ignore\n\n    !result\n</code></pre>  **\u6226\u7565**: `ref` \u30bb\u30eb\u3067\u5171\u6709\u7d50\u679c\u3092\u7ba1\u7406\u3057\u3001`Async.Parallel` \u3067\u5168\u30c1\u30e3\u30f3\u30af\u3092\u4e26\u5217\u5b9f\u884c\u3002"},{"location":"all/part-2-ch04-05-threads/#24","title":"2.4 \u6bd4\u8f03\u5206\u6790","text":""},{"location":"all/part-2-ch04-05-threads/#_10","title":"\u30b9\u30ec\u30c3\u30c9\u751f\u6210\u30e1\u30ab\u30cb\u30ba\u30e0","text":"\u8a00\u8a9e \u30e1\u30ab\u30cb\u30ba\u30e0 \u623b\u308a\u5024 \u8efd\u91cf\u30b9\u30ec\u30c3\u30c9 Python <code>threading.Thread</code> / <code>multiprocessing.Process</code> \u306a\u3057 \u306a\u3057\uff08GIL \u5236\u7d04\uff09 Java <code>Thread</code> / <code>ExecutorService</code> <code>Future&lt;T&gt;</code> Virtual Thread (21+) C# <code>Task.Run()</code> <code>Task&lt;T&gt;</code> \u306a\u3057\uff08Task \u306f\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u4e0a\uff09 Scala <code>Future { ... }</code> <code>Future[T]</code> \u306a\u3057\uff08ExecutionContext \u4e0a\uff09 F# <code>async { ... }</code> <code>Async&lt;'T&gt;</code> \u306a\u3057\uff08\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u4e0a\uff09 Rust <code>thread::spawn()</code> / Rayon <code>JoinHandle&lt;T&gt;</code> \u306a\u3057\uff08OS \u30b9\u30ec\u30c3\u30c9\uff09 Haskell <code>forkIO</code> / <code>async</code> <code>Async a</code> Green Thread (GHC RTS) Clojure <code>future</code> <code>IDeref</code> \u306a\u3057\uff08JVM \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u4e0a\uff09"},{"location":"all/part-2-ch04-05-threads/#_11","title":"\u5b89\u5168\u6027\u4fdd\u8a3c\u306e\u30a2\u30d7\u30ed\u30fc\u30c1","text":"\u30a2\u30d7\u30ed\u30fc\u30c1 \u8a00\u8a9e \u4fdd\u8a3c\u30ec\u30d9\u30eb \u4ed5\u7d44\u307f \u30b3\u30f3\u30d1\u30a4\u30eb\u6642\uff08\u578b\u30b7\u30b9\u30c6\u30e0\uff09 Rust \u6700\u9ad8 <code>Send</code>/<code>Sync</code> \u30c8\u30ec\u30a4\u30c8\u5883\u754c \u4e0d\u5909\u6027\u306b\u3088\u308b\u56de\u907f Haskell, Clojure \u9ad8\u3044 \u7d14\u7c8b\u95a2\u6570\u3068\u6c38\u7d9a\u30c7\u30fc\u30bf\u69cb\u9020 \u578b\u5b89\u5168\u306a\u4e26\u884c\u30d7\u30ea\u30df\u30c6\u30a3\u30d6 Scala, F# \u9ad8\u3044 <code>AtomicReference</code>, <code>Async</code> \u30ef\u30fc\u30af\u30d5\u30ed\u30fc \u30e9\u30f3\u30bf\u30a4\u30e0\u30c1\u30a7\u30c3\u30af Java, C# \u4e2d\u7a0b\u5ea6 \u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6 + \u4f8b\u5916 GIL \u306b\u3088\u308b\u4fdd\u8b77 Python \u4f4e\u3044\uff08CPU \u30d0\u30a6\u30f3\u30c9\u3067\u306f\u7121\u52b9\uff09 \u30b9\u30ec\u30c3\u30c9\u3067\u306f\u771f\u306e\u4e26\u5217\u5316\u4e0d\u53ef"},{"location":"all/part-2-ch04-05-threads/#_12","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\u306e\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3","text":"\u30d1\u30bf\u30fc\u30f3 \u8a00\u8a9e \u7279\u5fb4 \u30ef\u30fc\u30af\u30b9\u30c6\u30a3\u30fc\u30ea\u30f3\u30b0 Rust (Rayon) \u81ea\u52d5\u8ca0\u8377\u5206\u6563\u3001\u6700\u77ed\u30b3\u30fc\u30c9 \u30a2\u30d7\u30ea\u30ab\u30c6\u30a3\u30d6\u4e26\u5217 Haskell (<code>mapConcurrently</code>) \u8981\u7d20\u3054\u3068\u306e\u4e26\u5217\u5316\u3001\u95a2\u6570\u578b Future + \u5171\u6709\u72b6\u614b Scala, Clojure \u30c1\u30e3\u30f3\u30af\u5206\u5272 + \u7d50\u679c\u53ce\u96c6 Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc F# \u5ba3\u8a00\u7684\u306a\u4e26\u5217\u5408\u6210 \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb + Future Java ExecutorService \u306b\u3088\u308b\u7ba1\u7406 Task + \u30ad\u30e3\u30f3\u30bb\u30eb C# CancellationToken \u3067\u5354\u8abf\u505c\u6b62 \u30d7\u30ed\u30bb\u30b9\u30d7\u30fc\u30eb Python GIL \u56de\u907f\u306e\u305f\u3081\u30d7\u30ed\u30bb\u30b9\u4e26\u5217"},{"location":"all/part-2-ch04-05-threads/#_13","title":"\u65e9\u671f\u7d42\u4e86\uff08\u6700\u521d\u306e\u7d50\u679c\u3067\u505c\u6b62\uff09\u306e\u5b9f\u73fe\u65b9\u6cd5","text":"\u8a00\u8a9e \u65b9\u6cd5 Rust <code>find_map_any()</code> \u304c\u6700\u521d\u306e <code>Some</code> \u3092\u8fd4\u3057\u305f\u6642\u70b9\u3067\u505c\u6b62 C# <code>Task.WhenAny()</code> + <code>CancellationToken</code> \u3067\u6b8b\u30bf\u30b9\u30af\u3092\u30ad\u30e3\u30f3\u30bb\u30eb Java <code>shutdownNow()</code> \u3067\u5168\u30b9\u30ec\u30c3\u30c9\u3092\u4e2d\u65ad Scala <code>AtomicReference</code> + <code>isEmpty</code> \u30c1\u30a7\u30c3\u30af\u3067\u6b8b\u30bf\u30b9\u30af\u3092\u30b9\u30ad\u30c3\u30d7 F# <code>ref</code> \u30bb\u30eb\u306e <code>Option.isNone</code> \u30c1\u30a7\u30c3\u30af\u3067\u6b8b\u30bf\u30b9\u30af\u3092\u30b9\u30ad\u30c3\u30d7 Haskell <code>catMaybes</code> + <code>listToMaybe</code> \u3067\u6700\u521d\u306e <code>Just</code> \u3092\u53d6\u5f97 Clojure <code>some identity</code> \u3067\u6700\u521d\u306e\u975e nil \u3092\u53d6\u5f97 Python <code>Pool.starmap()</code> \u306e\u7d50\u679c\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0"},{"location":"all/part-2-ch04-05-threads/#25","title":"2.5 \u5b9f\u8df5\u7684\u306a\u9078\u629e\u6307\u91dd","text":""},{"location":"all/part-2-ch04-05-threads/#cpu","title":"CPU \u30d0\u30a6\u30f3\u30c9\u51e6\u7406\u306b\u9069\u3057\u305f\u8a00\u8a9e","text":"<p>\u6700\u3082\u9069\u3057\u3066\u3044\u308b:</p> <ul> <li>Rust \u2014 \u30bc\u30ed\u30b3\u30b9\u30c8\u62bd\u8c61\u5316 + \u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u5b89\u5168\u6027\u3002Rayon \u306e <code>par_iter()</code> \u3067\u6700\u5c0f\u9650\u306e\u30b3\u30fc\u30c9\u5909\u66f4\u3067\u4e26\u5217\u5316</li> <li>Haskell \u2014 \u7d14\u7c8b\u95a2\u6570\u306f\u5b89\u5168\u306b\u4e26\u5217\u5b9f\u884c\u53ef\u80fd\u3002<code>mapConcurrently</code> \u3067\u5ba3\u8a00\u7684\u306b\u4e26\u5217\u5316</li> </ul> <p>\u30d0\u30e9\u30f3\u30b9\u304c\u826f\u3044:</p> <ul> <li>Scala / F# \u2014 \u578b\u5b89\u5168\u6027\u3068\u8868\u73fe\u529b\u306e\u4e21\u7acb\u3002\u65e2\u5b58\u306e JVM/.NET \u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u3092\u6d3b\u7528</li> <li>Java / C# \u2014 \u6210\u719f\u3057\u305f\u4e26\u884c\u51e6\u7406 API\u3002\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u74b0\u5883\u3067\u306e\u5b9f\u7e3e</li> </ul> <p>\u6ce8\u610f\u304c\u5fc5\u8981:</p> <ul> <li>Python \u2014 GIL \u306b\u3088\u308a <code>threading</code> \u3067\u306f CPU \u30d0\u30a6\u30f3\u30c9\u306e\u4e26\u5217\u5316\u304c\u3067\u304d\u306a\u3044\u3002<code>multiprocessing</code> \u304c\u5fc5\u8981\u3067\u3001\u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u304c\u767a\u751f</li> <li>Clojure \u2014 JVM \u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u305f\u3081 Java \u3068\u540c\u7b49\u306e\u6027\u80fd\u3060\u304c\u3001\u52d5\u7684\u578b\u4ed8\u3051\u306b\u3088\u308b\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u304c\u3042\u308b</li> </ul>"},{"location":"all/part-2-ch04-05-threads/#26","title":"2.6 \u307e\u3068\u3081","text":""},{"location":"all/part-2-ch04-05-threads/#_14","title":"\u8a00\u8a9e\u6a2a\u65ad\u7684\u306a\u5b66\u3073","text":"<ol> <li>\u30c1\u30e3\u30f3\u30af\u5206\u5272\u306f\u666e\u904d\u7684 \u2014 \u3069\u306e\u8a00\u8a9e\u3067\u3082\u63a2\u7d22\u7a7a\u9593\u3092\u5206\u5272\u3057\u3066\u4e26\u5217\u5316\u3059\u308b\u6226\u7565\u306f\u540c\u3058</li> <li>\u5b89\u5168\u6027\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u8a00\u8a9e\u306e\u500b\u6027 \u2014 \u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u4fdd\u8a3c\uff08Rust\uff09\u3001\u4e0d\u5909\u6027\uff08Haskell/Clojure\uff09\u3001\u30e9\u30f3\u30bf\u30a4\u30e0\u30c1\u30a7\u30c3\u30af\uff08Java/C#\uff09</li> <li>\u62bd\u8c61\u5ea6\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5 \u2014 \u9ad8\u30ec\u30d9\u30eb API\uff08Rayon, <code>mapConcurrently</code>\uff09\u307b\u3069\u7c21\u6f54\u3060\u304c\u5236\u5fa1\u304c\u9650\u5b9a\u3055\u308c\u308b</li> <li>GIL \u306f Python \u56fa\u6709\u306e\u8ab2\u984c \u2014 \u4ed6\u306e\u8a00\u8a9e\u306b\u306f\u306a\u3044\u5236\u7d04\u3067\u3042\u308a\u3001<code>multiprocessing</code> \u3078\u306e\u5207\u308a\u66ff\u3048\u304c\u5fc5\u8981</li> </ol>"},{"location":"all/part-2-ch04-05-threads/#_15","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0 \u3067\u306f\u3001OS \u304c\u3069\u306e\u3088\u3046\u306b\u30b9\u30ec\u30c3\u30c9\u3092\u5207\u308a\u66ff\u3048\u308b\u304b\u3001\u5354\u8abf\u7684\u30fb\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u306a\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"all/part-2-ch04-05-threads/#_16","title":"\u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b","text":"\u8a00\u8a9e \u500b\u5225\u8a18\u4e8b Python Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 Java Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 C# Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 Scala Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 F# Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 Rust Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 Haskell Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9 Clojure Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9"},{"location":"all/part-3-ch06-multitasking/","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"all/part-3-ch06-multitasking/#31","title":"3.1 \u306f\u3058\u3081\u306b","text":"<p>Part II \u3067\u30b9\u30ec\u30c3\u30c9\u306b\u3088\u308b\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3057\u305f\u3002\u672c\u7ae0\u3067\u306f\u3001OS \u304c\u3069\u306e\u3088\u3046\u306b\u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u3066\u300c\u540c\u6642\u306b\u5b9f\u884c\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u305b\u308b\u300d\u304b\u3092\u5b66\u3073\u307e\u3059\u3002\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u984c\u6750\u306b\u3001\u5354\u8abf\u7684\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092 8 \u3064\u306e\u8a00\u8a9e\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-3-ch06-multitasking/#_1","title":"\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u306f","text":"<p>1 \u3064\u306e CPU \u30b3\u30a2\u3067\u3082\u3001\u30bf\u30b9\u30af\u3092\u9ad8\u901f\u306b\u5207\u308a\u66ff\u3048\u308b\u3053\u3068\u3067\u8907\u6570\u306e\u30bf\u30b9\u30af\u304c\u540c\u6642\u306b\u52d5\u3044\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u305b\u308b\u6280\u8853\u3067\u3059\u3002</p> <pre><code>CPU \u6642\u9593: [Task1] \u2192 [Task2] \u2192 [Task3] \u2192 [Task1] \u2192 [Task2] \u2192 [Task3] \u2192 ...\n</code></pre>"},{"location":"all/part-3-ch06-multitasking/#2","title":"2 \u3064\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u65b9\u5f0f","text":"\u65b9\u5f0f \u8aac\u660e \u5229\u70b9 \u6b20\u70b9 \u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6 OS \u304c\u30bf\u30b9\u30af\u3092\u5f37\u5236\u7684\u306b\u4e2d\u65ad \u516c\u5e73\u6027\u304c\u4fdd\u8a3c\u3055\u308c\u308b \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9 \u5354\u8abf\u7684 \u30bf\u30b9\u30af\u304c\u81ea\u767a\u7684\u306b\u5236\u5fa1\u3092\u8b72\u308b \u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u304c\u5c0f\u3055\u3044 \u884c\u5100\u306e\u60aa\u3044\u30bf\u30b9\u30af\u304c\u30b7\u30b9\u30c6\u30e0\u3092\u5360\u6709"},{"location":"all/part-3-ch06-multitasking/#32","title":"3.2 \u5171\u901a\u306e\u672c\u8cea","text":""},{"location":"all/part-3-ch06-multitasking/#_2","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u30d1\u30bf\u30fc\u30f3","text":"<p>\u3059\u3079\u3066\u306e\u8a00\u8a9e\u3067\u5b9f\u88c5\u3055\u308c\u308b\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u306f\u30013 \u3064\u306e\u30bf\u30b9\u30af\u3092\u9806\u6b21\u5b9f\u884c\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\uff1a</p> <pre><code>while running:\n    1. Input   \u2014 \u30e6\u30fc\u30b6\u30fc\u5165\u529b\u306e\u8aad\u307f\u53d6\u308a\n    2. Compute \u2014 \u30b2\u30fc\u30e0\u72b6\u614b\u306e\u66f4\u65b0\n    3. Render  \u2014 \u753b\u9762\u306e\u63cf\u753b\n</code></pre>"},{"location":"all/part-3-ch06-multitasking/#_3","title":"\u30a4\u30d9\u30f3\u30c8\u540c\u671f\u30d1\u30bf\u30fc\u30f3","text":"<p>\u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u5354\u8abf\u7684\u306b\u5b9f\u884c\u3059\u308b\u305f\u3081\u3001\u30d0\u30a4\u30ca\u30ea\u30a4\u30d9\u30f3\u30c8\uff08\u30d5\u30e9\u30b0\uff09\u3092\u4f7f\u3063\u305f\u540c\u671f\u30d1\u30bf\u30fc\u30f3\u304c\u5168\u8a00\u8a9e\u3067\u5171\u901a\u3057\u3066\u3044\u307e\u3059\uff1a</p> <pre><code>Wait \u2192 \u30d5\u30e9\u30b0\u304c True \u306b\u306a\u308b\u307e\u3067\u30d6\u30ed\u30c3\u30af\n       \u2192 \u30d5\u30e9\u30b0\u3092 False \u306b\u30ea\u30bb\u30c3\u30c8\uff08\u6d88\u8cbb\uff09\n       \u2192 \u30bf\u30b9\u30af\u3092\u5b9f\u884c\n       \u2192 \u30d5\u30e9\u30b0\u3092 True \u306b\u30bb\u30c3\u30c8\uff08\u6b21\u306e\u30bf\u30b9\u30af\u306b\u901a\u77e5\uff09\n</code></pre> <p>\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308a\u3001\u30d3\u30b8\u30fc\u30a6\u30a7\u30a4\u30c8\uff08CPU \u3092\u7121\u99c4\u306b\u6d88\u8cbb\u3059\u308b\u30eb\u30fc\u30d7\uff09\u3092\u907f\u3051\u3064\u3064\u3001\u30bf\u30b9\u30af\u9593\u306e\u9806\u5e8f\u5236\u5fa1\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-3-ch06-multitasking/#33","title":"3.3 \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"all/part-3-ch06-multitasking/#_4","title":"\u540c\u671f\u30e1\u30ab\u30cb\u30ba\u30e0","text":"<p>8 \u8a00\u8a9e\u306e\u540c\u671f\u30e1\u30ab\u30cb\u30ba\u30e0\u306f\u3001\u5927\u304d\u304f 4 \u3064\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u5206\u985e\u3067\u304d\u307e\u3059\uff1a</p> \u30a2\u30d7\u30ed\u30fc\u30c1 \u8a00\u8a9e \u30e1\u30ab\u30cb\u30ba\u30e0 \u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 Python <code>threading.Event</code> \u6761\u4ef6\u5909\u6570 + \u30ed\u30c3\u30af Java, C#, Scala, F# <code>Condition</code> / <code>Monitor</code> \u6761\u4ef6\u5909\u6570 + Mutex Rust <code>Condvar</code> + <code>Mutex&lt;bool&gt;</code> STM\uff08\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb\u30e1\u30e2\u30ea\uff09 Haskell <code>TVar</code> + <code>atomically</code> Atom + \u30ed\u30c3\u30af Clojure <code>atom</code> + <code>locking</code>"},{"location":"all/part-3-ch06-multitasking/#_5","title":"\u30a4\u30d9\u30f3\u30c8\u540c\u671f\u306e\u5b9f\u88c5","text":""},{"location":"all/part-3-ch06-multitasking/#_6","title":"\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e","text":"Haskell \u5b9f\u88c5\uff08STM\uff09 <pre><code>import Control.Concurrent.STM\n\nnewtype ProcessorFreeEvent = ProcessorFreeEvent (TVar Bool)\n\nnewProcessorFreeEvent :: IO ProcessorFreeEvent\nnewProcessorFreeEvent = ProcessorFreeEvent &lt;$&gt; newTVarIO False\n\nwaitEvent :: ProcessorFreeEvent -&gt; IO ()\nwaitEvent (ProcessorFreeEvent var) = atomically $ do\n    ready &lt;- readTVar var\n    if ready\n        then writeTVar var False\n        else retry\n\nsignalEvent :: ProcessorFreeEvent -&gt; IO ()\nsignalEvent (ProcessorFreeEvent var) = atomically $ writeTVar var True\n</code></pre>  **\u7279\u5fb4**:  - **\u660e\u793a\u7684\u306a\u30ed\u30c3\u30af\u304c\u4e0d\u8981** \u2014 `atomically` \u30d6\u30ed\u30c3\u30af\u304c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u4fdd\u8a3c - **`retry`** \u2014 \u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u308b\u307e\u3067\u81ea\u52d5\u7684\u306b\u30d6\u30ed\u30c3\u30af\u30fb\u30ea\u30c8\u30e9\u30a4 - \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u304c\u539f\u7406\u7684\u306b\u767a\u751f\u3057\u306a\u3044   Clojure \u5b9f\u88c5\uff08atom + locking\uff09 <pre><code>(defn create-event []\n  {:ready (atom false)\n   :lock (Object.)})\n\n(defn signal-event! [event]\n  (locking (:lock event)\n    (reset! (:ready event) true)\n    (.notifyAll (:lock event))))\n\n(defn wait-event! [event]\n  (locking (:lock event)\n    (while (not @(:ready event))\n      (.wait (:lock event)))\n    (reset! (:ready event) false)))\n</code></pre>  **\u7279\u5fb4**:  - `atom` \u3067\u5358\u4e00\u5024\u306e\u72b6\u614b\u7ba1\u7406\u3001`locking` \u3067 Java \u306e `synchronized` \u306b\u76f8\u5f53 - `reset!` \u3067\u30a2\u30c8\u30df\u30c3\u30af\u306a\u5024\u306e\u66f4\u65b0 - Java \u76f8\u4e92\u904b\u7528\u3067 `wait`/`notifyAll` \u3092\u76f4\u63a5\u5229\u7528"},{"location":"all/part-3-ch06-multitasking/#_7","title":"\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e","text":"Rust \u5b9f\u88c5\uff08Condvar + Mutex\uff09 <pre><code>use std::sync::{Condvar, Mutex};\n\npub struct ProcessorFreeEvent {\n    state: Mutex&lt;bool&gt;,\n    condvar: Condvar,\n}\n\nimpl ProcessorFreeEvent {\n    pub fn new() -&gt; Self {\n        ProcessorFreeEvent {\n            state: Mutex::new(false),\n            condvar: Condvar::new(),\n        }\n    }\n\n    pub fn wait(&amp;self) {\n        let mut ready = self.state.lock().unwrap();\n        while !*ready {\n            ready = self.condvar.wait(ready).unwrap();\n        }\n        *ready = false;\n    }\n\n    pub fn signal(&amp;self) {\n        let mut ready = self.state.lock().unwrap();\n        *ready = true;\n        self.condvar.notify_one();\n    }\n}\n</code></pre>  **\u7279\u5fb4**:  - `Mutex` \u3068 `Condvar` \u3092\u5206\u96e2\u3057\u305f\u578b\u5b89\u5168\u306a\u8a2d\u8a08 - `condvar.wait(ready)` \u306f\u30ed\u30c3\u30af\u30ac\u30fc\u30c9\u3092\u53d7\u3051\u53d6\u308a\u3001\u81ea\u52d5\u7684\u306b\u30a2\u30f3\u30ed\u30c3\u30af\u2192\u518d\u30ed\u30c3\u30af - \u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u30ed\u30c3\u30af\u306e\u6b63\u3057\u3044\u4f7f\u7528\u3092\u4fdd\u8a3c   Scala \u5b9f\u88c5\uff08synchronized + @volatile\uff09 <pre><code>class ProcessorFreeEvent:\n  private val lock = new Object\n  @volatile private var signaled = false\n\n  def waitForSignal(): Unit = lock.synchronized {\n    while !signaled do lock.wait()\n  }\n\n  def signal(): Unit = lock.synchronized {\n    signaled = true\n    lock.notifyAll()\n  }\n\n  def reset(): Unit = lock.synchronized {\n    signaled = false\n  }\n</code></pre>  **\u7279\u5fb4**:  - `@volatile` \u3067\u30b9\u30ec\u30c3\u30c9\u9593\u306e\u30e1\u30e2\u30ea\u53ef\u8996\u6027\u3092\u4fdd\u8a3c - JVM \u306e `synchronized` + `wait`/`notifyAll` \u3092\u6d3b\u7528 - Scala 3 \u69cb\u6587\u3067\u7c21\u6f54\u306b\u8a18\u8ff0   F# \u5b9f\u88c5\uff08Monitor + lock \u5f0f\uff09 <pre><code>type ProcessorFreeEvent = {\n    Lock: obj\n    mutable Signaled: bool\n}\n\nmodule GameLoop =\n    let createProcessorFreeEvent () : ProcessorFreeEvent =\n        { Lock = obj(); Signaled = false }\n\n    let waitForSignal (event: ProcessorFreeEvent) : unit =\n        lock event.Lock (fun () -&gt;\n            while not event.Signaled do\n                Monitor.Wait(event.Lock) |&gt; ignore\n        )\n\n    let signal (event: ProcessorFreeEvent) : unit =\n        lock event.Lock (fun () -&gt;\n            event.Signaled &lt;- true\n            Monitor.PulseAll(event.Lock)\n        )\n</code></pre>  **\u7279\u5fb4**:  - `lock` \u306f\u5f0f\uff08\u6587\u3067\u306f\u306a\u3044\uff09\u3068\u3057\u3066\u5024\u3092\u8fd4\u3059 - `Monitor.PulseAll` \u3067\u5168\u5f85\u6a5f\u30b9\u30ec\u30c3\u30c9\u3092\u8d77\u5e8a - \u30e2\u30b8\u30e5\u30fc\u30eb\u5185\u95a2\u6570\u3068\u3057\u3066\u5b9a\u7fa9\uff08OOP \u3067\u306f\u306a\u304f FP \u30b9\u30bf\u30a4\u30eb\uff09"},{"location":"all/part-3-ch06-multitasking/#oop","title":"OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u8a00\u8a9e","text":"Java \u5b9f\u88c5\uff08ReentrantLock + Condition\uff09 <pre><code>public static class ProcessorFreeEvent {\n    private final Lock lock = new ReentrantLock();\n    private final Condition condition = lock.newCondition();\n    private boolean signaled = false;\n\n    public void waitForSignal() {\n        lock.lock();\n        try {\n            while (!signaled) {\n                condition.await();\n            }\n            signaled = false;\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public void signal() {\n        lock.lock();\n        try {\n            signaled = true;\n            condition.signal();\n        } finally {\n            lock.unlock();\n        }\n    }\n}\n</code></pre>  **\u7279\u5fb4**:  - `ReentrantLock` + `Condition` \u3067\u67d4\u8edf\u306a\u30ed\u30c3\u30af\u5236\u5fa1 - `InterruptedException` \u306e\u9069\u5207\u306a\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0 - `try-finally` \u3067\u78ba\u5b9f\u306b\u30ed\u30c3\u30af\u3092\u89e3\u653e   C# \u5b9f\u88c5\uff08Monitor\uff09 <pre><code>public class ProcessorFreeEvent {\n    private readonly object _lock = new();\n    private bool _signaled;\n\n    public void WaitForSignal() {\n        lock (_lock) {\n            while (!_signaled) {\n                Monitor.Wait(_lock);\n            }\n            _signaled = false;\n        }\n    }\n\n    public void Signal() {\n        lock (_lock) {\n            _signaled = true;\n            Monitor.Pulse(_lock);\n        }\n    }\n}\n</code></pre>  **\u7279\u5fb4**:  - `lock` \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u304c `Monitor.Enter`/`Monitor.Exit` \u3092\u81ea\u52d5\u7ba1\u7406 - `Monitor.Pulse` \u3067\u5358\u4e00\u30b9\u30ec\u30c3\u30c9\u3092\u8d77\u5e8a - Java \u3088\u308a\u7c21\u6f54\u306a\u69cb\u6587   Python \u5b9f\u88c5\uff08threading.Event\uff09 <pre><code>from threading import Event\n\nprocessor_free = Event()\nprocessor_free.set()\n\nclass Task(Thread):\n    def __init__(self, func):\n        super().__init__()\n        self.func = func\n\n    def run(self):\n        while True:\n            processor_free.wait()\n            processor_free.clear()\n            self.func()\n            processor_free.set()\n</code></pre>  **\u7279\u5fb4**:  - `Event` \u30af\u30e9\u30b9\u304c wait/set/clear \u3092\u4e00\u4f53\u7684\u306b\u63d0\u4f9b - \u6700\u3082\u9ad8\u30ec\u30d9\u30eb\u306a\u62bd\u8c61\u5316\uff08\u30ed\u30c3\u30af\u306e\u8a73\u7d30\u3092\u96a0\u853d\uff09 - \u30c7\u30fc\u30e2\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u30d7\u30ed\u30bb\u30b9\u7d42\u4e86\u6642\u306b\u81ea\u52d5\u505c\u6b62"},{"location":"all/part-3-ch06-multitasking/#_8","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u306e\u5b9f\u88c5","text":""},{"location":"all/part-3-ch06-multitasking/#_9","title":"\u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u6bd4\u8f03","text":"\u8a00\u8a9e \u5b9a\u7fa9\u65b9\u6cd5 \u578b Python \u95a2\u6570 <code>Callable</code> Java <code>record Task(String, Runnable)</code> Record C# <code>record GameTask(string, Action)</code> Record Scala <code>case class GameTask(String, () =&gt; Unit)</code> Case Class F# <code>type GameTask = { Name: string; Action: unit -&gt; unit }</code> Record Rust <code>struct GameTask { name: String, action: Box&lt;dyn Fn()&gt; }</code> Struct + Trait Object Haskell <code>data GameTask = GameTask { taskName :: String, taskAction :: IO () }</code> Data Type Clojure \u30af\u30ed\u30fc\u30b8\u30e3\uff08\u6697\u9ed9\u7684\uff09 Map / Function"},{"location":"all/part-3-ch06-multitasking/#_10","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u672c\u4f53","text":"Rust \u5b9f\u88c5 <pre><code>pub fn game_loop(tasks: Vec&lt;GameTask&gt;, iterations: usize) {\n    for _ in 0..iterations {\n        for task in &amp;tasks {\n            task.execute();\n        }\n    }\n}\n\npub fn cooperative_game_loop(\n    tasks: Vec&lt;Arc&lt;GameTask&gt;&gt;,\n    event: Arc&lt;ProcessorFreeEvent&gt;,\n    iterations: usize,\n) {\n    for _ in 0..iterations {\n        for task in &amp;tasks {\n            task.execute();\n            event.signal();\n            thread::yield_now();\n        }\n    }\n}\n</code></pre> Haskell \u5b9f\u88c5 <pre><code>gameLoop :: [GameTask] -&gt; Int -&gt; IO ()\ngameLoop tasks iterations =\n    replicateM_ iterations $ forM_ tasks taskAction\n\ncooperativeGameLoop :: [GameTask] -&gt; ProcessorFreeEvent -&gt; Int -&gt; IO ()\ncooperativeGameLoop tasks event iterations =\n    replicateM_ iterations $ forM_ tasks $ \\task -&gt; do\n        taskAction task\n        signalEvent event\n</code></pre> Java \u5b9f\u88c5 <pre><code>public class GameLoop {\n    private final Runnable inputTask;\n    private final Runnable computeTask;\n    private final Runnable renderTask;\n    private final BooleanSupplier continueCondition;\n\n    public void run() {\n        while (continueCondition.getAsBoolean()) {\n            inputTask.run();\n            computeTask.run();\n            renderTask.run();\n        }\n    }\n}\n</code></pre>"},{"location":"all/part-3-ch06-multitasking/#34","title":"3.4 \u6bd4\u8f03\u5206\u6790","text":""},{"location":"all/part-3-ch06-multitasking/#_11","title":"\u540c\u671f\u30e1\u30ab\u30cb\u30ba\u30e0\u306e\u62bd\u8c61\u5ea6","text":"<pre><code>\u9ad8\u30ec\u30d9\u30eb  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502 Haskell STM (retry/atomically)  \u2502 \u2190 \u30ed\u30c3\u30af\u6982\u5ff5\u306a\u3057\n          \u2502 Python Event (set/wait/clear)   \u2502 \u2190 \u30ed\u30c3\u30af\u3092\u96a0\u853d\n          \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u4e2d\u30ec\u30d9\u30eb  \u2502 C# lock + Monitor              \u2502 \u2190 \u30ed\u30c3\u30af\u3092\u69cb\u6587\u3067\u7c21\u7565\u5316\n          \u2502 Scala synchronized             \u2502\n          \u2502 F# lock \u5f0f + Monitor           \u2502\n          \u2502 Clojure atom + locking         \u2502\n          \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u4f4e\u30ec\u30d9\u30eb  \u2502 Java ReentrantLock + Condition  \u2502 \u2190 \u660e\u793a\u7684\u306a\u30ed\u30c3\u30af\u7ba1\u7406\n          \u2502 Rust Condvar + Mutex            \u2502 \u2190 \u578b\u30b7\u30b9\u30c6\u30e0\u3067\u5b89\u5168\u6027\u4fdd\u8a3c\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"all/part-3-ch06-multitasking/#_12","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30ea\u30b9\u30af\u306e\u6bd4\u8f03","text":"\u8a00\u8a9e \u30ea\u30b9\u30af \u7406\u7531 Haskell \u306a\u3057 STM \u306f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb\u3002\u7af6\u5408\u6642\u306f\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4 Clojure \u4f4e\u3044 <code>atom</code> \u306f\u5358\u4e00\u5024\u306e\u66f4\u65b0\u3067\u30ed\u30c3\u30af\u7af6\u5408\u304c\u5c11\u306a\u3044 Rust \u4f4e\u3044 \u578b\u30b7\u30b9\u30c6\u30e0\u304c\u30ed\u30c3\u30af\u306e\u8aa4\u7528\u3092\u9632\u6b62 Python \u4f4e\u3044 <code>Event</code> \u306f\u5185\u90e8\u3067\u30ed\u30c3\u30af\u3092\u7ba1\u7406 Scala / F# \u4e2d\u7a0b\u5ea6 <code>synchronized</code> \u306e\u5165\u308c\u5b50\u3067\u767a\u751f\u53ef\u80fd Java / C# \u4e2d\u7a0b\u5ea6 \u660e\u793a\u7684\u30ed\u30c3\u30af\u306e\u9806\u5e8f\u7ba1\u7406\u304c\u5fc5\u8981"},{"location":"all/part-3-ch06-multitasking/#_13","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306e\u30b3\u30b9\u30c8","text":"<p>\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306e\u767a\u751f\u6642\u306b\u306f\u4ee5\u4e0b\u306e\u30b3\u30b9\u30c8\u304c\u767a\u751f\u3057\u307e\u3059\uff08\u5168\u8a00\u8a9e\u5171\u901a\uff09\uff1a</p> \u30b3\u30b9\u30c8 \u8aac\u660e \u30ec\u30b8\u30b9\u30bf\u9000\u907f\u30fb\u5fa9\u5143 \u30de\u30a4\u30af\u30ed\u79d2\u5358\u4f4d \u30ad\u30e3\u30c3\u30b7\u30e5\u7121\u52b9\u5316 \u53ef\u5909\u30b3\u30b9\u30c8\uff08L1/L2/L3\uff09 TLB \u30d5\u30e9\u30c3\u30b7\u30e5 \u30a2\u30c9\u30ec\u30b9\u5909\u63db\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30ea\u30bb\u30c3\u30c8 \u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9 \u6b21\u306b\u5b9f\u884c\u3059\u308b\u30bf\u30b9\u30af\u306e\u9078\u629e <p>\u305f\u3060\u3057\u3001Haskell \u306e Green Thread \u306f GHC \u30e9\u30f3\u30bf\u30a4\u30e0\u304c\u7ba1\u7406\u3059\u308b\u305f\u3081\u3001OS \u30ec\u30d9\u30eb\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u3088\u308a\u3082\u8efd\u91cf\u3067\u3059\u3002</p>"},{"location":"all/part-3-ch06-multitasking/#35","title":"3.5 \u5b9f\u8df5\u7684\u306a\u9078\u629e\u6307\u91dd","text":""},{"location":"all/part-3-ch06-multitasking/#_14","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u30fb\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u51e6\u7406\u306b\u9069\u3057\u305f\u8a00\u8a9e","text":"<p>\u6700\u3082\u9069\u3057\u3066\u3044\u308b:</p> <ul> <li>Rust \u2014 \u4e88\u6e2c\u53ef\u80fd\u306a\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3001GC \u306a\u3057\u3001<code>Condvar</code> \u306b\u3088\u308b\u4f4e\u30ec\u30d9\u30eb\u5236\u5fa1</li> <li>C# \u2014 \u30b2\u30fc\u30e0\u958b\u767a\u3067\u306e\u5b9f\u7e3e\uff08Unity\uff09\u3001<code>Monitor</code> \u306e\u7c21\u6f54\u306a\u69cb\u6587</li> </ul> <p>\u7406\u8ad6\u7684\u306b\u512a\u308c\u3066\u3044\u308b:</p> <ul> <li>Haskell \u2014 STM \u306b\u3088\u308b\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc\u306a\u8a2d\u8a08\u3002\u305f\u3060\u3057\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6027\u306f GC \u306b\u4f9d\u5b58</li> </ul> <p>\u30d7\u30ed\u30c8\u30bf\u30a4\u30d4\u30f3\u30b0:</p> <ul> <li>Python \u2014 <code>threading.Event</code> \u306e\u9ad8\u30ec\u30d9\u30eb API \u3067\u7d20\u65e9\u304f\u5b9f\u88c5\u53ef\u80fd</li> </ul>"},{"location":"all/part-3-ch06-multitasking/#vs","title":"\u5354\u8abf\u7684 vs \u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u306e\u4f7f\u3044\u5206\u3051","text":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9 \u63a8\u5968\u65b9\u5f0f \u8a00\u8a9e\u306e\u5bfe\u5fdc \u30b2\u30fc\u30e0\u30eb\u30fc\u30d7 \u5354\u8abf\u7684 \u5168\u8a00\u8a9e\u3067\u5b9f\u88c5\u53ef\u80fd \u30b5\u30fc\u30d0\u30fc\u51e6\u7406 \u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6 OS \u30b9\u30ec\u30c3\u30c9\uff08\u5168\u8a00\u8a9e\uff09 GUI \u30a2\u30d7\u30ea \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5 Python (tkinter), C# (WPF), Java (Swing) I/O \u591a\u91cd\u5316 \u975e\u540c\u671f Part VI-VII \u3067\u8a73\u8ff0"},{"location":"all/part-3-ch06-multitasking/#36","title":"3.6 \u307e\u3068\u3081","text":""},{"location":"all/part-3-ch06-multitasking/#_15","title":"\u8a00\u8a9e\u6a2a\u65ad\u7684\u306a\u5b66\u3073","text":"<ol> <li>\u30a4\u30d9\u30f3\u30c8\u540c\u671f\u30d1\u30bf\u30fc\u30f3\u306f\u666e\u904d\u7684 \u2014 wait/signal \u306e\u4e8c\u9805\u5bfe\u7acb\u306f\u3059\u3079\u3066\u306e\u8a00\u8a9e\u3067\u5171\u901a</li> <li>\u62bd\u8c61\u5ea6\u306e\u30b9\u30da\u30af\u30c8\u30e9\u30e0 \u2014 Haskell STM\uff08\u30ed\u30c3\u30af\u306a\u3057\uff09\u304b\u3089 Rust Condvar\uff08\u660e\u793a\u7684\u30ed\u30c3\u30af\uff09\u307e\u3067</li> <li>\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f\u306e\u6226\u7565\u306f\u8a00\u8a9e\u306e\u601d\u60f3\u306b\u4f9d\u5b58 \u2014 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\uff08Haskell\uff09\u3001\u4e0d\u5909\u6027\uff08Clojure\uff09\u3001\u578b\u30b7\u30b9\u30c6\u30e0\uff08Rust\uff09</li> <li>\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u306f\u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e\u30d1\u30bf\u30fc\u30f3 \u2014 Input\u2192Compute\u2192Render \u306e\u9806\u6b21\u5b9f\u884c\u306f\u5168\u8a00\u8a9e\u3067\u540c\u4e00\u69cb\u9020</li> </ol>"},{"location":"all/part-3-ch06-multitasking/#_16","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 \u3067\u306f\u3001Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u3001\u3088\u308a\u8907\u96d1\u306a\u4e26\u5217\u51e6\u7406\u306e\u8a2d\u8a08\u3092\u63a2\u308a\u307e\u3059\u3002</p>"},{"location":"all/part-3-ch06-multitasking/#_17","title":"\u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b","text":"\u8a00\u8a9e \u500b\u5225\u8a18\u4e8b Python Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 Java Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 C# Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 Scala Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 F# Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 Rust Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 Haskell Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 Clojure Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0"},{"location":"all/part-4-ch07-parallel-patterns/","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"all/part-4-ch07-parallel-patterns/#41","title":"4.1 \u306f\u3058\u3081\u306b","text":"<p>Part III \u3067\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092\u5b66\u3073\u307e\u3057\u305f\u3002\u672c\u7ae0\u3067\u306f\u3001\u8907\u96d1\u306a\u554f\u984c\u3092\u4e26\u5217\u306b\u51e6\u7406\u3059\u308b\u305f\u3081\u306e 2 \u3064\u306e\u57fa\u672c\u30d1\u30bf\u30fc\u30f3 \u2014 Fork/Join \u3068 Pipeline \u2014 \u3092\u5b66\u3073\u307e\u3059\u3002\u6295\u7968\u96c6\u8a08\u3068\u6d17\u6fef\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u984c\u6750\u306b\u30018 \u3064\u306e\u8a00\u8a9e\u3067\u306e\u5b9f\u88c5\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-4-ch07-parallel-patterns/#vs","title":"\u30c7\u30fc\u30bf\u4e26\u5217 vs \u30bf\u30b9\u30af\u4e26\u5217","text":"\u30d1\u30bf\u30fc\u30f3 \u8aac\u660e \u4f8b \u30c7\u30fc\u30bf\u4e26\u5217 \u540c\u3058\u64cd\u4f5c\u3092\u8907\u6570\u306e\u30c7\u30fc\u30bf\u306b\u9069\u7528 \u914d\u5217\u306e\u5404\u8981\u7d20\u3092 2 \u500d\u306b\u3059\u308b \u30bf\u30b9\u30af\u4e26\u5217 \u7570\u306a\u308b\u64cd\u4f5c\u3092\u540c\u6642\u306b\u5b9f\u884c Input \u2192 Compute \u2192 Output"},{"location":"all/part-4-ch07-parallel-patterns/#42","title":"4.2 \u5171\u901a\u306e\u672c\u8cea","text":""},{"location":"all/part-4-ch07-parallel-patterns/#forkjoin","title":"Fork/Join \u30d1\u30bf\u30fc\u30f3","text":"<pre><code>\u5165\u529b\u30c7\u30fc\u30bf\n    \u2193\n  [Fork] \u2500\u2500 \u5206\u5272 \u2500\u2500\u2192 [Worker 1] [Worker 2] [Worker 3]\n                         \u2193          \u2193          \u2193\n                      \u90e8\u5206\u7d50\u679c1   \u90e8\u5206\u7d50\u679c2   \u90e8\u5206\u7d50\u679c3\n                         \u2193          \u2193          \u2193\n  [Join] \u2500\u2500 \u7d71\u5408 \u2500\u2500\u2192 \u6700\u7d42\u7d50\u679c\n</code></pre> <p>3 \u3064\u306e\u30d5\u30a7\u30fc\u30ba:</p> <ol> <li>Fork: \u30c7\u30fc\u30bf\u3092\u30c1\u30e3\u30f3\u30af\u306b\u5206\u5272\u3057\u3001\u5404\u30ef\u30fc\u30ab\u30fc\u306b\u914d\u5e03</li> <li>Process: \u5404\u30ef\u30fc\u30ab\u30fc\u304c\u72ec\u7acb\u3057\u3066\u90e8\u5206\u7d50\u679c\u3092\u8a08\u7b97</li> <li>Join: \u90e8\u5206\u7d50\u679c\u3092\u7d71\u5408\u3057\u3066\u6700\u7d42\u7d50\u679c\u3092\u751f\u6210</li> </ol>"},{"location":"all/part-4-ch07-parallel-patterns/#pipeline","title":"Pipeline \u30d1\u30bf\u30fc\u30f3","text":"<pre><code>[Stage 1: \u6d17\u6fef] \u2192\u2192 [Stage 2: \u4e7e\u71e5] \u2192\u2192 [Stage 3: \u7573\u307f]\n     \u2193 Queue          \u2193 Queue          \u2193\n   Load 1           Load 1           Load 1\n   Load 2           Load 2           Load 2\n   Load 3           Load 3           Load 3\n</code></pre> <p>\u5404\u30b9\u30c6\u30fc\u30b8\u304c\u72ec\u7acb\u3057\u305f\u30b9\u30ec\u30c3\u30c9\u3067\u52d5\u4f5c\u3057\u3001\u30ad\u30e5\u30fc\u3092\u4ecb\u3057\u3066\u6b21\u306e\u30b9\u30c6\u30fc\u30b8\u306b\u30c7\u30fc\u30bf\u3092\u6e21\u3057\u307e\u3059\u3002\u9010\u6b21\u51e6\u7406\u3067\u306f 28 \u79d2\u304b\u304b\u308b 4 \u56de\u306e\u6d17\u6fef\u304c\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3067\u306f\u7d04 19 \u79d2\u306b\u77ed\u7e2e\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"all/part-4-ch07-parallel-patterns/#43","title":"4.3 \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"all/part-4-ch07-parallel-patterns/#forkjoin_1","title":"Fork/Join: \u6295\u7968\u96c6\u8a08","text":""},{"location":"all/part-4-ch07-parallel-patterns/#_1","title":"\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e","text":"Haskell \u5b9f\u88c5 <pre><code>countVotesParallel :: [String] -&gt; IO (Map String Int)\ncountVotesParallel [] = return Map.empty\ncountVotesParallel votes = do\n    let chunks = splitIntoChunks 4 votes\n    results &lt;- mapConcurrently (return . countVotes) chunks\n    return $ foldl' (Map.unionWith (+)) Map.empty results\n</code></pre>  **\u7279\u5fb4**:  - `mapConcurrently` \u3067\u30c1\u30e3\u30f3\u30af\u3054\u3068\u306b\u4e26\u5217\u96c6\u8a08 - `Map.unionWith (+)` \u3067\u90e8\u5206\u7d50\u679c\u3092\u30de\u30fc\u30b8 - \u7d14\u7c8b\u95a2\u6570 `countVotes` \u306f\u526f\u4f5c\u7528\u306a\u3057   Clojure \u5b9f\u88c5 <pre><code>(defn count-votes-parallel [votes num-workers]\n  (if (empty? votes)\n    {}\n    (let [chunks (partition-all (max 1 (quot (count votes) num-workers)) votes)\n          futures (doall (map #(future (count-votes-sequential %)) chunks))\n          results (map deref futures)]\n      (merge-counts results))))\n</code></pre>  **\u7279\u5fb4**:  - `partition-all` \u3067\u30c7\u30fc\u30bf\u3092\u5747\u7b49\u5206\u5272 - `future` + `deref` \u3067\u975e\u540c\u671f\u5b9f\u884c\u3068\u7d50\u679c\u53d6\u5f97 - `merge-with +` \u3067\u90e8\u5206\u7d50\u679c\u3092\u30de\u30fc\u30b8"},{"location":"all/part-4-ch07-parallel-patterns/#_2","title":"\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e","text":"Rust \u5b9f\u88c5\uff08Rayon\uff09 <pre><code>pub fn count_votes(votes: &amp;[&amp;str]) -&gt; HashMap&lt;String, usize&gt; {\n    votes\n        .par_iter()\n        .fold(\n            || HashMap::new(),\n            |mut acc, &amp;vote| {\n                *acc.entry(vote.to_string()).or_insert(0) += 1;\n                acc\n            },\n        )\n        .reduce(\n            || HashMap::new(),\n            |mut a, b| {\n                for (k, v) in b {\n                    *a.entry(k).or_insert(0) += v;\n                }\n                a\n            },\n        )\n}\n</code></pre>  **\u7279\u5fb4**:  - `par_iter()` + `fold` + `reduce` \u306e\u30ef\u30f3\u30d1\u30b9\u4e26\u5217\u51e6\u7406 - \u660e\u793a\u7684\u306a\u30c1\u30e3\u30f3\u30af\u5206\u5272\u304c\u4e0d\u8981\uff08Rayon \u304c\u81ea\u52d5\u5206\u914d\uff09 - `entry` API \u3067\u30cf\u30c3\u30b7\u30e5\u30de\u30c3\u30d7\u3092\u5b89\u5168\u306b\u66f4\u65b0   Scala \u5b9f\u88c5 <pre><code>def countVotesParallel(votes: List[String]): Map[String, Int] =\n  val numCores = Runtime.getRuntime.availableProcessors()\n  val chunks = votes.grouped(math.max(1, votes.size / numCores)).toList\n\n  val futures = chunks.map { chunk =&gt;\n    Future(countVotes(chunk))\n  }\n\n  val results = futures.map(f =&gt; Await.result(f, Duration.Inf))\n  results.reduce(mergeResults)\n</code></pre>  **\u7279\u5fb4**:  - `grouped` \u3067\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u5747\u7b49\u5206\u5272 - `Future` + `Await.result` \u3067\u975e\u540c\u671f\u5b9f\u884c - `reduce(mergeResults)` \u3067\u90e8\u5206\u7d50\u679c\u3092\u7d71\u5408   F# \u5b9f\u88c5 <pre><code>let countVotesParallel (votes: string list) : Map&lt;string, int&gt; =\n    let numCores = Environment.ProcessorCount\n    let chunks = votes |&gt; List.chunkBySize (max 1 (List.length votes / numCores))\n\n    let results =\n        chunks\n        |&gt; List.map (fun chunk -&gt; async { return countVotes chunk })\n        |&gt; Async.Parallel\n        |&gt; Async.RunSynchronously\n        |&gt; Array.toList\n\n    results |&gt; List.reduce mergeResults\n</code></pre>  **\u7279\u5fb4**:  - `List.chunkBySize` \u3067\u5747\u7b49\u5206\u5272 - `Async.Parallel` \u3067\u4e26\u5217\u5b9f\u884c - \u30d1\u30a4\u30d7\u6f14\u7b97\u5b50 `|&gt;` \u3067\u5909\u63db\u30d5\u30ed\u30fc\u3092\u660e\u793a"},{"location":"all/part-4-ch07-parallel-patterns/#oop","title":"OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u8a00\u8a9e","text":"Java \u5b9f\u88c5 <pre><code>public static Map&lt;Integer, Integer&gt; countVotesParallel(\n    List&lt;Integer&gt; votes, int numWorkers) {\n    int chunkSize = (int) Math.ceil((double) votes.size() / numWorkers);\n    List&lt;List&lt;Integer&gt;&gt; chunks = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; votes.size(); i += chunkSize) {\n        chunks.add(votes.subList(i, Math.min(i + chunkSize, votes.size())));\n    }\n\n    try (ExecutorService executor = Executors.newFixedThreadPool(numWorkers)) {\n        List&lt;Future&lt;Map&lt;Integer, Integer&gt;&gt;&gt; futures = new ArrayList&lt;&gt;();\n        for (List&lt;Integer&gt; chunk : chunks) {\n            futures.add(executor.submit(() -&gt; countVotes(chunk)));\n        }\n\n        Map&lt;Integer, Integer&gt; total = new HashMap&lt;&gt;();\n        for (Future&lt;Map&lt;Integer, Integer&gt;&gt; future : futures) {\n            total = mergeResults(total, future.get());\n        }\n        return total;\n    }\n}\n</code></pre>  **\u7279\u5fb4**:  - `ExecutorService` \u3067\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3092\u7ba1\u7406 - `Future.get()` \u3067\u7d50\u679c\u3092\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d6\u5f97 - `merge()` \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3067\u7d50\u679c\u3092\u7d71\u5408   C# \u5b9f\u88c5 <pre><code>public static Dictionary&lt;int, int&gt; CountVotesParallel(\n    List&lt;int&gt; votes, int numWorkers) {\n    var chunkSize = (int)Math.Ceiling((double)votes.Count / numWorkers);\n    var chunks = new List&lt;List&lt;int&gt;&gt;();\n    for (var i = 0; i &lt; votes.Count; i += chunkSize)\n        chunks.Add(votes.GetRange(i, Math.Min(chunkSize, votes.Count - i)));\n\n    var tasks = chunks.Select(chunk =&gt;\n        Task.Run(() =&gt; CountVotes(chunk))\n    ).ToArray();\n\n    Task.WaitAll(tasks);\n    return tasks.Aggregate(new Dictionary&lt;int, int&gt;(),\n        (acc, t) =&gt; MergeResults(acc, t.Result));\n}\n</code></pre>  **\u7279\u5fb4**:  - `Task.Run()` \u3067\u4e26\u5217\u30bf\u30b9\u30af\u3092\u751f\u6210 - LINQ `Aggregate` \u3067\u7d50\u679c\u3092\u30de\u30fc\u30b8 - `Task.WaitAll` \u3067\u5168\u30bf\u30b9\u30af\u306e\u5b8c\u4e86\u3092\u5f85\u6a5f"},{"location":"all/part-4-ch07-parallel-patterns/#pipeline_1","title":"Pipeline: \u6d17\u6fef\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3","text":""},{"location":"all/part-4-ch07-parallel-patterns/#_3","title":"\u30c1\u30e3\u30cd\u30eb/\u30ad\u30e5\u30fc\u306e\u6bd4\u8f03","text":"\u8a00\u8a9e \u30e1\u30ab\u30cb\u30ba\u30e0 \u9001\u4fe1 \u53d7\u4fe1 Python <code>queue.Queue</code> <code>put()</code> <code>get()</code> Java <code>BlockingQueue</code> <code>offer()</code> / <code>put()</code> <code>poll()</code> / <code>take()</code> C# <code>BlockingCollection&lt;T&gt;</code> <code>TryAdd()</code> <code>TryTake()</code> Rust <code>mpsc::channel</code> <code>send()</code> <code>recv()</code> Haskell <code>TQueue</code> (STM) <code>writeTQueue</code> <code>readTQueue</code> Clojure <code>core.async chan</code> <code>&gt;!</code> / <code>&gt;!!</code> <code>&lt;!</code> / <code>&lt;!!</code> Scala <code>LinkedBlockingQueue</code> <code>offer()</code> <code>poll()</code> F# <code>Async</code> \u30ef\u30fc\u30af\u30d5\u30ed\u30fc \u95a2\u6570\u5408\u6210 \u95a2\u6570\u5408\u6210 Rust \u5b9f\u88c5\uff08mpsc \u30c1\u30e3\u30cd\u30eb\uff09 <pre><code>pub fn concurrent_pipeline&lt;T&gt;(\n    input: Vec&lt;T&gt;,\n    processors: Vec&lt;Box&lt;dyn Fn(T) -&gt; T + Send + 'static&gt;&gt;,\n) -&gt; Vec&lt;T&gt;\nwhere\n    T: Send + 'static + Clone,\n{\n    let (first_tx, mut current_rx) = channel();\n\n    let input_thread = thread::spawn(move || {\n        for item in input {\n            first_tx.send(item).unwrap();\n        }\n    });\n\n    let mut handles = vec![input_thread];\n\n    for processor in processors {\n        let (tx, rx) = channel();\n        let prev_rx = current_rx;\n        current_rx = rx;\n\n        let handle = thread::spawn(move || {\n            while let Ok(item) = prev_rx.recv() {\n                let result = processor(item);\n                if tx.send(result).is_err() { break; }\n            }\n        });\n        handles.push(handle);\n    }\n\n    let mut results = Vec::new();\n    while let Ok(item) = current_rx.recv() {\n        results.push(item);\n    }\n\n    for handle in handles { handle.join().unwrap(); }\n    results\n}\n</code></pre> Clojure \u5b9f\u88c5\uff08core.async\uff09 <pre><code>(defn run-chain-pipeline [initial-value functions]\n  (if (empty? functions)\n    initial-value\n    (let [channels (repeatedly (inc (count functions)) #(chan 1))]\n      (doseq [[in-ch out-ch f] (map vector channels (rest channels) functions)]\n        (go\n          (when-let [v (&lt;! in-ch)]\n            (&gt;! out-ch (f v)))))\n      (&gt;!! (first channels) initial-value)\n      (&lt;!! (last channels)))))\n</code></pre> Haskell \u5b9f\u88c5\uff08TQueue\uff09 <pre><code>concurrentPipeline :: [a -&gt; a] -&gt; [a] -&gt; IO [a]\nconcurrentPipeline processors inputs = do\n    queues &lt;- forM [1..length processors + 1] $ \\_ -&gt; newTQueueIO\n\n    forkIO $ do\n        mapM_ (atomically . writeTQueue (head queues) . Just) inputs\n        atomically $ writeTQueue (head queues) Nothing\n\n    let pairs = zip3 (init queues) (tail queues) processors\n    mapM_ (\\(inQ, outQ, proc) -&gt; forkIO $ processStage inQ outQ proc) pairs\n\n    collectResults (last queues)\n</code></pre>"},{"location":"all/part-4-ch07-parallel-patterns/#44","title":"4.4 \u6bd4\u8f03\u5206\u6790","text":""},{"location":"all/part-4-ch07-parallel-patterns/#forkjoin_2","title":"Fork/Join \u306e\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3","text":"\u30d1\u30bf\u30fc\u30f3 \u8a00\u8a9e \u7279\u5fb4 \u81ea\u52d5\u5206\u914d Rust (Rayon) <code>par_iter()</code> \u304c\u30c1\u30e3\u30f3\u30af\u5206\u5272\u30fb\u8ca0\u8377\u5206\u6563\u3092\u81ea\u52d5\u5316 \u30a2\u30d7\u30ea\u30ab\u30c6\u30a3\u30d6\u4e26\u5217 Haskell <code>mapConcurrently</code> \u3067\u8981\u7d20\u3054\u3068\u306b\u4e26\u5217\u5316 Future \u5206\u6563 Java, Scala, Clojure \u30c1\u30e3\u30f3\u30af\u5206\u5272 \u2192 Future \u751f\u6210 \u2192 \u7d50\u679c\u7d71\u5408 Async \u4e26\u5217 F# <code>Async.Parallel</code> \u3067\u5ba3\u8a00\u7684\u306b\u4e26\u5217\u5b9f\u884c Task \u5206\u6563 C# <code>Task.Run()</code> + <code>Task.WaitAll</code> \u30d7\u30ed\u30bb\u30b9\u30d7\u30fc\u30eb Python <code>multiprocessing.Pool</code> \u3067 GIL \u3092\u56de\u907f"},{"location":"all/part-4-ch07-parallel-patterns/#_4","title":"\u7d50\u679c\u30de\u30fc\u30b8\u306e\u65b9\u6cd5","text":"\u8a00\u8a9e \u30de\u30fc\u30b8\u95a2\u6570 \u7279\u5fb4 Python <code>dict</code> + \u30eb\u30fc\u30d7 \u624b\u52d5\u30de\u30fc\u30b8 Java <code>HashMap.merge()</code> <code>Integer::sum</code> \u3067\u95a2\u6570\u7684 C# LINQ <code>Aggregate</code> \u5ba3\u8a00\u7684 Scala <code>reduce(mergeResults)</code> \u95a2\u6570\u578b F# <code>List.reduce mergeResults</code> \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 Rust <code>reduce</code> + <code>entry</code> API \u30ed\u30c3\u30af\u30d5\u30ea\u30fc Haskell <code>foldl' (Map.unionWith (+))</code> \u7d14\u7c8b\u95a2\u6570\u578b Clojure <code>merge-with +</code> \u6700\u3082\u7c21\u6f54"},{"location":"all/part-4-ch07-parallel-patterns/#pipeline_2","title":"Pipeline \u306e\u8a2d\u8a08\u601d\u60f3","text":"\u8a00\u8a9e \u30ad\u30e5\u30fc\u65b9\u5f0f \u901a\u4fe1\u30e2\u30c7\u30eb Python <code>queue.Queue</code> \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 Java <code>BlockingQueue</code> \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff08\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u4ed8\u304d\uff09 C# <code>BlockingCollection</code> \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff08\u30ad\u30e3\u30f3\u30bb\u30eb\u5bfe\u5fdc\uff09 Rust <code>mpsc::channel</code> \u6240\u6709\u6a29\u30d9\u30fc\u30b9 Haskell <code>TQueue</code> (STM) \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb Clojure <code>core.async chan</code> CSP \u30e2\u30c7\u30eb\uff08go \u30d6\u30ed\u30c3\u30af\uff09"},{"location":"all/part-4-ch07-parallel-patterns/#45","title":"4.5 \u5b9f\u8df5\u7684\u306a\u9078\u629e\u6307\u91dd","text":""},{"location":"all/part-4-ch07-parallel-patterns/#forkjoin_3","title":"Fork/Join \u306b\u9069\u3057\u305f\u8a00\u8a9e","text":"<ul> <li>Rust (Rayon) \u2014 <code>par_iter()</code> \u3067\u6700\u5c0f\u9650\u306e\u30b3\u30fc\u30c9\u5909\u66f4\u3067\u4e26\u5217\u5316\u3002\u30ef\u30fc\u30af\u30b9\u30c6\u30a3\u30fc\u30ea\u30f3\u30b0\u306b\u3088\u308b\u81ea\u52d5\u8ca0\u8377\u5206\u6563</li> <li>Haskell \u2014 \u7d14\u7c8b\u95a2\u6570\u306f\u5b89\u5168\u306b\u4e26\u5217\u5b9f\u884c\u53ef\u80fd\u3002<code>mapConcurrently</code> \u304c\u5ba3\u8a00\u7684</li> <li>Clojure \u2014 <code>merge-with +</code> \u304c\u6700\u3082\u7c21\u6f54\u306a\u30de\u30fc\u30b8\u8868\u73fe</li> </ul>"},{"location":"all/part-4-ch07-parallel-patterns/#pipeline_3","title":"Pipeline \u306b\u9069\u3057\u305f\u8a00\u8a9e","text":"<ul> <li>Clojure (core.async) \u2014 CSP \u30e2\u30c7\u30eb\u3067\u30c1\u30e3\u30cd\u30eb\u30d9\u30fc\u30b9\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u81ea\u7136\u306b\u8868\u73fe</li> <li>Rust \u2014 <code>mpsc</code> \u30c1\u30e3\u30cd\u30eb\u3067\u578b\u5b89\u5168\u306a\u30b9\u30c6\u30fc\u30b8\u9593\u901a\u4fe1</li> <li>Haskell \u2014 STM \u30d9\u30fc\u30b9\u306e <code>TQueue</code> \u3067\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc</li> </ul>"},{"location":"all/part-4-ch07-parallel-patterns/#46","title":"4.6 \u307e\u3068\u3081","text":""},{"location":"all/part-4-ch07-parallel-patterns/#_5","title":"\u8a00\u8a9e\u6a2a\u65ad\u7684\u306a\u5b66\u3073","text":"<ol> <li>Fork/Join \u306f map-reduce \u306e\u57fa\u790e \u2014 \u30c7\u30fc\u30bf\u5206\u5272\u2192\u4e26\u5217\u51e6\u7406\u2192\u7d71\u5408\u306f\u5168\u8a00\u8a9e\u5171\u901a</li> <li>Pipeline \u306f\u30ad\u30e5\u30fc\u8a2d\u8a08\u304c\u9375 \u2014 \u30b9\u30c6\u30fc\u30b8\u9593\u901a\u4fe1\u306e\u30e1\u30ab\u30cb\u30ba\u30e0\u304c\u8a00\u8a9e\u306e\u500b\u6027\u3092\u6c7a\u5b9a</li> <li>\u62bd\u8c61\u5ea6\u306e\u9055\u3044 \u2014 Rayon \u306e\u81ea\u52d5\u5206\u914d vs \u624b\u52d5\u30c1\u30e3\u30f3\u30af\u5206\u5272\u306e\u9078\u629e</li> <li>\u30de\u30fc\u30b8\u64cd\u4f5c\u306e\u8868\u73fe\u529b \u2014 <code>merge-with +</code> (Clojure) \u304b\u3089 <code>HashMap.merge()</code> (Java) \u307e\u3067</li> </ol>"},{"location":"all/part-4-ch07-parallel-patterns/#_6","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406 \u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u3063\u3066\u5927\u898f\u6a21\u30c7\u30fc\u30bf\u306e\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"all/part-4-ch07-parallel-patterns/#_7","title":"\u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b","text":"\u8a00\u8a9e \u500b\u5225\u8a18\u4e8b Python Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Java Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 C# Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Scala Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 F# Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Rust Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Haskell Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Clojure Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3"},{"location":"all/part-5-ch08-09-synchronization/","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"all/part-5-ch08-09-synchronization/#51","title":"5.1 \u306f\u3058\u3081\u306b","text":"<p>\u4e26\u884c\u51e6\u7406\u306e\u6700\u5927\u306e\u8ab2\u984c\u306f\u5171\u6709\u72b6\u614b\u306e\u5b89\u5168\u306a\u7ba1\u7406\u3067\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u8907\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u540c\u3058\u30c7\u30fc\u30bf\u306b\u540c\u6642\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u969b\u306b\u767a\u751f\u3059\u308b\u7af6\u5408\u72b6\u614b\uff08Race Condition\uff09\u3068\u3001\u305d\u308c\u3092\u9632\u3050\u30ed\u30c3\u30af\u3001\u30bb\u30de\u30d5\u30a9\u3001STM \u3092\u5b66\u3073\u307e\u3059\u3002\u9280\u884c\u53e3\u5ea7\u306e\u9001\u91d1\u3092\u984c\u6750\u306b\u30018 \u3064\u306e\u8a00\u8a9e\u304c\u3069\u306e\u3088\u3046\u306b\u6392\u4ed6\u5236\u5fa1\u3092\u5b9f\u73fe\u3059\u308b\u304b\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-5-ch08-09-synchronization/#_1","title":"\u7af6\u5408\u72b6\u614b\u3068\u306f","text":"<pre><code>Thread A: balance \u3092\u8aad\u3080 (1000)\n                                    Thread B: balance \u3092\u8aad\u3080 (1000)\nThread A: balance = 1000 + 100      Thread B: balance = 1000 + 200\nThread A: balance \u306b 1100 \u3092\u66f8\u304f\n                                    Thread B: balance \u306b 1200 \u3092\u66f8\u304f\n\u7d50\u679c: 1200\uff08\u672c\u6765\u306f 1300 \u3067\u3042\u308b\u3079\u304d\uff09\n</code></pre> <p>2 \u3064\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u540c\u3058\u5909\u6570\u3092\u540c\u6642\u306b\u8aad\u307f\u66f8\u304d\u3059\u308b\u3068\u3001\u4e00\u65b9\u306e\u66f4\u65b0\u304c\u5931\u308f\u308c\u307e\u3059\u3002</p>"},{"location":"all/part-5-ch08-09-synchronization/#52","title":"5.2 \u5171\u901a\u306e\u672c\u8cea","text":""},{"location":"all/part-5-ch08-09-synchronization/#2","title":"\u6392\u4ed6\u5236\u5fa1\u306e 2 \u3064\u306e\u30a2\u30d7\u30ed\u30fc\u30c1","text":"<p>8 \u8a00\u8a9e\u306e\u5b9f\u88c5\u306f\u3001\u6392\u4ed6\u5236\u5fa1\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u5927\u304d\u304f 2 \u3064\u306b\u5206\u304b\u308c\u307e\u3059\uff1a</p> \u30a2\u30d7\u30ed\u30fc\u30c1 \u8a00\u8a9e \u4ed5\u7d44\u307f \u30ed\u30c3\u30af\u30d9\u30fc\u30b9 Python, Java, C#, Scala, F#, Rust \u660e\u793a\u7684\u306b\u30ed\u30c3\u30af\u3092\u53d6\u5f97\u30fb\u89e3\u653e \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb\u30e1\u30e2\u30ea (STM) Haskell, Clojure \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5185\u3067\u81ea\u52d5\u7684\u306b\u6574\u5408\u6027\u3092\u4fdd\u8a3c"},{"location":"all/part-5-ch08-09-synchronization/#4","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306e 4 \u6761\u4ef6","text":"<p>\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306f\u4ee5\u4e0b\u306e 4 \u6761\u4ef6\u304c\u3059\u3079\u3066\u6210\u7acb\u3057\u305f\u3068\u304d\u767a\u751f\u3057\u307e\u3059\uff1a</p> <ol> <li>\u76f8\u4e92\u6392\u4ed6 \u2014 \u30ea\u30bd\u30fc\u30b9\u306f 1 \u30b9\u30ec\u30c3\u30c9\u306e\u307f\u304c\u4f7f\u7528\u53ef\u80fd</li> <li>\u4fdd\u6301\u3068\u5f85\u6a5f \u2014 \u30ed\u30c3\u30af\u3092\u4fdd\u6301\u3057\u3064\u3064\u5225\u306e\u30ed\u30c3\u30af\u3092\u5f85\u3064</li> <li>\u975e\u6a2a\u53d6\u308a \u2014 \u4ed6\u30b9\u30ec\u30c3\u30c9\u306e\u30ed\u30c3\u30af\u3092\u5f37\u5236\u7684\u306b\u596a\u3048\u306a\u3044</li> <li>\u5faa\u74b0\u5f85\u3061 \u2014 \u30b9\u30ec\u30c3\u30c9\u9593\u306b\u5faa\u74b0\u7684\u306a\u5f85\u3061\u306e\u9023\u9396\u304c\u3042\u308b</li> </ol>"},{"location":"all/part-5-ch08-09-synchronization/#_2","title":"\u9280\u884c\u53e3\u5ea7\u306e\u9001\u91d1\u554f\u984c","text":"<pre><code>Account A (1000) \u2192 \u9001\u91d1 500 \u2192 Account B (1000)\n\n\u6b63\u3057\u3044\u7d50\u679c: A = 500, B = 1500\uff08\u5408\u8a08 = 2000\uff09\n\n\u554f\u984c: \u9001\u91d1\u4e2d\u306b\u5225\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u540c\u6642\u306b\u9001\u91d1\u3059\u308b\u3068\u3001\u5408\u8a08\u304c 2000 \u306b\u306a\u3089\u306a\u3044\n</code></pre>"},{"location":"all/part-5-ch08-09-synchronization/#53","title":"5.3 \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"all/part-5-ch08-09-synchronization/#_3","title":"\u30ed\u30c3\u30af\u30d9\u30fc\u30b9\u306e\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"all/part-5-ch08-09-synchronization/#_4","title":"\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e","text":"Rust \u5b9f\u88c5\uff08Mutex + Arc\uff09 <pre><code>use std::sync::{Arc, Mutex};\n\npub struct BankAccount {\n    id: u32,\n    balance: Mutex&lt;i64&gt;,\n}\n\nimpl BankAccount {\n    pub fn new(id: u32, initial_balance: i64) -&gt; Self {\n        BankAccount {\n            id,\n            balance: Mutex::new(initial_balance),\n        }\n    }\n\n    pub fn deposit(&amp;self, amount: i64) {\n        let mut balance = self.balance.lock().unwrap();\n        *balance += amount;\n    }\n\n    pub fn withdraw(&amp;self, amount: i64) -&gt; bool {\n        let mut balance = self.balance.lock().unwrap();\n        if *balance &gt;= amount {\n            *balance -= amount;\n            true\n        } else {\n            false\n        }\n    }\n}\n\n// \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f: ID \u9806\u3067\u30ed\u30c3\u30af\u53d6\u5f97\npub fn transfer(from: &amp;BankAccount, to: &amp;BankAccount, amount: i64) -&gt; bool {\n    let (first, second, from_is_first) = if from.id &lt; to.id {\n        (from, to, true)\n    } else {\n        (to, from, false)\n    };\n\n    let mut first_guard = first.balance.lock().unwrap();\n    let mut second_guard = second.balance.lock().unwrap();\n\n    let (from_bal, to_bal) = if from_is_first {\n        (&amp;mut *first_guard, &amp;mut *second_guard)\n    } else {\n        (&amp;mut *second_guard, &amp;mut *first_guard)\n    };\n\n    if *from_bal &gt;= amount {\n        *from_bal -= amount;\n        *to_bal += amount;\n        true\n    } else {\n        false\n    }\n}\n</code></pre>  **\u7279\u5fb4**:  - `Mutex` \u304c\u30c7\u30fc\u30bf\u3068\u30ed\u30c3\u30af\u3092\u4e00\u4f53\u5316\uff08\u30ed\u30c3\u30af\u306a\u3057\u3067\u306f\u30c7\u30fc\u30bf\u306b\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef\u80fd\uff09 - \u30ac\u30fc\u30c9\u30d1\u30bf\u30fc\u30f3: `MutexGuard` \u304c\u30b9\u30b3\u30fc\u30d7\u3092\u629c\u3051\u308b\u3068\u81ea\u52d5\u89e3\u653e - `Arc` \u3067\u8907\u6570\u30b9\u30ec\u30c3\u30c9\u9593\u306e\u6240\u6709\u6a29\u3092\u5171\u6709 - \u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u30c7\u30fc\u30bf\u7af6\u5408\u3092\u9632\u6b62   Scala \u5b9f\u88c5\uff08synchronized\uff09 <pre><code>class BankAccount(val id: Int, initialBalance: Int):\n  private val lock = new Object\n  private var _balance: Int = initialBalance\n\n  def balance: Int = lock.synchronized { _balance }\n\n  def deposit(amount: Int): Unit = lock.synchronized {\n    _balance += amount\n  }\n\n  def withdraw(amount: Int): Boolean = lock.synchronized {\n    if _balance &gt;= amount then\n      _balance -= amount\n      true\n    else false\n  }\n\n// \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f: identityHashCode \u9806\u3067\u30ed\u30c3\u30af\ndef transfer(from: BankAccount, to: BankAccount, amount: Int): Boolean =\n  val (first, second) = if System.identityHashCode(from) &lt; System.identityHashCode(to)\n    then (from, to) else (to, from)\n  first.lock.synchronized {\n    second.lock.synchronized {\n      if from._balance &gt;= amount then\n        from._balance -= amount\n        to._balance += amount\n        true\n      else false\n    }\n  }\n</code></pre> F# \u5b9f\u88c5\uff08lock \u5f0f\uff09 <pre><code>type BankAccount(id: int, initialBalance: int) =\n    let lockObj = obj()\n    let mutable balance = initialBalance\n\n    member _.Balance = lock lockObj (fun () -&gt; balance)\n\n    member _.Deposit(amount: int) =\n        lock lockObj (fun () -&gt; balance &lt;- balance + amount)\n\n    member _.Withdraw(amount: int) =\n        lock lockObj (fun () -&gt;\n            if balance &gt;= amount then\n                balance &lt;- balance - amount\n                true\n            else false)\n\n// \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f: \u30cf\u30c3\u30b7\u30e5\u9806\u3067\u30ed\u30c3\u30af\nlet transfer (from: BankAccount) (toAccount: BankAccount) (amount: int) =\n    let fromHash = RuntimeHelpers.GetHashCode(from)\n    let toHash = RuntimeHelpers.GetHashCode(toAccount)\n    let (first, second) = if fromHash &lt; toHash then (from, toAccount) else (toAccount, from)\n    lock first.Lock (fun () -&gt;\n        lock second.Lock (fun () -&gt;\n            if from.Balance &gt;= amount then\n                from.Withdraw(amount) |&gt; ignore\n                toAccount.Deposit(amount)\n                true\n            else false))\n</code></pre>"},{"location":"all/part-5-ch08-09-synchronization/#oop","title":"OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u8a00\u8a9e","text":"Java \u5b9f\u88c5\uff08ReentrantLock\uff09 <pre><code>public class BankAccount {\n    private final ReentrantLock lock = new ReentrantLock();\n    private int balance;\n\n    public void deposit(int amount) {\n        lock.lock();\n        try {\n            balance += amount;\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    // \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f: identityHashCode \u9806\u3067\u30ed\u30c3\u30af\n    public static boolean transfer(BankAccount from, BankAccount to, int amount) {\n        BankAccount first = System.identityHashCode(from) &lt; System.identityHashCode(to)\n            ? from : to;\n        BankAccount second = first == from ? to : from;\n\n        first.lock.lock();\n        try {\n            second.lock.lock();\n            try {\n                if (from.balance &gt;= amount) {\n                    from.balance -= amount;\n                    to.balance += amount;\n                    return true;\n                }\n                return false;\n            } finally {\n                second.lock.unlock();\n            }\n        } finally {\n            first.lock.unlock();\n        }\n    }\n}\n</code></pre>  **\u7279\u5fb4**: `try-finally` \u3067\u78ba\u5b9f\u306b\u30ed\u30c3\u30af\u3092\u89e3\u653e\u3002`InterruptedException` \u306e\u9069\u5207\u306a\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3002   C# \u5b9f\u88c5\uff08lock + Monitor\uff09 <pre><code>public class BankAccount {\n    private readonly object _lock = new();\n    private int _balance;\n\n    public void Deposit(int amount) {\n        lock (_lock) { _balance += amount; }\n    }\n\n    public static bool Transfer(BankAccount from, BankAccount to, int amount) {\n        var first = RuntimeHelpers.GetHashCode(from) &lt; RuntimeHelpers.GetHashCode(to)\n            ? from : to;\n        var second = first == from ? to : from;\n\n        lock (first._lock) {\n            lock (second._lock) {\n                if (from._balance &gt;= amount) {\n                    from._balance -= amount;\n                    to._balance += amount;\n                    return true;\n                }\n                return false;\n            }\n        }\n    }\n}\n</code></pre>  **\u7279\u5fb4**: `lock` \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u304c `Monitor.Enter`/`Monitor.Exit` \u3092\u81ea\u52d5\u7ba1\u7406\u3002Java \u3088\u308a\u7c21\u6f54\u3002   Python \u5b9f\u88c5\uff08threading.Lock\uff09 <pre><code>from threading import Lock\n\nclass BankAccount:\n    def __init__(self, balance=0):\n        self.lock = Lock()\n        self.balance = balance\n\n    def deposit(self, amount):\n        with self.lock:\n            self.balance += amount\n\n    def withdraw(self, amount):\n        with self.lock:\n            if self.balance &gt;= amount:\n                self.balance -= amount\n                return True\n            return False\n\n# \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f: id() \u9806\u3067\u30ed\u30c3\u30af\ndef transfer(from_acc, to_acc, amount):\n    first, second = sorted([from_acc, to_acc], key=id)\n    with first.lock:\n        with second.lock:\n            if from_acc.balance &gt;= amount:\n                from_acc.balance -= amount\n                to_acc.balance += amount\n                return True\n            return False\n</code></pre>  **\u7279\u5fb4**: `with` \u6587\uff08\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\uff09\u3067\u81ea\u52d5\u7684\u306b\u30ed\u30c3\u30af\u3092\u89e3\u653e\u3002"},{"location":"all/part-5-ch08-09-synchronization/#stm","title":"STM\uff08\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb\u30e1\u30e2\u30ea\uff09","text":""},{"location":"all/part-5-ch08-09-synchronization/#_5","title":"\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e","text":"Haskell \u5b9f\u88c5\uff08STM + TVar\uff09 <pre><code>import Control.Concurrent.STM\n\ndata BankAccount = BankAccount\n    { accountId      :: Int\n    , accountBalance :: TVar Int\n    }\n\nnewAccount :: Int -&gt; Int -&gt; IO BankAccount\nnewAccount aid balance = do\n    tvar &lt;- newTVarIO balance\n    return $ BankAccount aid tvar\n\ndeposit :: BankAccount -&gt; Int -&gt; STM ()\ndeposit account amount =\n    modifyTVar' (accountBalance account) (+ amount)\n\nwithdraw :: BankAccount -&gt; Int -&gt; STM Bool\nwithdraw account amount = do\n    bal &lt;- readTVar (accountBalance account)\n    if bal &gt;= amount\n        then do\n            writeTVar (accountBalance account) (bal - amount)\n            return True\n        else return False\n\n-- \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306f\u539f\u7406\u7684\u306b\u767a\u751f\u3057\u306a\u3044\ntransfer :: BankAccount -&gt; BankAccount -&gt; Int -&gt; IO Bool\ntransfer from to amount = atomically $ do\n    fromBal &lt;- readTVar (accountBalance from)\n    if fromBal &gt;= amount\n        then do\n            modifyTVar' (accountBalance from) (subtract amount)\n            modifyTVar' (accountBalance to) (+ amount)\n            return True\n        else return False\n</code></pre>  **\u7279\u5fb4**:  - **\u30ed\u30c3\u30af\u9806\u5e8f\u306e\u7ba1\u7406\u304c\u4e0d\u8981** \u2014 `atomically` \u304c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u81ea\u52d5\u7ba1\u7406 - **\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc** \u2014 \u7af6\u5408\u6642\u306f\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4 - **\u5408\u6210\u53ef\u80fd** \u2014 STM \u30a2\u30af\u30b7\u30e7\u30f3\u3092\u81ea\u7531\u306b\u7d44\u307f\u5408\u308f\u305b\u53ef\u80fd - `TVar` \u306f STM \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5185\u3067\u306e\u307f\u8aad\u307f\u66f8\u304d\u53ef\u80fd   Clojure \u5b9f\u88c5\uff08ref + dosync\uff09 <pre><code>(defn create-account [id balance]\n  {:id id\n   :balance (ref balance)})\n\n(defn deposit! [account amount]\n  (dosync\n    (alter (:balance account) + amount)))\n\n(defn withdraw! [account amount]\n  (dosync\n    (let [bal @(:balance account)]\n      (if (&gt;= bal amount)\n        (do (alter (:balance account) - amount) true)\n        false))))\n\n;; \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306f\u539f\u7406\u7684\u306b\u767a\u751f\u3057\u306a\u3044\n(defn transfer! [from to amount]\n  (dosync\n    (if (&gt;= @(:balance from) amount)\n      (do\n        (alter (:balance from) - amount)\n        (alter (:balance to) + amount)\n        true)\n      false)))\n</code></pre>  **\u7279\u5fb4**:  - `ref` \u306f\u5354\u8abf\u7684\u306a\u66f4\u65b0\u304c\u5fc5\u8981\u306a\u5024\u306b\u4f7f\u7528 - `dosync` \u304c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c\u3092\u5b9a\u7fa9 - `alter` \u3067\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5185\u306e\u5024\u3092\u66f4\u65b0 - \u7af6\u5408\u6642\u306f\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4"},{"location":"all/part-5-ch08-09-synchronization/#54","title":"5.4 \u6bd4\u8f03\u5206\u6790","text":""},{"location":"all/part-5-ch08-09-synchronization/#_6","title":"\u6392\u4ed6\u5236\u5fa1\u30e1\u30ab\u30cb\u30ba\u30e0\u306e\u6bd4\u8f03","text":"\u8a00\u8a9e \u30e1\u30ab\u30cb\u30ba\u30e0 \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u9632\u6b62 \u30ed\u30c3\u30af\u9806\u5e8f\u7ba1\u7406 Python <code>Lock</code> + <code>with</code> \u624b\u52d5\uff08id \u9806\uff09 \u5fc5\u8981 Java <code>ReentrantLock</code> + <code>try-finally</code> \u624b\u52d5\uff08hash \u9806\uff09 \u5fc5\u8981 C# <code>lock</code> \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 \u624b\u52d5\uff08hash \u9806\uff09 \u5fc5\u8981 Scala <code>synchronized</code> \u624b\u52d5\uff08hash \u9806\uff09 \u5fc5\u8981 F# <code>lock</code> \u5f0f \u624b\u52d5\uff08hash \u9806\uff09 \u5fc5\u8981 Rust <code>Mutex&lt;T&gt;</code> + \u30ac\u30fc\u30c9 \u624b\u52d5\uff08id \u9806\uff09 \u5fc5\u8981 Haskell STM (<code>atomically</code>) \u81ea\u52d5 \u4e0d\u8981 Clojure STM (<code>dosync</code>) \u81ea\u52d5 \u4e0d\u8981"},{"location":"all/part-5-ch08-09-synchronization/#_7","title":"\u5b89\u5168\u6027\u306e\u4fdd\u8a3c\u30ec\u30d9\u30eb","text":"<pre><code>\u6700\u9ad8    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502 Rust: \u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u30c7\u30fc\u30bf\u7af6\u5408\u3092\u9632\u6b62 \u2502\n        \u2502 Haskell STM: \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc    \u2502\n        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u9ad8\u3044    \u2502 Clojure STM: \u4e0d\u5909\u30c7\u30fc\u30bf + dosync   \u2502\n        \u2502 F#: \u4e0d\u5909\u6027\u30c7\u30d5\u30a9\u30eb\u30c8              \u2502\n        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u4e2d\u7a0b\u5ea6  \u2502 Java: ReentrantLock\uff08\u624b\u52d5\u7ba1\u7406\uff09    \u2502\n        \u2502 C#: lock\uff08\u69cb\u6587\u30b5\u30dd\u30fc\u30c8\uff09           \u2502\n        \u2502 Scala: synchronized              \u2502\n        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u4f4e\u3044    \u2502 Python: Lock\uff08GIL \u306f\u90e8\u5206\u7684\u4fdd\u8b77\uff09   \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"all/part-5-ch08-09-synchronization/#_8","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f\u6226\u7565\u306e\u6bd4\u8f03","text":"\u6226\u7565 \u8a00\u8a9e \u7279\u5fb4 \u30ed\u30c3\u30af\u9806\u5e8f\u56fa\u5b9a Python, Java, C#, Scala, F#, Rust \u30cf\u30c3\u30b7\u30e5/ID \u3067\u30bd\u30fc\u30c8\u3057\u3001\u5e38\u306b\u540c\u3058\u9806\u5e8f\u3067\u30ed\u30c3\u30af STM\uff08\u697d\u89b3\u7684\u4e26\u884c\u5236\u5fa1\uff09 Haskell, Clojure \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5b9f\u884c\u2192\u7af6\u5408\u691c\u51fa\u2192\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4 \u578b\u30b7\u30b9\u30c6\u30e0 Rust <code>Send</code>/<code>Sync</code> \u30c8\u30ec\u30a4\u30c8\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u691c\u8a3c"},{"location":"all/part-5-ch08-09-synchronization/#_9","title":"\u30c6\u30b9\u30c8\u6226\u7565","text":"<p>\u5168\u8a00\u8a9e\u3067\u5171\u901a\u306e\u30c6\u30b9\u30c8\u30d1\u30bf\u30fc\u30f3\uff1a</p> <pre><code>1. 2 \u3064\u306e\u53e3\u5ea7\u3092\u4f5c\u6210\uff08\u5404 1000\u3001\u5408\u8a08 2000\uff09\n2. 100 \u4ee5\u4e0a\u306e\u4e26\u884c\u30b9\u30ec\u30c3\u30c9\u3067\u53cc\u65b9\u5411\u9001\u91d1\n3. \u5168\u30b9\u30ec\u30c3\u30c9\u5b8c\u4e86\u5f8c\u3001\u5408\u8a08\u304c 2000 \u3067\u3042\u308b\u3053\u3068\u3092\u691c\u8a3c\n4. \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u5185\u306b\u5b8c\u4e86\u3059\u308b\u3053\u3068\u3092\u691c\u8a3c\uff08\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306a\u3057\uff09\n</code></pre>"},{"location":"all/part-5-ch08-09-synchronization/#55","title":"5.5 \u5b9f\u8df5\u7684\u306a\u9078\u629e\u6307\u91dd","text":""},{"location":"all/part-5-ch08-09-synchronization/#_10","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u3092\u907f\u3051\u305f\u3044\u5834\u5408","text":"<ul> <li>Haskell STM \u2014 \u539f\u7406\u7684\u306b\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u304c\u767a\u751f\u3057\u306a\u3044\u3002\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5185\u3067\u81ea\u7531\u306b\u8907\u6570\u306e\u5909\u6570\u3092\u64cd\u4f5c</li> <li>Clojure STM \u2014 <code>dosync</code> \u5185\u3067 <code>ref</code> \u3092\u81ea\u7531\u306b\u64cd\u4f5c\u3002\u4e0d\u5909\u30c7\u30fc\u30bf\u69cb\u9020\u3068\u306e\u76f8\u6027\u304c\u826f\u3044</li> </ul>"},{"location":"all/part-5-ch08-09-synchronization/#_11","title":"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u91cd\u8981\u306a\u5834\u5408","text":"<ul> <li>Rust \u2014 \u30bc\u30ed\u30b3\u30b9\u30c8\u62bd\u8c61\u5316\u3002<code>Mutex&lt;T&gt;</code> \u306e\u30ac\u30fc\u30c9\u30d1\u30bf\u30fc\u30f3\u3067\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u6700\u5c0f</li> <li>Java \u2014 <code>ReentrantLock</code> \u306e <code>tryLock</code> \u3067\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u306a\u30ed\u30c3\u30af\u53d6\u5f97\u304c\u53ef\u80fd</li> </ul>"},{"location":"all/part-5-ch08-09-synchronization/#_12","title":"\u30b3\u30fc\u30c9\u306e\u7c21\u6f54\u3055\u3092\u91cd\u8996\u3059\u308b\u5834\u5408","text":"<ul> <li>C# \u2014 <code>lock</code> \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u304c\u6700\u3082\u7c21\u6f54</li> <li>Python \u2014 <code>with</code> \u6587\u306b\u3088\u308b\u81ea\u52d5\u30ed\u30c3\u30af\u7ba1\u7406</li> </ul>"},{"location":"all/part-5-ch08-09-synchronization/#56","title":"5.6 \u307e\u3068\u3081","text":""},{"location":"all/part-5-ch08-09-synchronization/#_13","title":"\u8a00\u8a9e\u6a2a\u65ad\u7684\u306a\u5b66\u3073","text":"<ol> <li>\u7af6\u5408\u72b6\u614b\u306f\u666e\u904d\u7684 \u2014 \u3069\u306e\u8a00\u8a9e\u3067\u3082\u5171\u6709\u72b6\u614b\u306e\u540c\u6642\u30a2\u30af\u30bb\u30b9\u306f\u5371\u967a</li> <li>\u30ed\u30c3\u30af vs STM \u2014 \u30ed\u30c3\u30af\u30d9\u30fc\u30b9\u306f\u624b\u52d5\u7ba1\u7406\u304c\u5fc5\u8981\u3001STM \u306f\u81ea\u52d5\u3060\u304c\u697d\u89b3\u7684\u518d\u5b9f\u884c\u306e\u30b3\u30b9\u30c8\u304c\u3042\u308b</li> <li>\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f\u306f\u8a2d\u8a08\u306e\u554f\u984c \u2014 \u30ed\u30c3\u30af\u9806\u5e8f\u3092\u56fa\u5b9a\u3059\u308b\u304b\u3001STM \u3067\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5316\u3059\u308b\u304b</li> <li>Rust \u306f\u552f\u4e00\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u4fdd\u8a3c \u2014 <code>Send</code>/<code>Sync</code> \u3067\u30c7\u30fc\u30bf\u7af6\u5408\u3092\u578b\u30ec\u30d9\u30eb\u3067\u9632\u6b62</li> <li>\u30c6\u30b9\u30c8\u306f\u300c\u5408\u8a08\u4fdd\u5b58\u5247\u300d \u2014 \u4e26\u884c\u9001\u91d1\u5f8c\u306b\u5408\u8a08\u304c\u4e0d\u5909\u3067\u3042\u308b\u3053\u3068\u304c\u6b63\u3057\u3055\u306e\u8a3c\u660e</li> </ol>"},{"location":"all/part-5-ch08-09-synchronization/#_14","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3067\u306f\u3001\u30ed\u30c3\u30af\u3092\u4f7f\u308f\u305a\u306b\u4e26\u884c\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30e2\u30c7\u30eb\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"all/part-5-ch08-09-synchronization/#_15","title":"\u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b","text":"\u8a00\u8a9e \u500b\u5225\u8a18\u4e8b Python Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 Java Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 C# Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 Scala Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 F# Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 Rust Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 Haskell Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 Clojure Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1"},{"location":"all/part-6-ch10-11-nonblocking-io/","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":""},{"location":"all/part-6-ch10-11-nonblocking-io/#61","title":"6.1 \u306f\u3058\u3081\u306b","text":"<p>Part V \u3067\u30ed\u30c3\u30af\u30d9\u30fc\u30b9\u306e\u540c\u671f\u3092\u5b66\u3073\u307e\u3057\u305f\u304c\u3001\u30ed\u30c3\u30af\u306b\u306f\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u3084\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u304c\u4f34\u3044\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3092\u30d6\u30ed\u30c3\u30af\u305b\u305a\u306b I/O \u3092\u51e6\u7406\u3059\u308b\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3068\u3001\u305d\u308c\u3092\u52b9\u7387\u7684\u306b\u7ba1\u7406\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u30fbReactor \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"all/part-6-ch10-11-nonblocking-io/#io","title":"\u306a\u305c\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u304b","text":"\u30e2\u30c7\u30eb \u63a5\u7d9a\u3042\u305f\u308a\u306e\u30b3\u30b9\u30c8 10,000 \u63a5\u7d9a\u6642 \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 \u30b9\u30ec\u30c3\u30c9\u30d1\u30fc\u30b3\u30cd\u30af\u30b7\u30e7\u30f3 ~1MB\uff08\u30b9\u30bf\u30c3\u30af\uff09 ~10GB \u30e1\u30e2\u30ea \u4f4e\u3044 \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O ~KB\uff08\u30a4\u30d9\u30f3\u30c8\u767b\u9332\uff09 ~\u6570\u5341 MB \u9ad8\u3044 <p>\u5f93\u6765\u306e\u300c1 \u63a5\u7d9a = 1 \u30b9\u30ec\u30c3\u30c9\u300d\u30e2\u30c7\u30eb\u3067\u306f\u3001\u5927\u91cf\u306e\u540c\u6642\u63a5\u7d9a\u3092\u51e6\u7406\u3067\u304d\u307e\u305b\u3093\u3002\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u306f\u3001\u5c11\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u6570\u5343\u306e\u63a5\u7d9a\u3092\u52b9\u7387\u7684\u306b\u591a\u91cd\u5316\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-6-ch10-11-nonblocking-io/#62","title":"6.2 \u5171\u901a\u306e\u672c\u8cea","text":""},{"location":"all/part-6-ch10-11-nonblocking-io/#vs","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0","text":"<pre><code>\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O:\n  Thread \u2192 recv() \u2192 [\u30d6\u30ed\u30c3\u30af...\u30c7\u30fc\u30bf\u5230\u7740\u3092\u5f85\u3064...] \u2192 \u30c7\u30fc\u30bf\u51e6\u7406\n  \uff08\u30b9\u30ec\u30c3\u30c9\u306f\u5f85\u6a5f\u4e2d\u3082\u5360\u6709\u3055\u308c\u308b\uff09\n\n\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O:\n  Thread \u2192 recv() \u2192 [\u30c7\u30fc\u30bf\u306a\u3057: \u3059\u3050\u8fd4\u308b] \u2192 \u4ed6\u306e\u51e6\u7406\u3092\u5b9f\u884c\n                  \u2192 [\u30c7\u30fc\u30bf\u3042\u308a: \u3059\u3050\u8fd4\u308b] \u2192 \u30c7\u30fc\u30bf\u51e6\u7406\n</code></pre>"},{"location":"all/part-6-ch10-11-nonblocking-io/#reactor","title":"Reactor \u30d1\u30bf\u30fc\u30f3\u306e\u69cb\u9020","text":"<pre><code>                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n Client 1 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524                 \u251c\u2500\u2500\u2192 Handler A\n Client 2 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   Reactor       \u251c\u2500\u2500\u2192 Handler B\n Client 3 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  (Selector)     \u251c\u2500\u2500\u2192 Handler C\n Client N \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524                 \u251c\u2500\u2500\u2192 Handler D\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2191\n                    I/O Multiplexer\n                  (select/poll/epoll)\n</code></pre> <p>3 \u3064\u306e\u69cb\u6210\u8981\u7d20:</p> <ol> <li>Reactor\uff08\u30c7\u30a3\u30b9\u30d1\u30c3\u30c1\u30e3\uff09 \u2014 \u30a4\u30d9\u30f3\u30c8\u3092\u691c\u51fa\u3057\u3001\u5bfe\u5fdc\u3059\u308b\u30cf\u30f3\u30c9\u30e9\u306b\u632f\u308a\u5206\u3051\u308b</li> <li>Handler\uff08\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\uff09 \u2014 \u7279\u5b9a\u306e\u30a4\u30d9\u30f3\u30c8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u5b9f\u884c</li> <li>Multiplexer\uff08\u591a\u91cd\u5316\uff09 \u2014 OS \u30ec\u30d9\u30eb\u306e I/O \u76e3\u8996\uff08<code>select</code>, <code>poll</code>, <code>epoll</code>, <code>kqueue</code>, <code>IOCP</code>\uff09</li> </ol>"},{"location":"all/part-6-ch10-11-nonblocking-io/#_1","title":"\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb","text":"<pre><code>while running:\n    1. I/O Multiplexer \u306b\u767b\u9332\u3055\u308c\u305f\u30bd\u30b1\u30c3\u30c8\u3092\u76e3\u8996\n    2. \u6e96\u5099\u5b8c\u4e86\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\n    3. \u5404\u30a4\u30d9\u30f3\u30c8\u306b\u5bfe\u5fdc\u3059\u308b\u30cf\u30f3\u30c9\u30e9\u3092\u547c\u3073\u51fa\u3059\n    4. \u30cf\u30f3\u30c9\u30e9\u5b8c\u4e86\u5f8c\u30011 \u306b\u623b\u308b\n</code></pre>"},{"location":"all/part-6-ch10-11-nonblocking-io/#63","title":"6.3 \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"all/part-6-ch10-11-nonblocking-io/#io_1","title":"I/O \u591a\u91cd\u5316\u306e\u30e1\u30ab\u30cb\u30ba\u30e0","text":"\u8a00\u8a9e \u4f4e\u30ec\u30d9\u30eb API \u9ad8\u30ec\u30d9\u30eb API I/O \u30e2\u30c7\u30eb Python <code>select</code> / <code>selectors</code> <code>asyncio</code> Selector \u30d9\u30fc\u30b9 Java <code>Selector</code> / <code>Channel</code> (NIO) <code>CompletableFuture</code> Channel + Buffer C# <code>Socket.Select()</code> <code>async/await</code> + <code>Task</code> IOCP \u30d9\u30fc\u30b9 Scala Java NIO <code>Selector</code> <code>Future</code> JVM Channel F# .NET <code>Socket</code> <code>async { }</code> \u30ef\u30fc\u30af\u30d5\u30ed\u30fc .NET \u975e\u540c\u671f Rust <code>mio</code> (\u4f4e\u30ec\u30d9\u30eb) <code>tokio</code> (\u9ad8\u30ec\u30d9\u30eb) epoll/kqueue Haskell GHC I/O Manager <code>async</code> \u30e9\u30a4\u30d6\u30e9\u30ea Green Thread Clojure Java NIO <code>future</code> / <code>core.async</code> JVM Channel"},{"location":"all/part-6-ch10-11-nonblocking-io/#reactor_1","title":"Reactor \u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5","text":""},{"location":"all/part-6-ch10-11-nonblocking-io/#_2","title":"\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e","text":"Haskell \u5b9f\u88c5\uff08async \u30e9\u30a4\u30d6\u30e9\u30ea\uff09 <pre><code>import Control.Concurrent.Async\n\n-- \u975e\u540c\u671f I/O\nhandle &lt;- async $ readFile \"file.txt\"\ndoSomethingElse\ncontent &lt;- wait handle\n\n-- \u8907\u6570\u306e\u975e\u540c\u671f\u30bf\u30b9\u30af\u3092\u4e26\u5217\u5b9f\u884c\ndownloadAll :: [String] -&gt; IO [String]\ndownloadAll urls = mapConcurrently fetchData urls\n\n-- \u30ec\u30fc\u30b9: \u6700\u521d\u306b\u5b8c\u4e86\u3057\u305f\u65b9\u3092\u8fd4\u3059\nresult &lt;- race fetchFromServerA fetchFromServerB\n</code></pre>  **\u7279\u5fb4**:  - GHC \u30e9\u30f3\u30bf\u30a4\u30e0\u304c I/O Manager \u3067\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u7ba1\u7406 - `async` / `wait` \u3067\u660e\u793a\u7684\u306b\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3092\u66f8\u304f\u5fc5\u8981\u304c\u306a\u3044 - Green Thread \u306b\u3088\u308a\u3001\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 API \u3092\u305d\u306e\u307e\u307e\u4f7f\u3063\u3066\u3082\u5185\u90e8\u7684\u306b\u306f\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 - **\u6700\u3082\u9ad8\u3044\u62bd\u8c61\u5ea6**: \u958b\u767a\u8005\u306f\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0/\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u3092\u610f\u8b58\u3057\u306a\u3044   Clojure \u5b9f\u88c5\uff08future + promise\uff09 <pre><code>;; future: \u81ea\u52d5\u7684\u306b\u975e\u540c\u671f\u5b9f\u884c\n(def result (future\n  (Thread/sleep 1000)\n  (+ 1 2)))\n\n@result  ;; =&gt; 3\uff08\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d6\u5f97\uff09\n\n;; \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u4ed8\u304d\n(deref result 500 :timeout)\n\n;; promise: \u660e\u793a\u7684\u306b\u5024\u3092\u914d\u4fe1\n(def p (promise))\n(future\n  (Thread/sleep 100)\n  (deliver p :done))\n@p  ;; =&gt; :done\n\n;; \u8907\u6570\u306e\u975e\u540c\u671f\u30bf\u30b9\u30af\n(defn fetch-all [urls]\n  (let [futures (doall (map #(future (fetch-url %)) urls))]\n    (map deref futures)))\n</code></pre>  **\u7279\u5fb4**:  - `future` \u306f JVM \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u4e0a\u3067\u975e\u540c\u671f\u5b9f\u884c - `promise` \u306f 1 \u56de\u3060\u3051\u5024\u3092\u914d\u4fe1\u3067\u304d\u308b\u30b3\u30f3\u30c6\u30ca - `deref` \u3067\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d6\u5f97\uff08\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u30aa\u30d7\u30b7\u30e7\u30f3\u4ed8\u304d\uff09"},{"location":"all/part-6-ch10-11-nonblocking-io/#_3","title":"\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e","text":"Rust \u5b9f\u88c5\uff08tokio\uff09 <pre><code>use tokio;\nuse tokio::time::{sleep, Duration};\n\n#[tokio::main]\nasync fn main() {\n    let result = fetch_data(\"url\").await;\n    println!(\"{}\", result);\n}\n\nasync fn fetch_data(url: &amp;str) -&gt; String {\n    sleep(Duration::from_secs(1)).await;\n    format!(\"Data from {}\", url)\n}\n\n// \u8907\u6570\u30bf\u30b9\u30af\u306e\u4e26\u5217\u5b9f\u884c\nasync fn parallel_fetch() -&gt; (String, String, String) {\n    tokio::join!(\n        fetch_data(\"url1\"),\n        fetch_data(\"url2\"),\n        fetch_data(\"url3\"),\n    )\n}\n</code></pre>  **\u7279\u5fb4**:  - **tokio** \u304c\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\uff08Reactor\uff09\u3092\u63d0\u4f9b - `async fn` + `.await` \u3067\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u8a18\u8ff0 - \u5185\u90e8\u7684\u306b epoll/kqueue \u3092\u4f7f\u7528 - \u30bc\u30ed\u30b3\u30b9\u30c8 Future: \u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3\u3092\u751f\u6210   Scala \u5b9f\u88c5\uff08Java NIO \u30e9\u30c3\u30d1\u30fc\uff09 <pre><code>import java.nio.channels.{Selector, SocketChannel, SelectionKey}\n\nval selector = Selector.open()\nchannel.configureBlocking(false)\nchannel.register(selector, SelectionKey.OP_READ)\n\nwhile true do\n  selector.select()\n  val keys = selector.selectedKeys().iterator()\n  while keys.hasNext do\n    val key = keys.next()\n    keys.remove()\n    if key.isReadable then handleRead(key)\n    if key.isWritable then handleWrite(key)\n</code></pre>  **\u7279\u5fb4**: Java NIO \u3092 Scala \u306e\u5f0f\u30d9\u30fc\u30b9\u69cb\u6587\u3067\u5229\u7528\u3002   F# \u5b9f\u88c5\uff08Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\uff09 <pre><code>// \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u8aad\u307f\u53d6\u308a\nlet readFileAsync path : Async&lt;string&gt; =\n    async {\n        use reader = new StreamReader(path)\n        let! content = reader.ReadToEndAsync() |&gt; Async.AwaitTask\n        return content\n    }\n\n// \u4e26\u5217\u5b9f\u884c\nlet results =\n    [readFileAsync \"a.txt\"; readFileAsync \"b.txt\"; readFileAsync \"c.txt\"]\n    |&gt; Async.Parallel\n    |&gt; Async.RunSynchronously\n</code></pre>  **\u7279\u5fb4**:  - `async { }` \u8a08\u7b97\u5f0f\u3067\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5ba3\u8a00\u7684\u306b\u8a18\u8ff0 - `let!` \u3067\u30d0\u30a4\u30f3\u30c9\uff08\u4e2d\u65ad\u70b9\uff09 - `Async.Parallel` \u3067\u4e26\u5217\u5408\u6210 - C# \u306e `Task` \u3068\u306e\u76f8\u4e92\u904b\u7528\u304c\u53ef\u80fd"},{"location":"all/part-6-ch10-11-nonblocking-io/#oop","title":"OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u8a00\u8a9e","text":"Java \u5b9f\u88c5\uff08NIO Selector\uff09 <pre><code>Selector selector = Selector.open();\nServerSocketChannel serverChannel = ServerSocketChannel.open();\nserverChannel.configureBlocking(false);\nserverChannel.register(selector, SelectionKey.OP_ACCEPT);\n\nwhile (true) {\n    selector.select();  // \u30d6\u30ed\u30c3\u30af: \u30a4\u30d9\u30f3\u30c8\u304c\u6765\u308b\u307e\u3067\u5f85\u6a5f\n    Set&lt;SelectionKey&gt; keys = selector.selectedKeys();\n    Iterator&lt;SelectionKey&gt; iter = keys.iterator();\n\n    while (iter.hasNext()) {\n        SelectionKey key = iter.next();\n        iter.remove();\n\n        if (key.isAcceptable()) handleAccept(key);\n        if (key.isReadable()) handleRead(key);\n        if (key.isWritable()) handleWrite(key);\n    }\n}\n</code></pre>  **\u7279\u5fb4**:  - **NIO (New I/O)**: `Channel` + `Buffer` + `Selector` \u306e\u4e09\u4f4d\u4e00\u4f53 - `configureBlocking(false)` \u3067\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u30e2\u30fc\u30c9\u306b\u8a2d\u5b9a - `SelectionKey` \u304c\u30a4\u30d9\u30f3\u30c8\u7a2e\u5225\uff08`OP_ACCEPT`, `OP_READ`, `OP_WRITE`\uff09\u3092\u8868\u3059 - JDK \u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u307f\u3067\u5b9f\u88c5\u53ef\u80fd   C# \u5b9f\u88c5\uff08async/await\uff09 <pre><code>// \u8a00\u8a9e\u30ec\u30d9\u30eb\u306e\u975e\u540c\u671f\u30b5\u30dd\u30fc\u30c8\npublic async Task&lt;string&gt; FetchDataAsync(string url)\n{\n    using var client = new HttpClient();\n    return await client.GetStringAsync(url);\n}\n\n// \u8907\u6570\u306e\u975e\u540c\u671f\u30bf\u30b9\u30af\u3092\u4e26\u5217\u5b9f\u884c\nvar tasks = urls.Select(url =&gt; FetchDataAsync(url));\nvar results = await Task.WhenAll(tasks);\n</code></pre>  **\u7279\u5fb4**:  - `async` / `await` \u304c\u8a00\u8a9e\u6a5f\u80fd\u3068\u3057\u3066\u7d44\u307f\u8fbc\u307f - \u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3\u3092\u81ea\u52d5\u751f\u6210 - \u5185\u90e8\u7684\u306b IOCP (I/O Completion Ports) \u3092\u4f7f\u7528 - \u4f4e\u30ec\u30d9\u30eb\u306e Selector \u3092\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044   Python \u5b9f\u88c5\uff08Selector + Reactor\uff09 <pre><code>import selectors\n\nclass PizzaReactor:\n    def __init__(self, port):\n        self.selector = selectors.DefaultSelector()\n        self.server_socket = socket.socket()\n        self.server_socket.setblocking(False)\n        self.server_socket.bind(('', port))\n        self.server_socket.listen()\n        self.selector.register(self.server_socket, selectors.EVENT_READ, self._on_accept)\n\n    def _on_accept(self, sock):\n        conn, addr = sock.accept()\n        conn.setblocking(False)\n        self.selector.register(conn, selectors.EVENT_READ, self._on_read)\n\n    def _on_read(self, conn):\n        data = conn.recv(1024)\n        if data:\n            self.selector.modify(conn, selectors.EVENT_WRITE,\n                                 lambda c: self._on_write(c, data.decode()))\n\n    def _on_write(self, conn, message):\n        conn.send(f\"Thank you for {message}!\\n\".encode())\n        self.selector.modify(conn, selectors.EVENT_READ, self._on_read)\n\n    def run(self):\n        while True:\n            events = self.selector.select()\n            for key, mask in events:\n                callback = key.data\n                callback(key.fileobj)\n</code></pre>  **\u7279\u5fb4**:  - `selectors.DefaultSelector` \u304c OS \u6700\u9069\u306a\u591a\u91cd\u5316\u3092\u81ea\u52d5\u9078\u629e - \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u30d1\u30bf\u30fc\u30f3: `register` \u2192 `select` \u2192 \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u547c\u3073\u51fa\u3057 - \u72b6\u614b\u9077\u79fb: ACCEPT \u2192 READ \u2192 WRITE \u2192 READ \u2192 ... - \u6700\u3082\u4f4e\u30ec\u30d9\u30eb\u306a Reactor \u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5"},{"location":"all/part-6-ch10-11-nonblocking-io/#64","title":"6.4 \u6bd4\u8f03\u5206\u6790","text":""},{"location":"all/part-6-ch10-11-nonblocking-io/#_4","title":"\u62bd\u8c61\u5ea6\u306e\u30b9\u30da\u30af\u30c8\u30e9\u30e0","text":"<pre><code>\u6700\u9ad8\u30ec\u30d9\u30eb  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n            \u2502 Haskell: GHC \u304c\u81ea\u52d5\u7ba1\u7406        \u2502 \u2190 \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 API \u3067 OK\n            \u2502 C#: async/await (\u8a00\u8a9e\u6a5f\u80fd)     \u2502\n            \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u9ad8\u30ec\u30d9\u30eb    \u2502 Rust: tokio async/await        \u2502\n            \u2502 F#: async { } \u30ef\u30fc\u30af\u30d5\u30ed\u30fc      \u2502\n            \u2502 Clojure: future / core.async   \u2502\n            \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u4e2d\u30ec\u30d9\u30eb    \u2502 Java: NIO Selector + Channel   \u2502\n            \u2502 Scala: Java NIO \u30e9\u30c3\u30d1\u30fc       \u2502\n            \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u4f4e\u30ec\u30d9\u30eb    \u2502 Python: selectors + \u30b3\u30fc\u30eb\u30d0\u30c3\u30af \u2502 \u2190 \u624b\u52d5 Reactor \u5b9f\u88c5\n            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"all/part-6-ch10-11-nonblocking-io/#_5","title":"\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u306e\u5229\u70b9\u3068\u6b20\u70b9","text":"\u5229\u70b9 \u6b20\u70b9 \u30ed\u30c3\u30af\u4e0d\u8981\uff08\u5358\u4e00\u30b9\u30ec\u30c3\u30c9\u5b9f\u884c\uff09 \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5730\u7344\u306e\u30ea\u30b9\u30af \u8efd\u91cf\uff08\u63a5\u7d9a\u3042\u305f\u308a\u306e\u30e1\u30e2\u30ea\u6700\u5c0f\uff09 CPU \u30d0\u30a6\u30f3\u30c9\u51e6\u7406\u3067\u5168\u4f53\u304c\u30d6\u30ed\u30c3\u30af \u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\uff08C10K \u554f\u984c\u3092\u89e3\u6c7a\uff09 \u30c7\u30d0\u30c3\u30b0\u304c\u56f0\u96e3 \u4e88\u6e2c\u53ef\u80fd\u306a\u5b9f\u884c\u9806\u5e8f \u8907\u96d1\u306a\u72b6\u614b\u7ba1\u7406"},{"location":"all/part-6-ch10-11-nonblocking-io/#os-io","title":"OS \u30ec\u30d9\u30eb\u306e I/O \u591a\u91cd\u5316","text":"\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb OS \u7279\u5fb4 <code>select</code> \u5168 OS \u53e4\u5178\u7684\u3002FD \u6570\u306b\u4e0a\u9650\u3042\u308a\uff081024\uff09 <code>poll</code> Linux, macOS <code>select</code> \u306e\u6539\u826f\u3002FD \u6570\u5236\u9650\u306a\u3057 <code>epoll</code> Linux \u9ad8\u6027\u80fd\u3002\u30a4\u30d9\u30f3\u30c8\u901a\u77e5\u65b9\u5f0f <code>kqueue</code> macOS, BSD epoll \u76f8\u5f53\u3002macOS \u6a19\u6e96 <code>IOCP</code> Windows \u5b8c\u4e86\u901a\u77e5\u65b9\u5f0f\u3002.NET \u306e\u57fa\u76e4 <p>\u5404\u8a00\u8a9e\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u3084\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3001OS \u306b\u5fdc\u3058\u3066\u6700\u9069\u306a\u591a\u91cd\u5316\u3092\u81ea\u52d5\u9078\u629e\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-6-ch10-11-nonblocking-io/#65","title":"6.5 \u5b9f\u8df5\u7684\u306a\u9078\u629e\u6307\u91dd","text":""},{"location":"all/part-6-ch10-11-nonblocking-io/#_6","title":"\u9ad8\u8ca0\u8377\u30b5\u30fc\u30d0\u30fc\u306b\u9069\u3057\u305f\u8a00\u8a9e","text":"<p>\u6700\u3082\u9069\u3057\u3066\u3044\u308b:</p> <ul> <li>Rust (tokio) \u2014 \u30bc\u30ed\u30b3\u30b9\u30c8 async/await + epoll/kqueue \u7d71\u5408\u3002\u30e1\u30e2\u30ea\u52b9\u7387\u304c\u6700\u9ad8</li> <li>Java (NIO) \u2014 \u6210\u719f\u3057\u305f NIO \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002Netty \u306a\u3069\u306e\u5b9f\u7e3e\u3042\u308b\u30e9\u30a4\u30d6\u30e9\u30ea</li> </ul> <p>\u751f\u7523\u6027\u304c\u9ad8\u3044:</p> <ul> <li>C# \u2014 \u8a00\u8a9e\u30ec\u30d9\u30eb\u306e async/await\u3002ASP.NET \u3067\u5927\u898f\u6a21 Web \u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u7e3e</li> <li>Haskell \u2014 GHC \u304c\u81ea\u52d5\u7ba1\u7406\u3002\u958b\u767a\u8005\u306f\u975e\u540c\u671f\u3092\u610f\u8b58\u3057\u306a\u3044</li> </ul> <p>\u30d7\u30ed\u30c8\u30bf\u30a4\u30d4\u30f3\u30b0:</p> <ul> <li>Python \u2014 <code>asyncio</code> \u3067\u7d20\u65e9\u304f\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7\u3002\u305f\u3060\u3057 CPU \u30d0\u30a6\u30f3\u30c9\u306b\u306f\u4e0d\u5411\u304d</li> <li>Clojure \u2014 <code>core.async</code> \u3067 CSP \u30e2\u30c7\u30eb\u306e\u975e\u540c\u671f\u8a2d\u8a08</li> </ul>"},{"location":"all/part-6-ch10-11-nonblocking-io/#_7","title":"\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5730\u7344\u306e\u56de\u907f","text":"\u8a00\u8a9e \u89e3\u6c7a\u7b56 Python <code>asyncio</code> + <code>async/await</code>\uff08Part VII \u3067\u8a73\u8ff0\uff09 Java <code>CompletableFuture</code> \u30c1\u30a7\u30fc\u30f3 / Virtual Thread C# <code>async/await</code>\uff08\u8a00\u8a9e\u6a5f\u80fd\uff09 Rust <code>async/await</code> + <code>tokio</code> Haskell <code>do</code> \u8a18\u6cd5\uff08\u30e2\u30ca\u30c9\u5408\u6210\uff09 Clojure <code>go</code> \u30d6\u30ed\u30c3\u30af\uff08CSP \u30e2\u30c7\u30eb\uff09 Scala <code>for</code> \u5185\u5305\u8868\u8a18\uff08\u30e2\u30ca\u30c9\u5408\u6210\uff09 F# <code>async { }</code> \u8a08\u7b97\u5f0f"},{"location":"all/part-6-ch10-11-nonblocking-io/#66","title":"6.6 \u307e\u3068\u3081","text":""},{"location":"all/part-6-ch10-11-nonblocking-io/#_8","title":"\u8a00\u8a9e\u6a2a\u65ad\u7684\u306a\u5b66\u3073","text":"<ol> <li>\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u306f C10K \u554f\u984c\u306e\u89e3\u6cd5 \u2014 \u5c11\u6570\u30b9\u30ec\u30c3\u30c9\u3067\u5927\u91cf\u63a5\u7d9a\u3092\u51e6\u7406</li> <li>Reactor \u30d1\u30bf\u30fc\u30f3\u306f\u666e\u904d\u7684 \u2014 \u5168\u8a00\u8a9e\u3067\u540c\u3058\u8a2d\u8a08\u601d\u60f3\u3060\u304c\u3001\u62bd\u8c61\u5ea6\u304c\u7570\u306a\u308b</li> <li>\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u306f\u30ed\u30c3\u30af\u4e0d\u8981 \u2014 \u5358\u4e00\u30b9\u30ec\u30c3\u30c9\u5b9f\u884c\u3067\u7af6\u5408\u72b6\u614b\u3092\u56de\u907f</li> <li>\u62bd\u8c61\u5ea6\u3068\u5236\u5fa1\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5 \u2014 Haskell\uff08\u5168\u81ea\u52d5\uff09vs Python\uff08\u624b\u52d5 Reactor\uff09</li> <li>OS \u306e\u591a\u91cd\u5316 API \u304c\u57fa\u76e4 \u2014 epoll/kqueue/IOCP \u3092\u8a00\u8a9e\u30e9\u30f3\u30bf\u30a4\u30e0\u304c\u62bd\u8c61\u5316</li> </ol>"},{"location":"all/part-6-ch10-11-nonblocking-io/#_9","title":"\u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b","text":"\u8a00\u8a9e \u500b\u5225\u8a18\u4e8b Python Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O Java Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O C# Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O Scala Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O F# Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O Rust Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O Haskell Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O Clojure Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O"},{"location":"all/part-7-ch12-async/","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"all/part-7-ch12-async/#71","title":"7.1 \u306f\u3058\u3081\u306b","text":"<p>Part VI \u3067\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3057\u305f\u3002\u672c\u7ae0\u3067\u306f\u3001\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u4e2d\u6838\u3068\u306a\u308b Future/Promise\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u3001async/await \u306e\u6982\u5ff5\u3092 8 \u3064\u306e\u8a00\u8a9e\u3067\u6bd4\u8f03\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-7-ch12-async/#_1","title":"\u306a\u305c\u975e\u540c\u671f\u304b","text":"<p>\u30b9\u30ec\u30c3\u30c9\u30d9\u30fc\u30b9\u306e\u4e26\u884c\u51e6\u7406\u306f\u30e1\u30e2\u30ea\u3068\u751f\u6210\u30b3\u30b9\u30c8\u304c\u9ad8\u304f\u3001\u6570\u5343\u306e\u540c\u6642\u63a5\u7d9a\u3092\u6271\u3046\u306b\u306f\u975e\u52b9\u7387\u3067\u3059\u3002\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306f\u3001\u5c11\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u591a\u6570\u306e I/O \u64cd\u4f5c\u3092\u52b9\u7387\u7684\u306b\u591a\u91cd\u5316\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-7-ch12-async/#72","title":"7.2 \u5171\u901a\u306e\u672c\u8cea","text":""},{"location":"all/part-7-ch12-async/#3","title":"\u975e\u540c\u671f\u51e6\u7406\u306e 3 \u3064\u306e\u69cb\u6210\u8981\u7d20","text":"\u69cb\u6210\u8981\u7d20 \u8aac\u660e \u4f8b Future/Promise \u5c06\u6765\u306e\u8a08\u7b97\u7d50\u679c\u3092\u8868\u3059\u578b <code>Future&lt;T&gt;</code>, <code>Task&lt;T&gt;</code>, <code>Promise</code> \u30b3\u30eb\u30fc\u30c1\u30f3 \u4e2d\u65ad\u30fb\u518d\u958b\u53ef\u80fd\u306a\u95a2\u6570 <code>async def</code>, <code>async fn</code>, <code>go</code> \u30d6\u30ed\u30c3\u30af \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7 \u5b8c\u4e86\u3057\u305f I/O \u3092\u691c\u51fa\u3057\u3001\u5bfe\u5fdc\u3059\u308b\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u518d\u958b\u3059\u308b <code>asyncio</code>, <code>tokio</code>, GHC RTS"},{"location":"all/part-7-ch12-async/#asyncawait","title":"async/await \u306e\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9","text":"<pre><code>async function fetch():\n    result = await networkCall()   \u2190 \u3053\u3053\u3067\u4e2d\u65ad\u3001\u30b9\u30ec\u30c3\u30c9\u3092\u89e3\u653e\n    process(result)                \u2190 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5b8c\u4e86\u5f8c\u306b\u518d\u958b\n</code></pre> <p><code>await</code> \u306f\u300c\u3053\u3053\u3067\u7d50\u679c\u3092\u5f85\u3064\u304c\u3001\u30b9\u30ec\u30c3\u30c9\u3092\u30d6\u30ed\u30c3\u30af\u3057\u306a\u3044\u300d\u3068\u3044\u3046\u5ba3\u8a00\u3067\u3059\u3002</p>"},{"location":"all/part-7-ch12-async/#73","title":"7.3 \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"all/part-7-ch12-async/#asyncawait_1","title":"async/await \u306e\u30a2\u30d7\u30ed\u30fc\u30c1","text":"<p>8 \u8a00\u8a9e\u306e\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306f\u3001\u5927\u304d\u304f 4 \u3064\u306e\u30e2\u30c7\u30eb\u306b\u5206\u985e\u3067\u304d\u307e\u3059\uff1a</p> \u30e2\u30c7\u30eb \u8a00\u8a9e \u7279\u5fb4 \u8a00\u8a9e\u7d44\u307f\u8fbc\u307f async/await Python, C#, Rust \u30b3\u30f3\u30d1\u30a4\u30e9/\u30a4\u30f3\u30bf\u30d7\u30ea\u30bf\u304c\u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3\u3092\u751f\u6210 \u30e2\u30ca\u30c9\u7684\u5408\u6210 Scala, F#, Haskell <code>for</code> \u5185\u5305\u8868\u8a18\u3001\u8a08\u7b97\u5f0f\u3001<code>do</code> \u8a18\u6cd5 Virtual Thread Java JVM \u30ec\u30d9\u30eb\u306e\u8efd\u91cf\u30b9\u30ec\u30c3\u30c9 CSP (\u30c1\u30e3\u30cd\u30eb) Clojure <code>go</code> \u30d6\u30ed\u30c3\u30af + \u30c1\u30e3\u30cd\u30eb\u901a\u4fe1"},{"location":"all/part-7-ch12-async/#futurepromise","title":"Future/Promise \u306e\u578b\u8868\u73fe","text":""},{"location":"all/part-7-ch12-async/#_2","title":"\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e","text":"Haskell \u5b9f\u88c5\uff08async \u30e9\u30a4\u30d6\u30e9\u30ea\uff09 <pre><code>import Control.Concurrent.Async\n\n-- \u9010\u6b21\u5b9f\u884c\nsequential :: IO (Int, Int)\nsequential = do\n    a &lt;- computeA\n    b &lt;- computeB\n    return (a, b)\n\n-- \u4e26\u5217\u5b9f\u884c\nparallel :: IO (Int, Int)\nparallel = concurrently computeA computeB\n\n-- \u30ec\u30fc\u30b9\uff08\u6700\u521d\u306b\u5b8c\u4e86\u3057\u305f\u65b9\u3092\u8fd4\u3059\uff09\nraceExample :: IO (Either String Int)\nraceExample = race fetchFromServerA fetchFromServerB\n\n-- \u30ea\u30bd\u30fc\u30b9\u5b89\u5168\u306a\u975e\u540c\u671f\nwithAsync longRunningTask $ \\handle -&gt; do\n    result &lt;- wait handle\n    processResult result\n</code></pre>  **\u7279\u5fb4**:  - `async` / `wait` / `cancel` \u3067\u975e\u540c\u671f\u30bf\u30b9\u30af\u3092\u7ba1\u7406 - `concurrently` \u3067 2 \u3064\u306e\u30bf\u30b9\u30af\u3092\u540c\u6642\u5b9f\u884c - `race` \u3067\u6700\u521d\u306b\u5b8c\u4e86\u3057\u305f\u7d50\u679c\u3092\u53d6\u5f97 - `withAsync` \u3067\u30ea\u30bd\u30fc\u30b9\u30ea\u30fc\u30af\u9632\u6b62\uff08\u81ea\u52d5\u30ad\u30e3\u30f3\u30bb\u30eb\uff09  | \u95a2\u6570 | \u7528\u9014 | |------|------| | `async` | \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u30bf\u30b9\u30af\u958b\u59cb | | `wait` | \u7d50\u679c\u3092\u5f85\u6a5f | | `cancel` | \u30ad\u30e3\u30f3\u30bb\u30eb | | `race` | \u6700\u521d\u306e\u5b8c\u4e86 | | `concurrently` | \u4e21\u65b9\u3092\u4e26\u5217\u5b9f\u884c | | `mapConcurrently` | \u30ea\u30b9\u30c8\u4e26\u5217\u30de\u30c3\u30d7 |   Clojure \u5b9f\u88c5\uff08core.async\uff09 <pre><code>(require '[clojure.core.async :as async :refer [chan go &gt;! &lt;! &gt;!! &lt;!! alt! timeout]])\n\n;; \u30c1\u30e3\u30cd\u30eb\u4f5c\u6210\u3068\u9001\u53d7\u4fe1\n(def ch (chan 10))\n(go (&gt;! ch \"hello\"))       ;; \u975e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u9001\u4fe1\uff08go \u30d6\u30ed\u30c3\u30af\u5185\uff09\n(go (println (&lt;! ch)))     ;; \u975e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d7\u4fe1\uff08go \u30d6\u30ed\u30c3\u30af\u5185\uff09\n\n;; \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\n(go\n  (alt!\n    ch ([v] (println \"\u53d7\u4fe1:\" v))\n    (timeout 1000) (println \"\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\")))\n\n;; \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u4e26\u5217\u51e6\u7406\n(let [in (chan 10)\n      out (chan 10)]\n  (async/pipeline 4 out (map inc) in)\n  (async/onto-chan! in [1 2 3 4 5])\n  (&lt;!! (async/into [] out)))\n;; =&gt; [2 3 4 5 6]\n</code></pre>  **\u7279\u5fb4**:  - **CSP \u30e2\u30c7\u30eb**: \u30c1\u30e3\u30cd\u30eb\u3092\u4ecb\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1 - `go` \u30d6\u30ed\u30c3\u30af: \u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b\u8efd\u91cf\u30b9\u30ec\u30c3\u30c9 - `!`: go \u30d6\u30ed\u30c3\u30af\u5185\u306e\u975e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u64cd\u4f5c - `!!`: \u901a\u5e38\u30b9\u30ec\u30c3\u30c9\u306e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u64cd\u4f5c - `alt!`: \u8907\u6570\u30c1\u30e3\u30cd\u30eb\u304b\u3089\u306e\u9078\u629e\u7684\u53d7\u4fe1"},{"location":"all/part-7-ch12-async/#_3","title":"\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e","text":"Rust \u5b9f\u88c5\uff08async/await + tokio\uff09 <pre><code>// async \u95a2\u6570\u5b9a\u7fa9\nasync fn compute() -&gt; i32 {\n    42\n}\n\n// \u9010\u6b21\u5b9f\u884c\nasync fn sequential() -&gt; i32 {\n    let a = compute_a().await;\n    let b = compute_b().await;\n    a + b\n}\n\n// \u4e26\u5217\u5b9f\u884c\nasync fn parallel() -&gt; (i32, i32, i32) {\n    tokio::join!(compute_a(), compute_b(), compute_c())\n}\n\n// \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\nasync fn with_timeout() {\n    match timeout(Duration::from_secs(5), long_task()).await {\n        Ok(value) =&gt; println!(\"Got: {:?}\", value),\n        Err(_) =&gt; println!(\"Timed out\"),\n    }\n}\n\n// \u9078\u629e\u7684\u5b9f\u884c\ntokio::select! {\n    result = task_a() =&gt; println!(\"A: {:?}\", result),\n    result = task_b() =&gt; println!(\"B: {:?}\", result),\n}\n</code></pre>  **\u7279\u5fb4**:  - **\u30bc\u30ed\u30b3\u30b9\u30c8 Future**: \u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3\u3092\u751f\u6210\u3002\u30d2\u30fc\u30d7\u5272\u308a\u5f53\u3066\u306a\u3057 - **Pin**: \u81ea\u5df1\u53c2\u7167\u69cb\u9020\u4f53\u306e\u30e1\u30e2\u30ea\u5b89\u5168\u6027\u3092\u4fdd\u8a3c - `tokio::join!`: \u8907\u6570 Future \u3092\u4e26\u5217\u5b9f\u884c - `tokio::select!`: \u6700\u521d\u306b\u5b8c\u4e86\u3057\u305f Future \u3092\u51e6\u7406 - `?` \u6f14\u7b97\u5b50: \u975e\u540c\u671f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3067\u306e\u30a8\u30e9\u30fc\u4f1d\u64ad   Scala \u5b9f\u88c5\uff08Future + Promise\uff09 <pre><code>import scala.concurrent.{Future, Promise, Await}\nimport scala.concurrent.ExecutionContext.Implicits.global\nimport scala.concurrent.duration._\n\n// Future \u5408\u6210\nval f1: Future[Int] = Future(10)\nval f2: Future[Int] = Future(20)\n\n// for \u5185\u5305\u8868\u8a18\uff08\u30e2\u30ca\u30c9\u7684\u5408\u6210\uff09\nval sum: Future[Int] = for\n  a &lt;- f1\n  b &lt;- f2\nyield a + b\n\n// \u4e26\u5217\u5b9f\u884c\nval results: Future[List[String]] = Future.sequence(futures)\n\n// Promise\uff08\u66f8\u304d\u8fbc\u307f\u5074\uff09\nval promise = Promise[Int]()\nval future = promise.future\npromise.success(42)\n\n// \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\nval recovered = future.recover {\n  case _: RuntimeException =&gt; 0\n}\n</code></pre>  **\u7279\u5fb4**:  - `Future` \u306f\u8aad\u307f\u53d6\u308a\u5c02\u7528\u3001`Promise` \u306f\u66f8\u304d\u8fbc\u307f\u5074 - `for` \u5185\u5305\u8868\u8a18\u3067 `map` / `flatMap` \u3092\u81ea\u7136\u306b\u5408\u6210 - `ExecutionContext` \u304c\u6697\u9ed9\u7684\u306b\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3092\u63d0\u4f9b - `recover` / `recoverWith` \u3067\u30a8\u30e9\u30fc\u304b\u3089\u306e\u56de\u5fa9   F# \u5b9f\u88c5\uff08Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\uff09 <pre><code>// Async \u8a08\u7b97\u5f0f\nlet computation : Async&lt;int&gt; =\n    async {\n        printfn \"Starting...\"\n        do! Async.Sleep(1000)\n        printfn \"Done!\"\n        return 42\n    }\n\n// \u9010\u6b21\u5b9f\u884c\nlet sequential =\n    async {\n        let! a = computeA()\n        let! b = computeB()\n        return a + b\n    }\n\n// \u4e26\u5217\u5b9f\u884c\nlet parallel =\n    [computeA(); computeB(); computeC()]\n    |&gt; Async.Parallel\n\n// \u30ad\u30e3\u30f3\u30bb\u30eb\nlet cancellable (ct: CancellationToken) =\n    async {\n        for i in 1..100 do\n            ct.ThrowIfCancellationRequested()\n            do! Async.Sleep(100)\n    }\n\n// Task \u3068\u306e\u76f8\u4e92\u904b\u7528\nlet asyncFromTask = someTask |&gt; Async.AwaitTask\nlet taskFromAsync = someAsync |&gt; Async.StartAsTask\n</code></pre>  **\u7279\u5fb4**:  - `async { }` \u8a08\u7b97\u5f0f: `let!` \u3067\u30d0\u30a4\u30f3\u30c9\u3001`do!` \u3067\u5b9f\u884c - `Async.Parallel` \u3067\u4e26\u5217\u5408\u6210 - `CancellationToken` \u3067\u5354\u8abf\u7684\u30ad\u30e3\u30f3\u30bb\u30eb - C# `Task` \u3068\u306e\u76f8\u4e92\u904b\u7528"},{"location":"all/part-7-ch12-async/#oop","title":"OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u8a00\u8a9e","text":"Java \u5b9f\u88c5\uff08CompletableFuture + Virtual Thread\uff09 <pre><code>// CompletableFuture \u30c1\u30a7\u30fc\u30f3\nCompletableFuture.supplyAsync(() -&gt; fetchData())\n    .thenApply(data -&gt; process(data))\n    .thenAccept(result -&gt; save(result));\n\n// \u4e26\u5217\u5b9f\u884c\nCompletableFuture.allOf(future1, future2).join();\n\n// Virtual Thread\uff08Java 21+\uff09\nThread.startVirtualThread(() -&gt; {\n    // I/O \u30d0\u30a6\u30f3\u30c9\u306e\u51e6\u7406\n});\n\nvar executor = Executors.newVirtualThreadPerTaskExecutor();\n</code></pre>  **\u7279\u5fb4**:  - `CompletableFuture`: Promise \u3068 Future \u306e\u4e8c\u91cd\u306e\u5f79\u5272 - `thenApply` / `thenAccept` / `thenCompose` \u3067\u30c1\u30a7\u30fc\u30f3 - Virtual Thread: JVM \u304c\u7ba1\u7406\u3059\u308b\u8efd\u91cf\u30b9\u30ec\u30c3\u30c9\uff08\u6570\u767e\u4e07\u751f\u6210\u53ef\u80fd\uff09 - `allOf` / `anyOf` \u3067\u8907\u6570 Future \u306e\u5408\u6210  | \u9805\u76ee | Platform Thread | Virtual Thread | |------|-----------------|----------------| | \u751f\u6210\u30b3\u30b9\u30c8 | \u9ad8\u3044 | \u975e\u5e38\u306b\u4f4e\u3044 | | \u30e1\u30e2\u30ea | ~1MB | ~KB | | \u6700\u5927\u6570 | \u6570\u5343 | \u6570\u767e\u4e07 | | \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 | OS \u30b9\u30ec\u30c3\u30c9\u5360\u6709 | \u30a2\u30f3\u30de\u30a6\u30f3\u30c8 |   C# \u5b9f\u88c5\uff08async/await\uff09 <pre><code>// async/await\uff08\u8a00\u8a9e\u6a5f\u80fd\uff09\nasync Task&lt;string&gt; FetchDataAsync() {\n    var data = await httpClient.GetStringAsync(url);\n    return Process(data);\n}\n\n// \u4e26\u5217\u5b9f\u884c\nawait Task.WhenAll(task1, task2, task3);\n\n// \u6700\u521d\u306e\u5b8c\u4e86\nvar completed = await Task.WhenAny(task1, task2);\n\n// ValueTask\uff08\u6700\u9069\u5316\u7248\uff09\npublic ValueTask&lt;int&gt; GetCachedValueAsync() {\n    if (_cache.TryGetValue(key, out var value))\n        return new ValueTask&lt;int&gt;(value);\n    return new ValueTask&lt;int&gt;(FetchFromDatabaseAsync());\n}\n</code></pre>  **\u7279\u5fb4**:  - `async` / `await` \u306f\u8a00\u8a9e\u6a5f\u80fd\uff08C# 5.0+\uff09 - \u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3\u3092\u81ea\u52d5\u751f\u6210 - `Task` / `ValueTask` \u306e\u4f7f\u3044\u5206\u3051 - `ConfigureAwait(false)` \u3067\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5236\u5fa1   Python \u5b9f\u88c5\uff08asyncio\uff09 <pre><code>import asyncio\n\n# \u30b3\u30eb\u30fc\u30c1\u30f3\u5b9a\u7fa9\nasync def fetch_data(url: str) -&gt; str:\n    await asyncio.sleep(1)  # \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u9045\u5ef6\n    return f\"Data from {url}\"\n\n# \u4e26\u5217\u5b9f\u884c\nasync def main():\n    results = await asyncio.gather(\n        fetch_data(\"url1\"),\n        fetch_data(\"url2\"),\n        fetch_data(\"url3\"),\n    )\n    print(results)\n\nasyncio.run(main())\n</code></pre>  **\u7279\u5fb4**:  - `async def` \u3067\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u5b9a\u7fa9 - `await` \u3067\u4e2d\u65ad\u70b9\u3092\u5ba3\u8a00 - `asyncio.gather` \u3067\u8907\u6570\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u4e26\u5217\u5b9f\u884c - `asyncio.run` \u3067\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3092\u958b\u59cb  | API | \u7528\u9014 | |-----|------| | `asyncio.run(coro)` | \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u8d77\u52d5 | | `asyncio.create_task(coro)` | \u30bf\u30b9\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb | | `asyncio.gather(*coros)` | \u4e26\u5217\u5b9f\u884c | | `asyncio.wait(tasks)` | \u5f85\u6a5f | | `asyncio.sleep(delay)` | \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u9045\u5ef6 |"},{"location":"all/part-7-ch12-async/#74","title":"7.4 \u6bd4\u8f03\u5206\u6790","text":""},{"location":"all/part-7-ch12-async/#_4","title":"\u975e\u540c\u671f\u30e2\u30c7\u30eb\u306e\u5206\u985e","text":"\u30e2\u30c7\u30eb \u8a00\u8a9e \u5185\u90e8\u5b9f\u88c5 \u30e1\u30e2\u30ea\u52b9\u7387 \u30b9\u30bf\u30c3\u30af\u30ec\u30b9\u30b3\u30eb\u30fc\u30c1\u30f3 Rust, Python, C# \u30b3\u30f3\u30d1\u30a4\u30e9\u751f\u6210\u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3 \u6700\u9ad8 \u30b9\u30bf\u30c3\u30af\u30d5\u30eb\u30b3\u30eb\u30fc\u30c1\u30f3 Java (Virtual Thread) JVM \u7ba1\u7406\u306e\u4eee\u60f3\u30b9\u30bf\u30c3\u30af \u9ad8\u3044 \u8a08\u7b97\u5f0f/\u30e2\u30ca\u30c9 Scala, F#, Haskell \u95a2\u6570\u7684\u5408\u6210 \u9ad8\u3044 CSP \u30c1\u30e3\u30cd\u30eb Clojure go \u30d6\u30ed\u30c3\u30af + \u30c1\u30e3\u30cd\u30eb \u4e2d\u7a0b\u5ea6"},{"location":"all/part-7-ch12-async/#_5","title":"\u4e26\u5217\u5408\u6210\u306e\u69cb\u6587","text":"\u64cd\u4f5c Python Java C# Scala F# Rust Haskell Clojure \u5168\u4e26\u5217 <code>gather()</code> <code>allOf()</code> <code>WhenAll()</code> <code>sequence()</code> <code>Parallel</code> <code>join!</code> <code>concurrently</code> <code>alt!</code> \u6700\u521d\u306e\u5b8c\u4e86 <code>wait(FIRST_COMPLETED)</code> <code>anyOf()</code> <code>WhenAny()</code> <code>firstCompletedOf</code> \u2014 <code>select!</code> <code>race</code> <code>alt!</code> \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8 <code>wait_for()</code> <code>orTimeout()</code> \u30bf\u30b9\u30af+\u30bf\u30a4\u30de\u30fc <code>Await.result(_, duration)</code> <code>Async.Sleep</code> <code>timeout()</code> <code>timeout</code> <code>(timeout ms)</code> \u30a8\u30e9\u30fc\u56de\u5fa9 <code>try/except</code> <code>exceptionally()</code> <code>try/catch</code> <code>recover</code> <code>try/with</code> <code>?</code> \u6f14\u7b97\u5b50 <code>try</code> <code>try/catch</code>"},{"location":"all/part-7-ch12-async/#_6","title":"\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u5b9f\u88c5\u65b9\u5f0f","text":"<pre><code>\u30b3\u30f3\u30d1\u30a4\u30e9\u751f\u6210     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3    \u2502 Rust async fn               \u2502 \u2190 \u30bc\u30ed\u30b3\u30b9\u30c8\n                  \u2502 C# async Task               \u2502\n                  \u2502 Python async def             \u2502\n                  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\nJVM \u7ba1\u7406          \u2502 Java Virtual Thread          \u2502 \u2190 \u30b9\u30bf\u30c3\u30af\u30d5\u30eb\n                  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u95a2\u6570\u7684\u5408\u6210        \u2502 Scala Future + for           \u2502 \u2190 \u30e2\u30ca\u30c9\u7684\n                  \u2502 F# async { let! }            \u2502\n                  \u2502 Haskell IO + async           \u2502\n                  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\nCSP               \u2502 Clojure go \u30d6\u30ed\u30c3\u30af           \u2502 \u2190 \u30c1\u30e3\u30cd\u30eb\u30d9\u30fc\u30b9\n                  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"all/part-7-ch12-async/#75","title":"7.5 \u5b9f\u8df5\u7684\u306a\u9078\u629e\u6307\u91dd","text":""},{"location":"all/part-7-ch12-async/#io","title":"I/O \u30d0\u30a6\u30f3\u30c9\u51e6\u7406\u306b\u9069\u3057\u305f\u8a00\u8a9e","text":"<p>\u6700\u3082\u9069\u3057\u3066\u3044\u308b:</p> <ul> <li>Rust (tokio) \u2014 \u30bc\u30ed\u30b3\u30b9\u30c8 async/await\u3002\u30e1\u30e2\u30ea\u52b9\u7387\u304c\u6700\u9ad8</li> <li>C# \u2014 \u8a00\u8a9e\u30ec\u30d9\u30eb\u306e async/await\u3002.NET \u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u7d71\u5408</li> <li>Java (Virtual Thread) \u2014 \u65e2\u5b58\u306e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 API \u3092\u305d\u306e\u307e\u307e\u8efd\u91cf\u5316</li> </ul> <p>\u8868\u73fe\u529b\u304c\u9ad8\u3044:</p> <ul> <li>Scala \u2014 <code>for</code> \u5185\u5305\u8868\u8a18\u3067 Future \u3092\u81ea\u7136\u306b\u5408\u6210</li> <li>F# \u2014 <code>async { }</code> \u8a08\u7b97\u5f0f\u3067\u5ba3\u8a00\u7684\u306b\u8a18\u8ff0</li> <li>Haskell \u2014 <code>async</code> \u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u5b89\u5168\u306a\u4e26\u884c\u51e6\u7406</li> </ul> <p>\u30d7\u30ed\u30c8\u30bf\u30a4\u30d4\u30f3\u30b0:</p> <ul> <li>Python \u2014 <code>asyncio</code> \u3067\u7d20\u65e9\u304f\u975e\u540c\u671f\u30b5\u30fc\u30d0\u30fc\u3092\u69cb\u7bc9</li> <li>Clojure \u2014 CSP \u30e2\u30c7\u30eb\u3067\u30c1\u30e3\u30cd\u30eb\u30d9\u30fc\u30b9\u306e\u8a2d\u8a08</li> </ul>"},{"location":"all/part-7-ch12-async/#cpu-vs-io","title":"CPU \u30d0\u30a6\u30f3\u30c9 vs I/O \u30d0\u30a6\u30f3\u30c9\u306e\u4f7f\u3044\u5206\u3051","text":"\u51e6\u7406\u30bf\u30a4\u30d7 \u63a8\u5968\u30a2\u30d7\u30ed\u30fc\u30c1 \u8a00\u8a9e\u4f8b I/O \u30d0\u30a6\u30f3\u30c9 async/await, \u30b3\u30eb\u30fc\u30c1\u30f3 Python asyncio, Rust tokio, C# Task CPU \u30d0\u30a6\u30f3\u30c9 \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb, \u4e26\u5217\u30a4\u30c6\u30ec\u30fc\u30bf Rayon, parallelStream, multiprocessing \u6df7\u5408 async + \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb tokio::spawn_blocking, Task.Run"},{"location":"all/part-7-ch12-async/#76","title":"7.6 \u307e\u3068\u3081","text":""},{"location":"all/part-7-ch12-async/#_7","title":"\u8a00\u8a9e\u6a2a\u65ad\u7684\u306a\u5b66\u3073","text":"<ol> <li>async/await \u306f\u666e\u904d\u7684\u306a\u30d1\u30bf\u30fc\u30f3 \u2014 \u69cb\u6587\u306f\u7570\u306a\u308b\u304c\u3001\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\uff08\u4e2d\u65ad\u30fb\u518d\u958b\uff09\u306f\u540c\u4e00</li> <li>\u30bc\u30ed\u30b3\u30b9\u30c8 vs \u4fbf\u5229\u3055\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5 \u2014 Rust \u306e\u30bc\u30ed\u30b3\u30b9\u30c8 Future vs Python \u306e\u624b\u8efd\u3055</li> <li>\u30e2\u30ca\u30c9\u7684\u5408\u6210\u306f FP \u8a00\u8a9e\u306e\u5f37\u307f \u2014 <code>for</code> / <code>async { }</code> / <code>do</code> \u8a18\u6cd5\u3067\u81ea\u7136\u306b\u5408\u6210</li> <li>CSP \u306f\u72ec\u81ea\u306e\u30e2\u30c7\u30eb \u2014 Clojure \u306e <code>go</code> \u30d6\u30ed\u30c3\u30af + \u30c1\u30e3\u30cd\u30eb\u306f\u4ed6\u3068\u6839\u672c\u7684\u306b\u7570\u306a\u308b</li> <li>Virtual Thread \u306f\u9769\u547d\u7684 \u2014 Java 21 \u3067\u5f93\u6765\u306e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 API \u304c\u8efd\u91cf\u5316</li> </ol>"},{"location":"all/part-7-ch12-async/#_8","title":"\u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b","text":"\u8a00\u8a9e \u500b\u5225\u8a18\u4e8b Python Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Java Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 C# Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Scala Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 F# Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Rust Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Haskell Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Clojure Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0"},{"location":"all/part-8-ch13-mapreduce/","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":""},{"location":"all/part-8-ch13-mapreduce/#81","title":"8.1 \u306f\u3058\u3081\u306b","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u5927\u898f\u6a21\u30c7\u30fc\u30bf\u3092\u8907\u6570\u306e\u30d7\u30ed\u30bb\u30c3\u30b5\u3067\u52b9\u7387\u7684\u306b\u51e6\u7406\u3059\u308b MapReduce \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u3092\u984c\u6750\u306b\u30018 \u3064\u306e\u8a00\u8a9e\u304c\u305d\u308c\u305e\u308c\u3069\u306e\u3088\u3046\u306a\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30fb\u4e26\u5217\u30a4\u30c6\u30ec\u30fc\u30bf\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u304b\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002</p>"},{"location":"all/part-8-ch13-mapreduce/#mapreduce","title":"MapReduce \u3068\u306f","text":"<p>MapReduce \u306f 3 \u3064\u306e\u30d5\u30a7\u30fc\u30ba\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\uff1a</p> <pre><code>\u5165\u529b\u30c7\u30fc\u30bf \u2192 [Map] \u2192 (key, value) \u30da\u30a2 \u2192 [Shuffle] \u2192 \u30b0\u30eb\u30fc\u30d7\u5316 \u2192 [Reduce] \u2192 \u6700\u7d42\u7d50\u679c\n</code></pre> <ol> <li>Map: \u5404\u5165\u529b\u8981\u7d20\u3092 (key, value) \u30da\u30a2\u306b\u5909\u63db</li> <li>Shuffle: \u30da\u30a2\u3092\u30ad\u30fc\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d7\u5316</li> <li>Reduce: \u5404\u30b0\u30eb\u30fc\u30d7\u306e\u5024\u3092\u96c6\u7d04</li> </ol>"},{"location":"all/part-8-ch13-mapreduce/#82","title":"8.2 \u5171\u901a\u306e\u672c\u8cea","text":""},{"location":"all/part-8-ch13-mapreduce/#_1","title":"\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0","text":"<pre><code>\u5165\u529b: [\"hello world\", \"hello rust\", \"world of rust\"]\n\nMap:\n  \"hello world\" \u2192 [(\"hello\", 1), (\"world\", 1)]\n  \"hello rust\"  \u2192 [(\"hello\", 1), (\"rust\", 1)]\n  \"world of rust\" \u2192 [(\"world\", 1), (\"of\", 1), (\"rust\", 1)]\n\nShuffle:\n  \"hello\" \u2192 [1, 1]\n  \"world\" \u2192 [1, 1]\n  \"rust\"  \u2192 [1, 1]\n  \"of\"    \u2192 [1]\n\nReduce:\n  \"hello\" \u2192 2, \"world\" \u2192 2, \"rust\" \u2192 2, \"of\" \u2192 1\n</code></pre>"},{"location":"all/part-8-ch13-mapreduce/#_2","title":"\u4e26\u5217\u5316\u306e\u30dd\u30a4\u30f3\u30c8","text":"<p>Map \u30d5\u30a7\u30fc\u30ba\u306f\u6065\u305a\u304b\u3057\u3044\u307b\u3069\u4e26\u5217\uff08embarrassingly parallel\uff09\u3067\u3059\u3002\u5404\u30c6\u30ad\u30b9\u30c8\u306e\u51e6\u7406\u306f\u5b8c\u5168\u306b\u72ec\u7acb\u3057\u3066\u304a\u308a\u3001\u30ed\u30c3\u30af\u3084\u540c\u671f\u306a\u3057\u3067\u4e26\u5217\u5316\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"all/part-8-ch13-mapreduce/#83","title":"8.3 \u8a00\u8a9e\u5225\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"all/part-8-ch13-mapreduce/#map","title":"Map \u30d5\u30a7\u30fc\u30ba","text":""},{"location":"all/part-8-ch13-mapreduce/#_3","title":"\u95a2\u6570\u578b\u30d5\u30a1\u30fc\u30b9\u30c8\u8a00\u8a9e","text":"Haskell \u5b9f\u88c5 <pre><code>mapPhase :: String -&gt; [(String, Int)]\nmapPhase text = [(map toLower word, 1) | word &lt;- words text, not (null word)]\n</code></pre>  **\u7279\u5fb4**: \u30ea\u30b9\u30c8\u5185\u5305\u8868\u8a18\u3067\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3002`words` \u306f\u6a19\u6e96\u95a2\u6570\u3002   Clojure \u5b9f\u88c5 <pre><code>(defn map-phase [text]\n  (-&gt;&gt; (str/split (str/lower-case text) #\"\\s+\")\n       (filter (complement str/blank?))\n       (map (fn [word] [word 1]))))\n</code></pre>  **\u7279\u5fb4**: \u30b9\u30ec\u30c3\u30c7\u30a3\u30f3\u30b0\u30de\u30af\u30ed `-&gt;&gt;` \u3067\u30c7\u30fc\u30bf\u5909\u63db\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u8868\u73fe\u3002"},{"location":"all/part-8-ch13-mapreduce/#_4","title":"\u30de\u30eb\u30c1\u30d1\u30e9\u30c0\u30a4\u30e0\u8a00\u8a9e","text":"Rust \u5b9f\u88c5 <pre><code>pub fn map(text: &amp;str) -&gt; Vec&lt;(String, usize)&gt; {\n    text.to_lowercase()\n        .split_whitespace()\n        .filter(|s| !s.is_empty())\n        .map(|word| (word.to_string(), 1))\n        .collect()\n}\n</code></pre> Scala \u5b9f\u88c5 <pre><code>def map(text: String): List[(String, Int)] =\n  text.toLowerCase\n    .split(\"\\\\s+\")\n    .filter(_.nonEmpty)\n    .map(word =&gt; (word, 1))\n    .toList\n</code></pre> F# \u5b9f\u88c5 <pre><code>let map (text: string) : (string * int) list =\n    text.ToLower().Split([|' '; '\\t'; '\\n'|], StringSplitOptions.RemoveEmptyEntries)\n    |&gt; Array.map (fun word -&gt; (word, 1))\n    |&gt; Array.toList\n</code></pre>"},{"location":"all/part-8-ch13-mapreduce/#oop","title":"OOP + \u4e26\u884c\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u8a00\u8a9e","text":"Java \u5b9f\u88c5 <pre><code>public static List&lt;Map.Entry&lt;String, Integer&gt;&gt; map(String text) {\n    return Arrays.stream(text.toLowerCase().split(\"\\\\s+\"))\n        .map(word -&gt; Map.entry(word, 1))\n        .toList();\n}\n</code></pre> C# \u5b9f\u88c5 <pre><code>public static List&lt;KeyValuePair&lt;string, int&gt;&gt; Map(string text) {\n    return text.ToLower()\n        .Split(' ', StringSplitOptions.RemoveEmptyEntries)\n        .Select(word =&gt; new KeyValuePair&lt;string, int&gt;(word, 1))\n        .ToList();\n}\n</code></pre> Python \u5b9f\u88c5 <pre><code>def map_function(text: str) -&gt; List[Tuple[str, int]]:\n    words = text.lower().split()\n    return [(word, 1) for word in words]\n</code></pre>"},{"location":"all/part-8-ch13-mapreduce/#mapreduce_1","title":"\u4e26\u5217 MapReduce\uff08\u5168\u4f53\uff09","text":""},{"location":"all/part-8-ch13-mapreduce/#_5","title":"\u4e26\u5217\u5316\u30e1\u30ab\u30cb\u30ba\u30e0\u306e\u6bd4\u8f03","text":"\u8a00\u8a9e \u4e26\u5217\u5316 API \u7279\u5fb4 Python <code>multiprocessing.Pool.map()</code> \u30d7\u30ed\u30bb\u30b9\u30d9\u30fc\u30b9\uff08GIL \u56de\u907f\uff09 Java <code>parallelStream()</code> ForkJoinPool \u81ea\u52d5\u7ba1\u7406 C# <code>AsParallel()</code> (PLINQ) LINQ \u3068\u306e\u7d71\u5408 Scala <code>.par</code> \u30b3\u30ec\u30af\u30b7\u30e7\u30f3 \u30ef\u30f3\u30e1\u30bd\u30c3\u30c9\u3067\u4e26\u5217\u5316 F# <code>Array.Parallel.collect</code> Array \u5c02\u7528\u4e26\u5217\u30e2\u30b8\u30e5\u30fc\u30eb Rust <code>par_iter()</code> (Rayon) \u30ef\u30fc\u30af\u30b9\u30c6\u30a3\u30fc\u30ea\u30f3\u30b0 Haskell <code>mapConcurrently</code> \u975e\u540c\u671f\u4e26\u5217\u30de\u30c3\u30d7 Clojure <code>pmap</code> \u4e26\u5217\u30de\u30c3\u30d7\u95a2\u6570 Rust \u5b9f\u88c5\uff08\u5b8c\u5168\u4e26\u5217 fold/reduce\uff09 <pre><code>pub fn count_words_full_parallel(texts: &amp;[&amp;str]) -&gt; HashMap&lt;String, usize&gt; {\n    texts\n        .par_iter()\n        .flat_map(|text| map(text))\n        .fold(\n            || HashMap::new(),\n            |mut acc, (word, count)| {\n                *acc.entry(word).or_insert(0) += count;\n                acc\n            },\n        )\n        .reduce(\n            || HashMap::new(),\n            |mut a, b| {\n                for (k, v) in b {\n                    *a.entry(k).or_insert(0) += v;\n                }\n                a\n            },\n        )\n}\n</code></pre>  **\u7279\u5fb4**: Map + Reduce \u3092 `par_iter().fold().reduce()` \u3067\u4e00\u8cab\u3057\u3066\u4e26\u5217\u5b9f\u884c\u3002\u30c1\u30e3\u30f3\u30af\u5206\u5272\u3082\u81ea\u52d5\u3002   Java \u5b9f\u88c5\uff08parallelStream\uff09 <pre><code>public static Map&lt;String, Integer&gt; wordCount(List&lt;String&gt; texts) {\n    List&lt;Map.Entry&lt;String, Integer&gt;&gt; mapped = texts.parallelStream()\n        .flatMap(text -&gt; map(text).stream())\n        .toList();\n    return reduce(mapped);\n}\n\npublic static Map&lt;String, Integer&gt; reduce(List&lt;Map.Entry&lt;String, Integer&gt;&gt; pairs) {\n    return pairs.stream()\n        .collect(Collectors.groupingBy(\n            Map.Entry::getKey,\n            Collectors.summingInt(Map.Entry::getValue)\n        ));\n}\n</code></pre>  **\u7279\u5fb4**: `parallelStream()` \u3092\u547c\u3076\u3060\u3051\u3067\u4e26\u5217\u5316\u3002`Collectors` \u3067\u5ba3\u8a00\u7684\u306a\u96c6\u7d04\u3002   C# \u5b9f\u88c5\uff08PLINQ\uff09 <pre><code>public static Dictionary&lt;string, int&gt; CountWords(List&lt;string&gt; texts) {\n    var mapped = texts\n        .AsParallel()\n        .SelectMany(text =&gt; Map(text))\n        .ToList();\n    return Reduce(mapped);\n}\n</code></pre>  **\u7279\u5fb4**: `.AsParallel()` \u3092\u633f\u5165\u3059\u308b\u3060\u3051\u3067 LINQ \u30af\u30a8\u30ea\u304c\u4e26\u5217\u5316\u3002   Haskell \u5b9f\u88c5 <pre><code>countWordsParallel :: [String] -&gt; IO (Map String Int)\ncountWordsParallel [] = return Map.empty\ncountWordsParallel texts = do\n    mapped &lt;- mapConcurrently (return . mapPhase) texts\n    return $ reducePhase (concat mapped)\n</code></pre> Clojure \u5b9f\u88c5\uff08pmap\uff09 <pre><code>(defn count-words-parallel [texts]\n  (if (empty? texts)\n    {}\n    (-&gt;&gt; texts\n         (pmap map-phase)\n         (apply concat)\n         reduce-phase)))\n</code></pre>  **\u7279\u5fb4**: `map` \u3092 `pmap` \u306b\u7f6e\u304d\u63db\u3048\u308b\u3060\u3051\u3067\u4e26\u5217\u5316\u3002"},{"location":"all/part-8-ch13-mapreduce/#84","title":"8.4 \u6bd4\u8f03\u5206\u6790","text":""},{"location":"all/part-8-ch13-mapreduce/#_6","title":"\u4e26\u5217\u5316\u306e\u624b\u8efd\u3055","text":"<pre><code>\u6700\u3082\u7c21\u5358  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502 Scala: .par                  \u2502 \u2190 1 \u30e1\u30bd\u30c3\u30c9\u8ffd\u52a0\n          \u2502 C#: .AsParallel()            \u2502\n          \u2502 Clojure: map \u2192 pmap          \u2502\n          \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u624b\u8efd      \u2502 Java: stream \u2192 parallelStream \u2502\n          \u2502 Rust: iter \u2192 par_iter        \u2502\n          \u2502 F#: Array.map \u2192 Parallel.map \u2502\n          \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u3084\u3084\u8907\u96d1  \u2502 Haskell: mapConcurrently     \u2502 \u2190 IO \u30e2\u30ca\u30c9\u304c\u5fc5\u8981\n          \u2502 Python: Pool.map()           \u2502 \u2190 \u30d7\u30ed\u30bb\u30b9\u5206\u96e2\u304c\u5fc5\u8981\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"all/part-8-ch13-mapreduce/#reduce","title":"Reduce \u30d5\u30a7\u30fc\u30ba\u306e\u5b9f\u88c5","text":"\u8a00\u8a9e Reduce \u65b9\u6cd5 \u7279\u5fb4 Python <code>defaultdict(int)</code> + \u30eb\u30fc\u30d7 \u547d\u4ee4\u7684 Java <code>Collectors.groupingBy</code> + <code>summingInt</code> \u5ba3\u8a00\u7684\u30b3\u30ec\u30af\u30bf\u30fc C# <code>GroupBy</code> + <code>Sum</code> LINQ \u7d71\u5408 Scala <code>groupBy</code> + <code>mapValues</code> + <code>sum</code> \u95a2\u6570\u578b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3 F# <code>List.groupBy</code> + <code>List.sumBy</code> \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 Rust <code>HashMap.entry().or_insert()</code> Entry API Haskell <code>foldl'</code> + <code>Map.insertWith (+)</code> \u7d14\u7c8b\u95a2\u6570\u578b Clojure <code>reduce</code> + <code>update</code> + <code>fnil</code> \u95a2\u6570\u5408\u6210"},{"location":"all/part-8-ch13-mapreduce/#_7","title":"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u7279\u6027","text":"\u8a00\u8a9e \u4e26\u5217\u5316\u65b9\u5f0f \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb \u6700\u9069\u306a\u30b1\u30fc\u30b9 Python \u30d7\u30ed\u30bb\u30b9\u30d7\u30fc\u30eb OS \u30d7\u30ed\u30bb\u30b9 CPU \u30d0\u30a6\u30f3\u30c9\uff08GIL \u56de\u907f\uff09 Java ForkJoinPool \u30ef\u30fc\u30af\u30b9\u30c6\u30a3\u30fc\u30ea\u30f3\u30b0 \u6c4e\u7528\u4e26\u5217\u51e6\u7406 C# ThreadPool .NET ThreadPool LINQ \u30af\u30a8\u30ea\u4e26\u5217\u5316 Scala Fork/Join \u30ef\u30fc\u30af\u30b9\u30c6\u30a3\u30fc\u30ea\u30f3\u30b0 \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u64cd\u4f5c F# .NET ThreadPool .NET ThreadPool \u914d\u5217\u64cd\u4f5c Rust Rayon \u30ef\u30fc\u30af\u30b9\u30c6\u30a3\u30fc\u30ea\u30f3\u30b0 \u30bc\u30ed\u30b3\u30b9\u30c8\u4e26\u5217\u5316 Haskell GHC RTS Green Thread I/O \u4e26\u884c\u51e6\u7406 Clojure JVM ThreadPool \u56fa\u5b9a\u30d7\u30fc\u30eb \u95a2\u6570\u9069\u7528"},{"location":"all/part-8-ch13-mapreduce/#_8","title":"\u30a2\u30e0\u30c0\u30fc\u30eb\u306e\u6cd5\u5247","text":"<pre><code>\u9ad8\u901f\u5316\u7387 = 1 / (S + P/N)\n\nS = \u9010\u6b21\u51e6\u7406\u306e\u5272\u5408\nP = \u4e26\u5217\u5316\u53ef\u80fd\u306a\u5272\u5408 (P = 1 - S)\nN = \u30d7\u30ed\u30bb\u30c3\u30b5\u6570\n\n\u4f8b: \u9010\u6b21 10%\u3001\u4e26\u5217 90%\u30014 \u30b3\u30a2\n\u9ad8\u901f\u5316\u7387 = 1 / (0.1 + 0.9/4) = 3.08 \u500d\n</code></pre> <p>\u4e26\u5217\u5316\u53ef\u80fd\u306a\u90e8\u5206\uff08Map \u30d5\u30a7\u30fc\u30ba\uff09\u306e\u5272\u5408\u304c\u5927\u304d\u3044\u307b\u3069\u3001\u30b3\u30a2\u6570\u306b\u6bd4\u4f8b\u3057\u305f\u9ad8\u901f\u5316\u304c\u671f\u5f85\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"all/part-8-ch13-mapreduce/#85","title":"8.5 \u5b9f\u8df5\u7684\u306a\u9078\u629e\u6307\u91dd","text":""},{"location":"all/part-8-ch13-mapreduce/#_9","title":"\u5927\u898f\u6a21\u30c7\u30fc\u30bf\u51e6\u7406\u306b\u9069\u3057\u305f\u8a00\u8a9e","text":"<p>\u6700\u3082\u9069\u3057\u3066\u3044\u308b:</p> <ul> <li>Rust (Rayon) \u2014 <code>fold</code> + <code>reduce</code> \u3067 Map \u3068 Reduce \u3092\u4e00\u8cab\u3057\u3066\u4e26\u5217\u5316\u3002\u30bc\u30ed\u30b3\u30b9\u30c8\u62bd\u8c61\u5316</li> <li>Java (parallelStream) \u2014 \u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u898f\u6a21\u306e\u30c7\u30fc\u30bf\u51e6\u7406\u3002Stream API \u306e\u6210\u719f\u5ea6</li> </ul> <p>\u624b\u8efd\u3055\u91cd\u8996:</p> <ul> <li>Scala (.par) \u2014 \u30ef\u30f3\u30e1\u30bd\u30c3\u30c9\u3067\u4e26\u5217\u5316\u3002\u305f\u3060\u3057\u9806\u5e8f\u4fdd\u8a3c\u306b\u6ce8\u610f</li> <li>C# (PLINQ) \u2014 <code>.AsParallel()</code> \u3067\u65e2\u5b58 LINQ \u30af\u30a8\u30ea\u3092\u5373\u5ea7\u306b\u4e26\u5217\u5316</li> <li>Clojure (pmap) \u2014 <code>map</code> \u3092 <code>pmap</code> \u306b\u7f6e\u304d\u63db\u3048\u308b\u3060\u3051</li> </ul> <p>\u95a2\u6570\u578b\u30a2\u30d7\u30ed\u30fc\u30c1:</p> <ul> <li>Haskell \u2014 \u7d14\u7c8b\u95a2\u6570\u306f\u5b89\u5168\u306b\u4e26\u5217\u5316\u3002<code>mapConcurrently</code> \u304c\u5ba3\u8a00\u7684</li> <li>F# \u2014 <code>Array.Parallel</code> \u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u914d\u5217\u64cd\u4f5c\u3092\u4e26\u5217\u5316</li> </ul>"},{"location":"all/part-8-ch13-mapreduce/#86","title":"8.6 \u307e\u3068\u3081","text":""},{"location":"all/part-8-ch13-mapreduce/#_10","title":"\u8a00\u8a9e\u6a2a\u65ad\u7684\u306a\u5b66\u3073","text":"<ol> <li>MapReduce \u306f\u95a2\u6570\u578b\u306e\u81ea\u7136\u306a\u62e1\u5f35 \u2014 <code>map</code> + <code>reduce</code> \u3092\u4e26\u5217\u5316\u3059\u308b\u3060\u3051\u3067\u5927\u898f\u6a21\u30c7\u30fc\u30bf\u51e6\u7406\u304c\u53ef\u80fd</li> <li>\u4e26\u5217\u5316\u306e\u624b\u8efd\u3055\u306f\u8a00\u8a9e\u306e\u8a2d\u8a08\u601d\u60f3 \u2014 <code>.par</code> / <code>.AsParallel()</code> / <code>pmap</code> \u306e\u30ef\u30f3\u30e1\u30bd\u30c3\u30c9\u4e26\u5217\u5316</li> <li>Reduce \u306e\u8868\u73fe\u529b \u2014 \u5ba3\u8a00\u7684 (Java Collectors) vs \u547d\u4ee4\u7684 (Python \u30eb\u30fc\u30d7) vs \u95a2\u6570\u578b (Haskell foldl')</li> <li>\u30a2\u30e0\u30c0\u30fc\u30eb\u306e\u6cd5\u5247 \u2014 \u9010\u6b21\u90e8\u5206\u306e\u5272\u5408\u304c\u4e26\u5217\u5316\u306e\u52b9\u679c\u3092\u6c7a\u5b9a</li> </ol>"},{"location":"all/part-8-ch13-mapreduce/#_11","title":"\u5404\u8a00\u8a9e\u306e\u500b\u5225\u8a18\u4e8b","text":"\u8a00\u8a9e \u500b\u5225\u8a18\u4e8b Python Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406 Java Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406 C# Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406 Scala Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406 F# Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406 Rust Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406 Haskell Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406 Clojure Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406"},{"location":"clojure/","title":"Clojure \u3067\u5b66\u3076\u4e26\u884c\u51e6\u7406","text":""},{"location":"clojure/#_1","title":"\u6982\u8981","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u306f\u3001Clojure \u306e\u4e26\u884c\u51e6\u7406\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3066\u300cGrokking Concurrency\u300d\u306e\u6982\u5ff5\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <p>Clojure \u306f JVM \u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u95a2\u6570\u578b\u8a00\u8a9e\u3067\u3001\u4e0d\u5909\u30c7\u30fc\u30bf\u69cb\u9020\u3068\u5f37\u529b\u306a\u4e26\u884c\u51e6\u7406\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"clojure/#_2","title":"\u76ee\u6b21","text":"Part \u30bf\u30a4\u30c8\u30eb \u30c8\u30d4\u30c3\u30af Part I \u9010\u6b21\u51e6\u7406 \u57fa\u672c\u3001SHA-256 Part II \u30b9\u30ec\u30c3\u30c9 future\u3001Thread Part III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 atom\u3001\u30a4\u30d9\u30f3\u30c8\u540c\u671f Part IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001Pipeline Part V \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 STM\u3001ref\u3001dosync Part VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O future\u3001promise Part VII \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 core.async Part VIII \u5206\u6563\u4e26\u5217\u51e6\u7406 pmap\u3001MapReduce"},{"location":"clojure/#clojure_1","title":"Clojure \u306e\u4e26\u884c\u51e6\u7406\u30d7\u30ea\u30df\u30c6\u30a3\u30d6","text":""},{"location":"clojure/#1-atom","title":"1. Atom\uff08\u30a2\u30c8\u30e0\uff09","text":"<pre><code>;; CAS \u30d9\u30fc\u30b9\u306e\u5358\u4e00\u5024\u66f4\u65b0\n(def counter (atom 0))\n(swap! counter inc)    ; \u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\n(reset! counter 0)     ; \u30ea\u30bb\u30c3\u30c8\n@counter               ; \u5024\u3092\u53d6\u5f97\n</code></pre>"},{"location":"clojure/#2-ref-stm","title":"2. Ref + STM\uff08\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb\u30e1\u30e2\u30ea\uff09","text":"<pre><code>;; \u8907\u6570\u306e\u5024\u3092\u540c\u671f\u7684\u306b\u66f4\u65b0\n(def account (ref 1000))\n(dosync\n  (alter account + 100))  ; \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5185\u3067\u66f4\u65b0\n</code></pre>"},{"location":"clojure/#3-agent","title":"3. Agent\uff08\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff09","text":"<pre><code>;; \u975e\u540c\u671f\u306e\u72b6\u614b\u66f4\u65b0\n(def logger (agent []))\n(send logger conj \"message\")  ; \u975e\u540c\u671f\u3067\u66f4\u65b0\n</code></pre>"},{"location":"clojure/#4-future-promise","title":"4. Future / Promise","text":"<pre><code>;; \u975e\u540c\u671f\u8a08\u7b97\n(def result (future (expensive-computation)))\n@result  ; \u7d50\u679c\u3092\u5f85\u6a5f\n\n;; Promise\n(def p (promise))\n(deliver p :done)\n@p\n</code></pre>"},{"location":"clojure/#5-coreasync","title":"5. core.async","text":"<pre><code>(require '[clojure.core.async :refer [chan go &gt;! &lt;!]])\n\n(def ch (chan))\n(go (&gt;! ch \"hello\"))     ; \u30c1\u30e3\u30cd\u30eb\u306b\u9001\u4fe1\n(go (println (&lt;! ch)))   ; \u30c1\u30e3\u30cd\u30eb\u304b\u3089\u53d7\u4fe1\n</code></pre>"},{"location":"clojure/#_3","title":"\u74b0\u5883\u69cb\u7bc9","text":""},{"location":"clojure/#leiningen","title":"Leiningen \u30d7\u30ed\u30b8\u30a7\u30af\u30c8","text":"<pre><code>lein new app grokking-concurrency-clojure\n</code></pre>"},{"location":"clojure/#projectclj","title":"\u4f9d\u5b58\u95a2\u4fc2\uff08project.clj\uff09","text":"<pre><code>:dependencies [[org.clojure/clojure \"1.11.1\"]\n               [org.clojure/core.async \"1.6.681\"]\n               [buddy/buddy-core \"1.11.423\"]]\n</code></pre>"},{"location":"clojure/#_4","title":"\u30c6\u30b9\u30c8\u5b9f\u884c","text":"<pre><code>lein test\n</code></pre>"},{"location":"clojure/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part I \u304b\u3089\u59cb\u3081\u3066\u3001\u9010\u6b21\u51e6\u7406\u306e\u57fa\u790e\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-1/","title":"Part I: \u9010\u6b21\u51e6\u7406","text":""},{"location":"clojure/part-1/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Clojure \u306e\u57fa\u672c\u3068\u9010\u6b21\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-1/#passwordcracker","title":"PasswordCracker \u5b9f\u88c5","text":""},{"location":"clojure/part-1/#sha-256","title":"SHA-256 \u30cf\u30c3\u30b7\u30e5","text":"<pre><code>(ns grokking-concurrency.ch02.password-cracker\n  (:require [buddy.core.hash :as hash]\n            [buddy.core.codecs :as codecs]))\n\n(defn sha256\n  \"SHA256 \u30cf\u30c3\u30b7\u30e5\u3092\u8a08\u7b97\"\n  [s]\n  (-&gt; (hash/sha256 s)\n      (codecs/bytes-&gt;hex)))\n</code></pre>"},{"location":"clojure/part-1/#_2","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u751f\u6210","text":"<pre><code>(def ^:private alphabet \"abcdefghijklmnopqrstuvwxyz\")\n\n(defn generate-password\n  \"\u6570\u5024\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u304b\u3089\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\"\n  [index length]\n  (let [base (count alphabet)]\n    (loop [idx index\n           acc '()]\n      (if (= (count acc) length)\n        (apply str acc)\n        (recur (quot idx base)\n               (cons (nth alphabet (mod idx base)) acc))))))\n</code></pre>"},{"location":"clojure/part-1/#_3","title":"\u7bc4\u56f2\u691c\u7d22","text":"<pre><code>(defn crack-password-range\n  \"\u7bc4\u56f2\u5185\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u691c\u7d22\"\n  [target-hash start end length]\n  (loop [idx start]\n    (when (&lt; idx end)\n      (let [password (generate-password idx length)\n            hash (sha256 password)]\n        (if (= hash target-hash)\n          password\n          (recur (inc idx)))))))\n</code></pre>"},{"location":"clojure/part-1/#_4","title":"\u9010\u6b21\u30af\u30e9\u30c3\u30af","text":"<pre><code>(defn crack-password\n  \"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30af\u30e9\u30c3\u30af\uff08\u9010\u6b21\u51e6\u7406\uff09\"\n  [target-hash length]\n  (let [total-combinations (long (Math/pow (count alphabet) length))]\n    (crack-password-range target-hash 0 total-combinations length)))\n</code></pre>"},{"location":"clojure/part-1/#_5","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>(let [target-hash (sha256 \"aabb\")]\n  (crack-password target-hash 4))\n;; =&gt; \"aabb\"\n</code></pre>"},{"location":"clojure/part-1/#clojure","title":"Clojure \u306e\u7279\u5fb4","text":"\u7279\u5fb4 \u8aac\u660e \u4e0d\u5909\u30c7\u30fc\u30bf \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4e0d\u5909 \u9045\u5ef6\u8a55\u4fa1 lazy sequences \u30de\u30af\u30ed \u30b3\u30fc\u30c9\u751f\u6210 REPL \u5bfe\u8a71\u7684\u958b\u767a"},{"location":"clojure/part-1/#_6","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part II \u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3068\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-2/","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":""},{"location":"clojure/part-2/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Clojure \u306e\u30b9\u30ec\u30c3\u30c9\u6a5f\u80fd\u3068 future \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-2/#_2","title":"\u30b9\u30ec\u30c3\u30c9\u57fa\u790e","text":""},{"location":"clojure/part-2/#java-thread","title":"Java Thread \u306e\u4f7f\u7528","text":"<pre><code>(defn run-in-thread\n  \"\u65b0\u3057\u3044\u30b9\u30ec\u30c3\u30c9\u3067\u30bf\u30b9\u30af\u3092\u5b9f\u884c\"\n  [task]\n  (let [thread (Thread. task)]\n    (.start thread)\n    thread))\n\n;; \u4f7f\u7528\u4f8b\n(run-in-thread #(println \"Hello from thread!\"))\n</code></pre>"},{"location":"clojure/part-2/#future","title":"future","text":"<pre><code>;; \u975e\u540c\u671f\u8a08\u7b97\n(def result (future\n              (Thread/sleep 1000)\n              (+ 1 2)))\n\n;; \u7d50\u679c\u3092\u53d6\u5f97\uff08\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff09\n@result  ;; =&gt; 3\n</code></pre>"},{"location":"clojure/part-2/#_3","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30af","text":""},{"location":"clojure/part-2/#_4","title":"\u30c1\u30e3\u30f3\u30af\u5206\u5272","text":"<pre><code>(defn chunk-range\n  \"\u7bc4\u56f2\u3092\u30c1\u30e3\u30f3\u30af\u306b\u5206\u5272\"\n  [start end num-chunks]\n  (let [size (- end start)\n        chunk-size (long (Math/ceil (/ size num-chunks)))]\n    (loop [current start\n           chunks []]\n      (if (&gt;= current end)\n        chunks\n        (let [next-end (min (+ current chunk-size) end)]\n          (recur next-end (conj chunks [current next-end])))))))\n</code></pre>"},{"location":"clojure/part-2/#_5","title":"\u4e26\u5217\u30af\u30e9\u30c3\u30af","text":"<pre><code>(defn crack-password-parallel\n  \"\u4e26\u5217\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30af\u30e9\u30c3\u30af\"\n  [target-hash length num-threads]\n  (let [total-combinations (long (Math/pow 26 length))\n        chunks (chunk-range 0 total-combinations num-threads)\n        futures (doall\n                  (for [[start end] chunks]\n                    (future\n                      (crack-password-range target-hash start end length))))]\n    (some identity (map deref futures))))\n</code></pre>"},{"location":"clojure/part-2/#future_1","title":"future \u306e\u7279\u5fb4","text":"\u7279\u5fb4 \u8aac\u660e \u975e\u540c\u671f \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u5b9f\u884c \u30ad\u30e3\u30c3\u30b7\u30e5 \u7d50\u679c\u306f\u4e00\u5ea6\u3060\u3051\u8a08\u7b97 \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 deref \u3067\u7d50\u679c\u3092\u5f85\u6a5f \u4f8b\u5916 deref \u6642\u306b\u518d\u30b9\u30ed\u30fc"},{"location":"clojure/part-2/#_6","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part III \u3067\u306f\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-3/","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"clojure/part-3/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Clojure \u306e atom \u3068\u30a4\u30d9\u30f3\u30c8\u540c\u671f\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-3/#atom","title":"Atom\uff08\u30a2\u30c8\u30e0\uff09","text":"<pre><code>;; \u4f5c\u6210\n(def counter (atom 0))\n\n;; \u66f4\u65b0\n(swap! counter inc)        ;; \u95a2\u6570\u9069\u7528\n(swap! counter + 10)       ;; \u5f15\u6570\u4ed8\u304d\n(reset! counter 0)         ;; \u76f4\u63a5\u8a2d\u5b9a\n\n;; \u53d6\u5f97\n@counter  ;; \u307e\u305f\u306f (deref counter)\n</code></pre>"},{"location":"clojure/part-3/#_2","title":"\u30a4\u30d9\u30f3\u30c8\u540c\u671f","text":""},{"location":"clojure/part-3/#_3","title":"\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8","text":"<pre><code>(defn create-event\n  \"\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\"\n  []\n  {:ready (atom false)\n   :lock (Object.)})\n\n(defn signal-event!\n  \"\u30a4\u30d9\u30f3\u30c8\u3092\u30b7\u30b0\u30ca\u30eb\"\n  [event]\n  (locking (:lock event)\n    (reset! (:ready event) true)\n    (.notifyAll (:lock event))))\n\n(defn wait-event!\n  \"\u30a4\u30d9\u30f3\u30c8\u3092\u5f85\u6a5f\"\n  [event]\n  (locking (:lock event)\n    (while (not @(:ready event))\n      (.wait (:lock event)))\n    (reset! (:ready event) false)))\n</code></pre>"},{"location":"clojure/part-3/#gameloop","title":"GameLoop \u5b9f\u88c5","text":""},{"location":"clojure/part-3/#_4","title":"\u30b2\u30fc\u30e0\u72b6\u614b","text":"<pre><code>(defn create-game-state\n  \"\u30b2\u30fc\u30e0\u72b6\u614b\u3092\u4f5c\u6210\"\n  []\n  {:event-count (atom 0)\n   :rendered-count (atom 0)\n   :running (atom true)})\n\n(defn process-event! [state]\n  (swap! (:event-count state) inc))\n\n(defn render-frame! [state]\n  (swap! (:rendered-count state) inc))\n</code></pre>"},{"location":"clojure/part-3/#_5","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7","text":"<pre><code>(defn run-game-loop!\n  \"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u5b9f\u884c\"\n  [state iterations]\n  (let [processor-event (create-event)\n        renderer-event (create-event)]\n    ;; \u30a4\u30d9\u30f3\u30c8\u51e6\u7406\u30b9\u30ec\u30c3\u30c9\n    (future\n      (dotimes [_ iterations]\n        (wait-event! processor-event)\n        (process-event! state)\n        (signal-event! renderer-event)))\n    ;; \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u30b9\u30ec\u30c3\u30c9\n    (future\n      (dotimes [_ iterations]\n        (signal-event! processor-event)\n        (wait-event! renderer-event)\n        (render-frame! state)))))\n</code></pre>"},{"location":"clojure/part-3/#atom-vs-ref","title":"atom vs ref","text":"\u7279\u5fb4 atom ref \u7528\u9014 \u5358\u4e00\u5024 \u8907\u6570\u5024\u306e\u5354\u8abf\u66f4\u65b0 \u66f4\u65b0 swap!, reset! alter, ref-set \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 \u4e0d\u8981 dosync \u5fc5\u9808"},{"location":"clojure/part-3/#_6","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part IV \u3067\u306f\u3001Fork/Join \u3068 Pipeline \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-4/","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"clojure/part-4/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068 Pipeline \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-4/#forkjoin","title":"Fork/Join \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"clojure/part-4/#votecounter","title":"VoteCounter \u5b9f\u88c5","text":"<pre><code>(defn count-votes-sequential\n  \"\u9010\u6b21\u3067\u6295\u7968\u3092\u30ab\u30a6\u30f3\u30c8\"\n  [votes]\n  (reduce (fn [acc vote]\n            (update acc vote (fnil inc 0)))\n          {}\n          votes))\n\n(defn merge-counts\n  \"\u8907\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u7d50\u679c\u3092\u30de\u30fc\u30b8\"\n  [counts]\n  (reduce (fn [acc m]\n            (merge-with + acc m))\n          {}\n          counts))\n</code></pre>"},{"location":"clojure/part-4/#forkjoin_1","title":"\u4e26\u5217 Fork/Join","text":"<pre><code>(defn count-votes-parallel\n  \"\u4e26\u5217\u3067\u6295\u7968\u3092\u30ab\u30a6\u30f3\u30c8\uff08Fork/Join \u30d1\u30bf\u30fc\u30f3\uff09\"\n  [votes num-workers]\n  (if (empty? votes)\n    {}\n    (let [chunks (partition-all (max 1 (quot (count votes) num-workers)) votes)\n          futures (doall (map #(future (count-votes-sequential %)) chunks))\n          results (map deref futures)]\n      (merge-counts results))))\n</code></pre>"},{"location":"clojure/part-4/#pipeline","title":"Pipeline \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"clojure/part-4/#coreasync","title":"core.async \u3092\u4f7f\u7528","text":"<pre><code>(require '[clojure.core.async :as async :refer [chan go &gt;! &lt;! &gt;!! &lt;!!]])\n\n(defn create-pipeline\n  \"\u5165\u529b\u30922\u500d\u306b\u3059\u308b\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u4f5c\u6210\"\n  []\n  (let [input (chan 10)\n        output (chan 10)]\n    (go\n      (loop []\n        (when-let [v (&lt;! input)]\n          (&gt;! output (* v 2))\n          (recur))))\n    {:input input :output output}))\n</code></pre>"},{"location":"clojure/part-4/#_2","title":"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u64cd\u4f5c","text":"<pre><code>(defn send-to-pipeline! [pipeline value]\n  (&gt;!! (:input pipeline) value))\n\n(defn receive-from-pipeline! [pipeline]\n  (&lt;!! (:output pipeline)))\n\n;; \u4f7f\u7528\u4f8b\n(let [p (create-pipeline)]\n  (send-to-pipeline! p 5)\n  (receive-from-pipeline! p))  ;; =&gt; 10\n</code></pre>"},{"location":"clojure/part-4/#_3","title":"\u30c1\u30a7\u30fc\u30f3\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3","text":"<pre><code>(defn run-chain-pipeline\n  \"\u30c1\u30a7\u30fc\u30f3\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u5b9f\u884c\"\n  [initial-value functions]\n  (if (empty? functions)\n    initial-value\n    (let [channels (repeatedly (inc (count functions)) #(chan 1))]\n      (doseq [[in-ch out-ch f] (map vector channels (rest channels) functions)]\n        (go\n          (when-let [v (&lt;! in-ch)]\n            (&gt;! out-ch (f v)))))\n      (&gt;!! (first channels) initial-value)\n      (&lt;!! (last channels)))))\n\n;; \u4f7f\u7528\u4f8b\n(run-chain-pipeline 5 [#(* % 2) #(+ % 3) #(* % 10)])\n;; =&gt; 130  ; ((5 * 2) + 3) * 10\n</code></pre>"},{"location":"clojure/part-4/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part V \u3067\u306f\u3001STM \u306b\u3088\u308b\u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-5/","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"clojure/part-5/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Clojure \u306e STM\uff08Software Transactional Memory\uff09\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-5/#ref-dosync","title":"Ref \u3068 dosync","text":"<pre><code>;; ref \u306e\u4f5c\u6210\n(def balance (ref 1000))\n\n;; \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5185\u3067\u66f4\u65b0\n(dosync\n  (alter balance + 100))\n\n;; \u5024\u3092\u53d6\u5f97\n@balance  ;; =&gt; 1100\n</code></pre>"},{"location":"clojure/part-5/#bankaccount","title":"BankAccount \u5b9f\u88c5","text":""},{"location":"clojure/part-5/#_2","title":"\u53e3\u5ea7\u4f5c\u6210","text":"<pre><code>(defn create-account\n  \"\u9280\u884c\u53e3\u5ea7\u3092\u4f5c\u6210\"\n  [id initial-balance]\n  {:id id\n   :balance (ref initial-balance)})\n\n(defn get-id [account] (:id account))\n(defn get-balance [account] @(:balance account))\n</code></pre>"},{"location":"clojure/part-5/#_3","title":"\u5165\u51fa\u91d1","text":"<pre><code>(defn deposit!\n  \"\u5165\u91d1\"\n  [account amount]\n  (dosync\n    (alter (:balance account) + amount)))\n\n(defn withdraw!\n  \"\u51fa\u91d1\uff08\u6b8b\u9ad8\u30c1\u30a7\u30c3\u30af\u4ed8\u304d\uff09\"\n  [account amount]\n  (dosync\n    (if (&gt;= @(:balance account) amount)\n      (do\n        (alter (:balance account) - amount)\n        true)\n      false)))\n</code></pre>"},{"location":"clojure/part-5/#_4","title":"\u632f\u8fbc\uff08\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc\uff09","text":"<pre><code>(defn transfer!\n  \"\u632f\u8fbc\uff08STM \u306b\u3088\u308b\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc\uff09\"\n  [from to amount]\n  (dosync\n    (if (&gt;= @(:balance from) amount)\n      (do\n        (alter (:balance from) - amount)\n        (alter (:balance to) + amount)\n        true)\n      false)))\n</code></pre>"},{"location":"clojure/part-5/#stm","title":"STM \u306e\u7279\u5fb4","text":"\u7279\u5fb4 \u8aac\u660e \u81ea\u52d5\u30ea\u30c8\u30e9\u30a4 \u7af6\u5408\u6642\u306b\u81ea\u52d5\u7684\u306b\u30ea\u30c8\u30e9\u30a4 \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc \u30ed\u30c3\u30af\u9806\u5e8f\u306e\u554f\u984c\u306a\u3057 \u4e00\u8cab\u6027 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5185\u306f\u4e00\u8cab \u5206\u96e2\u6027 \u4ed6\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304b\u3089\u5206\u96e2"},{"location":"clojure/part-5/#_5","title":"\u4e26\u884c\u30c6\u30b9\u30c8","text":"<pre><code>(let [a1 (create-account 1 1000)\n      a2 (create-account 2 1000)\n      f1 (future (dotimes [_ 50] (transfer! a1 a2 1)))\n      f2 (future (dotimes [_ 50] (transfer! a2 a1 1)))]\n  @f1 @f2\n  (+ (get-balance a1) (get-balance a2)))\n;; =&gt; 2000\uff08\u5e38\u306b\u5408\u8a08\u91d1\u984d\u304c\u4fdd\u6301\u3055\u308c\u308b\uff09\n</code></pre>"},{"location":"clojure/part-5/#_6","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VI \u3067\u306f\u3001\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-6/","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":""},{"location":"clojure/part-6/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Clojure \u306e future \u3068 promise \u306b\u3088\u308b\u975e\u540c\u671f\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-6/#future","title":"Future","text":"<pre><code>;; \u975e\u540c\u671f\u8a08\u7b97\n(def result (future\n              (Thread/sleep 1000)\n              (+ 1 2)))\n\n;; \u7d50\u679c\u3092\u53d6\u5f97\uff08\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff09\n@result  ;; =&gt; 3\n\n;; \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u4ed8\u304d\n(deref result 500 :timeout)\n</code></pre>"},{"location":"clojure/part-6/#promise","title":"Promise","text":"<pre><code>;; Promise \u4f5c\u6210\n(def p (promise))\n\n;; \u5225\u30b9\u30ec\u30c3\u30c9\u3067\u5024\u3092\u8a2d\u5b9a\n(future\n  (Thread/sleep 100)\n  (deliver p :done))\n\n;; \u7d50\u679c\u3092\u5f85\u6a5f\n@p  ;; =&gt; :done\n</code></pre>"},{"location":"clojure/part-6/#_2","title":"\u8907\u6570\u306e\u975e\u540c\u671f\u30bf\u30b9\u30af","text":"<pre><code>(defn fetch-all [urls]\n  (let [futures (doall (map #(future (fetch-url %)) urls))]\n    (map deref futures)))\n</code></pre>"},{"location":"clojure/part-6/#_3","title":"\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u51e6\u7406","text":"<pre><code>(defn with-timeout [timeout-ms f]\n  (let [result (future (f))]\n    (deref result timeout-ms :timeout)))\n\n;; \u4f7f\u7528\u4f8b\n(with-timeout 1000 #(Thread/sleep 500))  ;; =&gt; nil\n(with-timeout 100 #(Thread/sleep 500))   ;; =&gt; :timeout\n</code></pre>"},{"location":"clojure/part-6/#future-vs-promise","title":"future vs promise","text":"\u7279\u5fb4 future promise \u8a08\u7b97\u958b\u59cb \u5373\u5ea7\u306b\u958b\u59cb deliver \u307e\u3067\u5f85\u6a5f \u5024\u306e\u8a2d\u5b9a \u5185\u90e8\u3067\u8a08\u7b97 \u5916\u90e8\u304b\u3089 deliver \u7528\u9014 \u975e\u540c\u671f\u8a08\u7b97 \u30b9\u30ec\u30c3\u30c9\u9593\u901a\u4fe1"},{"location":"clojure/part-6/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VII \u3067\u306f\u3001core.async \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-7/","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"clojure/part-7/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Clojure \u306e core.async \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a73\u3057\u304f\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-7/#_2","title":"\u30c1\u30e3\u30cd\u30eb\u57fa\u790e","text":"<pre><code>(require '[clojure.core.async :as async\n           :refer [chan go &gt;! &lt;! &gt;!! &lt;!! close!]])\n\n;; \u30c1\u30e3\u30cd\u30eb\u4f5c\u6210\n(def ch (chan))           ;; \u30d0\u30c3\u30d5\u30a1\u306a\u3057\n(def ch (chan 10))        ;; \u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba 10\n\n;; go \u30d6\u30ed\u30c3\u30af\u5185\u3067\u306e\u64cd\u4f5c\n(go (&gt;! ch \"hello\"))      ;; \u975e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u9001\u4fe1\n(go (println (&lt;! ch)))    ;; \u975e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d7\u4fe1\n\n;; \u901a\u5e38\u30b9\u30ec\u30c3\u30c9\u3067\u306e\u64cd\u4f5c\n(&gt;!! ch \"hello\")          ;; \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u9001\u4fe1\n(&lt;!! ch)                  ;; \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d7\u4fe1\n</code></pre>"},{"location":"clojure/part-7/#go","title":"go \u30d6\u30ed\u30c3\u30af","text":"<pre><code>;; \u8efd\u91cf\u30b9\u30ec\u30c3\u30c9\uff08IOC \u30b9\u30ec\u30c3\u30c9\uff09\n(go\n  (let [result (&lt;! (async/timeout 1000))]\n    (println \"1\u79d2\u7d4c\u904e\")))\n\n;; \u8907\u6570\u306e go \u30d6\u30ed\u30c3\u30af\n(let [ch (chan)]\n  (go (&gt;! ch 1))\n  (go (&gt;! ch 2))\n  (go (println \"\u53d7\u4fe1:\" (&lt;! ch) (&lt;! ch))))\n</code></pre>"},{"location":"clojure/part-7/#alt-alts","title":"alt! \u3068 alts!","text":"<pre><code>;; \u8907\u6570\u30c1\u30e3\u30cd\u30eb\u304b\u3089\u9078\u629e\n(go\n  (alt!\n    ch1 ([v] (println \"ch1 \u304b\u3089\" v))\n    ch2 ([v] (println \"ch2 \u304b\u3089\" v))\n    (async/timeout 1000) (println \"\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\")))\n</code></pre>"},{"location":"clojure/part-7/#_3","title":"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3","text":"<pre><code>;; async/pipeline\n(let [in (chan 10)\n      out (chan 10)]\n  (async/pipeline 4 out (map inc) in)\n  (async/onto-chan! in [1 2 3 4 5])\n  (&lt;!! (async/into [] out)))\n;; =&gt; [2 3 4 5 6]\n</code></pre>"},{"location":"clojure/part-7/#coreasync","title":"core.async \u95a2\u6570\u4e00\u89a7","text":"\u95a2\u6570 \u8aac\u660e chan \u30c1\u30e3\u30cd\u30eb\u4f5c\u6210 go \u8efd\u91cf\u30b9\u30ec\u30c3\u30c9 &gt;! / &lt;! go \u5185\u3067\u306e\u9001\u53d7\u4fe1 &gt;!! / &lt;!! \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u9001\u53d7\u4fe1 alt! \u8907\u6570\u30c1\u30e3\u30cd\u30eb\u9078\u629e pipeline \u4e26\u5217\u5909\u63db timeout \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u30c1\u30e3\u30cd\u30eb"},{"location":"clojure/part-7/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VIII \u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-8/","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":""},{"location":"clojure/part-8/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001pmap \u3068 MapReduce \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"clojure/part-8/#pmap-map","title":"pmap\uff08\u4e26\u5217 map\uff09","text":"<pre><code>;; \u901a\u5e38\u306e map\n(map inc [1 2 3 4 5])\n\n;; \u4e26\u5217 map\n(pmap inc [1 2 3 4 5])\n\n;; CPU \u30d0\u30a6\u30f3\u30c9\u306a\u51e6\u7406\u306b\u6709\u52b9\n(pmap expensive-computation large-collection)\n</code></pre>"},{"location":"clojure/part-8/#mapreduce","title":"MapReduce \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"clojure/part-8/#map","title":"Map \u30d5\u30a7\u30fc\u30ba","text":"<pre><code>(require '[clojure.string :as str])\n\n(defn map-phase\n  \"Map: \u30c6\u30ad\u30b9\u30c8\u3092 (word, 1) \u30da\u30a2\u306b\u5909\u63db\"\n  [text]\n  (-&gt;&gt; (str/split (str/lower-case text) #\"\\s+\")\n       (filter (complement str/blank?))\n       (map (fn [word] [word 1]))))\n</code></pre>"},{"location":"clojure/part-8/#reduce","title":"Reduce \u30d5\u30a7\u30fc\u30ba","text":"<pre><code>(defn reduce-phase\n  \"Reduce: \u30da\u30a2\u3092\u96c6\u7d04\u3057\u3066\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\"\n  [pairs]\n  (reduce (fn [acc [word count]]\n            (update acc word (fnil + 0) count))\n          {}\n          pairs))\n</code></pre>"},{"location":"clojure/part-8/#_2","title":"\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u5b9f\u88c5","text":"<pre><code>(defn count-words-sequential\n  \"\u9010\u6b21\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\"\n  [texts]\n  (-&gt;&gt; texts\n       (mapcat map-phase)\n       reduce-phase))\n\n(defn count-words-parallel\n  \"\u4e26\u5217\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8 (pmap \u306b\u3088\u308b MapReduce)\"\n  [texts]\n  (if (empty? texts)\n    {}\n    (-&gt;&gt; texts\n         (pmap map-phase)\n         (apply concat)\n         reduce-phase)))\n</code></pre>"},{"location":"clojure/part-8/#_3","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>(count-words-parallel\n  [\"hello world\" \"hello clojure\" \"world of clojure\"])\n;; =&gt; {\"hello\" 2, \"world\" 2, \"clojure\" 2, \"of\" 1}\n</code></pre>"},{"location":"clojure/part-8/#_4","title":"\u307e\u3068\u3081","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u5b66\u3093\u3060\u5185\u5bb9:</p> Part \u30c8\u30d4\u30c3\u30af \u30ad\u30fc\u30dd\u30a4\u30f3\u30c8 I \u9010\u6b21\u51e6\u7406 \u7d14\u7c8b\u95a2\u6570\u3001SHA-256 II \u30b9\u30ec\u30c3\u30c9 future\u3001Thread III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 atom\u3001\u30a4\u30d9\u30f3\u30c8\u540c\u671f IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001Pipeline V \u540c\u671f STM\u3001ref\u3001dosync VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 future\u3001promise VII \u975e\u540c\u671f core.async VIII \u5206\u6563\u51e6\u7406 pmap\u3001MapReduce"},{"location":"clojure/part-8/#_5","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Clojure Reference: Atoms</li> <li>Clojure Reference: Refs and Transactions</li> <li>core.async Guide</li> <li>Grokking Concurrency</li> </ul>"},{"location":"csharp/","title":"C# \u3067\u5b66\u3076\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"csharp/#_1","title":"\u6982\u8981","text":"<p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001Grokking Concurrency \u306e\u5185\u5bb9\u3092 C# 12 / .NET 8 \u3067\u5b9f\u88c5\u3057\u306a\u304c\u3089\u5b66\u3073\u307e\u3059\u3002TDD\uff08\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\uff09\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30b3\u30fc\u30c9\u4f8b\u3068\u3001\u8a73\u7d30\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u901a\u3058\u3066\u3001\u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e\u304b\u3089\u5fdc\u7528\u307e\u3067\u3092\u7406\u89e3\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"csharp/#_2","title":"\u76ee\u6b21","text":""},{"location":"csharp/#part-i","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":"<p>\u9010\u6b21\u51e6\u7406\u306e\u7279\u5fb4\u3068\u9650\u754c\u3092\u7406\u89e3\u3057\u3001\u306a\u305c\u4e26\u884c\u51e6\u7406\u304c\u5fc5\u8981\u304b\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part I - \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e</li> </ul>"},{"location":"csharp/#part-ii","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":"<p>OS \u30ec\u30d9\u30eb\u306e\u4e26\u884c\u51e6\u7406\u306e\u57fa\u672c\u5358\u4f4d\u3067\u3042\u308b\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9</li> </ul>"},{"location":"csharp/#part-iii","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0","text":"<p>OS \u304c\u3069\u306e\u3088\u3046\u306b\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u308b\u304b\u3001\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0</li> </ul>"},{"location":"csharp/#part-iv","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":"<p>Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3</li> </ul>"},{"location":"csharp/#part-v","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":"<p>Lock\u3001Monitor\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1</li> </ul>"},{"location":"csharp/#part-vi-io","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<p>async/await \u3092\u4f7f\u3063\u305f\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O</li> </ul>"},{"location":"csharp/#part-vii","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<p>Task \u3068 async/await \u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0</li> </ul>"},{"location":"csharp/#part-viii","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":"<p>MapReduce \u30d1\u30bf\u30fc\u30f3\u3068 PLINQ \u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406</li> </ul>"},{"location":"csharp/#_3","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<ul> <li>C# 12 (Primary Constructor, Collection Expressions)</li> <li>.NET 8 (\u30e9\u30f3\u30bf\u30a4\u30e0)</li> <li>xUnit (\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af)</li> </ul>"},{"location":"csharp/#_4","title":"\u5b9f\u884c\u65b9\u6cd5","text":""},{"location":"csharp/#_5","title":"\u30c6\u30b9\u30c8\u306e\u5b9f\u884c","text":"<pre><code>cd apps/csharp\ndotnet test\n</code></pre>"},{"location":"csharp/#_6","title":"\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e\u5b9f\u884c","text":"<pre><code>cd apps/csharp\ndotnet run --project src\n</code></pre>"},{"location":"csharp/#_7","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency - \u539f\u8457</li> <li>C# in Depth - C# \u6df1\u6398\u308a</li> <li>.NET 8 Documentation</li> </ul>"},{"location":"csharp/part-1/","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":""},{"location":"csharp/part-1/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u9010\u6b21\u51e6\u7406\u306e\u57fa\u672c\u6982\u5ff5\u3092\u7406\u89e3\u3057\u3001\u306a\u305c\u4e26\u884c\u51e6\u7406\u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u304b\u3092\u5b66\u3073\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\u306e\u4f8b\u3092\u901a\u3058\u3066\u3001\u9010\u6b21\u51e6\u7406\u306e\u9650\u754c\u3092\u4f53\u9a13\u3057\u307e\u3059\u3002</p>"},{"location":"csharp/part-1/#_2","title":"\u9010\u6b21\u51e6\u7406\u306e\u4f8b: \u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc","text":""},{"location":"csharp/part-1/#sha-256","title":"SHA-256 \u30cf\u30c3\u30b7\u30e5\u306e\u8a08\u7b97","text":"<pre><code>public static string GetCryptoHash(string password)\n{\n    var bytes = Encoding.UTF8.GetBytes(password);\n    var hash = SHA256.HashData(bytes);\n    return Convert.ToHexString(hash).ToLowerInvariant();\n}\n</code></pre>"},{"location":"csharp/part-1/#_3","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u5019\u88dc\u306e\u751f\u6210","text":"<pre><code>public static List&lt;string&gt; GetCombinations(int length, int minNumber, int maxNumber)\n{\n    var combinations = new List&lt;string&gt;();\n    var format = new string('0', length);\n\n    for (var i = minNumber; i &lt;= maxNumber; i++)\n    {\n        combinations.Add(i.ToString(format));\n    }\n\n    return combinations;\n}\n</code></pre>"},{"location":"csharp/part-1/#_4","title":"\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\u63a2\u7d22","text":"<pre><code>public static string? CrackPassword(string cryptoHash, int length)\n{\n    int maxNumber = (int)Math.Pow(10, length) - 1;\n    var combinations = GetCombinations(length, 0, maxNumber);\n\n    foreach (var combination in combinations)\n    {\n        if (CheckPassword(cryptoHash, combination))\n        {\n            return combination;\n        }\n    }\n\n    return null;\n}\n</code></pre>"},{"location":"csharp/part-1/#_5","title":"\u9010\u6b21\u51e6\u7406\u306e\u7279\u5fb4","text":"\u7279\u5fb4 \u8aac\u660e \u4e88\u6e2c\u53ef\u80fd\u6027 \u5b9f\u884c\u9806\u5e8f\u304c\u660e\u78ba \u30c7\u30d0\u30c3\u30b0\u5bb9\u6613 \u554f\u984c\u306e\u7279\u5b9a\u304c\u7c21\u5358 \u30ea\u30bd\u30fc\u30b9\u52b9\u7387 \u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u306a\u3057"},{"location":"csharp/part-1/#_6","title":"\u9010\u6b21\u51e6\u7406\u306e\u9650\u754c","text":"<ul> <li>CPU \u30d0\u30a6\u30f3\u30c9\u30bf\u30b9\u30af\u3067\u306f 1 \u30b3\u30a2\u3057\u304b\u4f7f\u7528\u3067\u304d\u306a\u3044</li> <li>I/O \u5f85\u6a5f\u4e2d\u306b CPU \u304c\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306b\u306a\u308b</li> <li>\u5927\u898f\u6a21\u30c7\u30fc\u30bf\u51e6\u7406\u306b\u6642\u9593\u304c\u304b\u304b\u308b</li> </ul>"},{"location":"csharp/part-1/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part II \u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u3063\u305f\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\u3092\u9ad8\u901f\u5316\u3057\u307e\u3059\u3002</p>"},{"location":"csharp/part-1/#_8","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>System.Security.Cryptography</li> </ul>"},{"location":"csharp/part-2/","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":""},{"location":"csharp/part-2/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001OS \u30ec\u30d9\u30eb\u306e\u4e26\u884c\u51e6\u7406\u306e\u57fa\u672c\u5358\u4f4d\u3067\u3042\u308b\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u3092\u5b66\u3073\u307e\u3059\u3002C# \u306e <code>Thread</code> \u30af\u30e9\u30b9\u3068 <code>Task</code> \u3092\u4f7f\u3063\u305f\u4e26\u5217\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"csharp/part-2/#_2","title":"\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"csharp/part-2/#_3","title":"\u30b9\u30ec\u30c3\u30c9\u306e\u4f5c\u6210","text":"<pre><code>public static Thread CreateWorkerThread(Action task)\n{\n    return new Thread(() =&gt; task());\n}\n</code></pre>"},{"location":"csharp/part-2/#_4","title":"\u8907\u6570\u30b9\u30ec\u30c3\u30c9\u306e\u4f5c\u6210","text":"<pre><code>public static List&lt;Thread&gt; CreateMultipleWorkers(int count, Action&lt;int&gt; task)\n{\n    var threads = new List&lt;Thread&gt;();\n    for (var i = 0; i &lt; count; i++)\n    {\n        var index = i;\n        var thread = new Thread(() =&gt; task(index))\n        {\n            Name = $\"Worker-{index}\"\n        };\n        threads.Add(thread);\n    }\n    return threads;\n}\n</code></pre>"},{"location":"csharp/part-2/#_5","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc","text":""},{"location":"csharp/part-2/#_6","title":"\u30c1\u30e3\u30f3\u30af\u5206\u5272","text":"<pre><code>public record ChunkRange(int Start, int End);\n\npublic static List&lt;ChunkRange&gt; GetChunks(int numChunks, int length)\n{\n    var maxNumber = (int)Math.Pow(10, length) - 1;\n    var chunkSize = (maxNumber + 1) / numChunks;\n\n    var chunks = new List&lt;ChunkRange&gt;();\n    for (var i = 0; i &lt; numChunks; i++)\n    {\n        var start = i * chunkSize;\n        var end = i == numChunks - 1 ? maxNumber : start + chunkSize - 1;\n        chunks.Add(new ChunkRange(start, end));\n    }\n    return chunks;\n}\n</code></pre>"},{"location":"csharp/part-2/#_7","title":"\u4e26\u5217\u51e6\u7406","text":"<pre><code>public static string? CrackPasswordParallel(string cryptoHash, int length)\n{\n    var numCores = Environment.ProcessorCount;\n    var chunks = GetChunks(numCores, length);\n\n    using var cts = new CancellationTokenSource();\n    var tasks = chunks.Select(chunk =&gt;\n        Task.Run(() =&gt; CrackChunk(cryptoHash, length, chunk.Start, chunk.End), cts.Token)\n    ).ToArray();\n\n    // \u6700\u521d\u306b\u898b\u3064\u304b\u3063\u305f\u7d50\u679c\u3092\u8fd4\u3059\n    while (tasks.Any(t =&gt; !t.IsCompleted))\n    {\n        var completedTask = Task.WhenAny(tasks).Result;\n        if (completedTask.Result != null)\n        {\n            cts.Cancel();\n            return completedTask.Result;\n        }\n    }\n    return null;\n}\n</code></pre>"},{"location":"csharp/part-2/#_8","title":"\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u306e\u9055\u3044","text":"\u7279\u6027 \u30d7\u30ed\u30bb\u30b9 \u30b9\u30ec\u30c3\u30c9 \u30e1\u30e2\u30ea\u7a7a\u9593 \u72ec\u7acb \u5171\u6709 \u4f5c\u6210\u30b3\u30b9\u30c8 \u9ad8\u3044 \u4f4e\u3044 \u901a\u4fe1 IPC \u5fc5\u8981 \u76f4\u63a5\u5171\u6709 \u5206\u96e2\u6027 \u9ad8\u3044 \u4f4e\u3044"},{"location":"csharp/part-2/#_9","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part III \u3067\u306f\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"csharp/part-2/#_10","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>System.Threading.Thread</li> <li>Task Parallel Library</li> </ul>"},{"location":"csharp/part-3/","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"csharp/part-3/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001OS \u304c\u3069\u306e\u3088\u3046\u306b\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u308b\u304b\u3001\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092\u5b66\u3073\u307e\u3059\u3002\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u306e\u4f8b\u3092\u901a\u3058\u3066\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"csharp/part-3/#_2","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u306e\u4f8b","text":""},{"location":"csharp/part-3/#_3","title":"\u30bf\u30b9\u30af\u306e\u5b9a\u7fa9","text":"<pre><code>public record GameTask(string Name, Action Action)\n{\n    public void Run() =&gt; Action();\n}\n</code></pre>"},{"location":"csharp/part-3/#_4","title":"\u30a4\u30d9\u30f3\u30c8\u306b\u3088\u308b\u8abf\u6574","text":"<pre><code>public class ProcessorFreeEvent\n{\n    private readonly object _lock = new();\n    private bool _signaled;\n\n    public void WaitForSignal()\n    {\n        lock (_lock)\n        {\n            while (!_signaled)\n            {\n                Monitor.Wait(_lock);\n            }\n            _signaled = false;\n        }\n    }\n\n    public void Signal()\n    {\n        lock (_lock)\n        {\n            _signaled = true;\n            Monitor.Pulse(_lock);\n        }\n    }\n}\n</code></pre>"},{"location":"csharp/part-3/#_5","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7","text":"<pre><code>public class GameLoop(\n    Action inputTask,\n    Action computeTask,\n    Action renderTask,\n    Func&lt;bool&gt; continueCondition)\n{\n    public void Run()\n    {\n        while (continueCondition())\n        {\n            inputTask();\n            computeTask();\n            renderTask();\n        }\n    }\n}\n</code></pre>"},{"location":"csharp/part-3/#_6","title":"\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u65b9\u5f0f","text":"\u65b9\u5f0f \u8aac\u660e \u5354\u8abf\u7684 \u30bf\u30b9\u30af\u304c\u81ea\u767a\u7684\u306b\u5236\u5fa1\u3092\u8b72\u308b \u5148\u5236\u7684 OS \u304c\u30bf\u30a4\u30e0\u30b9\u30e9\u30a4\u30b9\u3067\u5207\u308a\u66ff\u3048"},{"location":"csharp/part-3/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part IV \u3067\u306f\u3001Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"csharp/part-3/#_8","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>System.Threading.Monitor</li> </ul>"},{"location":"csharp/part-4/","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"csharp/part-4/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002\u6295\u7968\u96c6\u8a08\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u51e6\u7406\u306e\u4f8b\u3092\u901a\u3058\u3066\u3001\u4e26\u5217\u30d1\u30bf\u30fc\u30f3\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"csharp/part-4/#forkjoin","title":"Fork/Join \u30d1\u30bf\u30fc\u30f3: \u6295\u7968\u96c6\u8a08","text":""},{"location":"csharp/part-4/#_2","title":"\u9010\u6b21\u51e6\u7406","text":"<pre><code>public static Dictionary&lt;int, int&gt; CountVotes(List&lt;int&gt; votes)\n{\n    var result = new Dictionary&lt;int, int&gt;();\n    foreach (var vote in votes)\n    {\n        if (result.ContainsKey(vote))\n            result[vote]++;\n        else\n            result[vote] = 1;\n    }\n    return result;\n}\n</code></pre>"},{"location":"csharp/part-4/#_3","title":"\u4e26\u5217\u51e6\u7406","text":"<pre><code>public static Dictionary&lt;int, int&gt; CountVotesParallel(List&lt;int&gt; votes, int numWorkers)\n{\n    var chunkSize = (int)Math.Ceiling((double)votes.Count / numWorkers);\n    var chunks = new List&lt;List&lt;int&gt;&gt;();\n\n    for (var i = 0; i &lt; votes.Count; i += chunkSize)\n    {\n        chunks.Add(votes.GetRange(i, Math.Min(chunkSize, votes.Count - i)));\n    }\n\n    // Fork\n    var tasks = chunks.Select(chunk =&gt;\n        Task.Run(() =&gt; CountVotes(chunk))\n    ).ToArray();\n\n    // Join\n    Task.WaitAll(tasks);\n    return tasks.Aggregate(new Dictionary&lt;int, int&gt;(),\n        (acc, t) =&gt; MergeResults(acc, t.Result));\n}\n</code></pre>"},{"location":"csharp/part-4/#_4","title":"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"csharp/part-4/#_5","title":"\u30b9\u30c6\u30fc\u30b8\u30ef\u30fc\u30ab\u30fc","text":"<pre><code>public class Pipeline&lt;T&gt;\n{\n    public void AddStage(string name, Func&lt;object, object&gt; processor) { ... }\n    public void Start() { ... }\n    public void Submit(T item) { ... }\n    public void Stop() { ... }\n}\n</code></pre>"},{"location":"csharp/part-4/#_6","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>var pipeline = new Pipeline&lt;string&gt;();\npipeline.AddStage(\"wash\", item =&gt; \"washed:\" + item);\npipeline.AddStage(\"dry\", item =&gt; \"dried:\" + item);\npipeline.AddStage(\"fold\", item =&gt; \"folded:\" + item);\n\npipeline.Start();\npipeline.Submit(\"load1\");\npipeline.Stop();\n</code></pre>"},{"location":"csharp/part-4/#_7","title":"\u30d1\u30bf\u30fc\u30f3\u306e\u6bd4\u8f03","text":"\u30d1\u30bf\u30fc\u30f3 \u7528\u9014 Fork/Join \u30c7\u30fc\u30bf\u4e26\u5217\u51e6\u7406 Pipeline \u30b9\u30c6\u30fc\u30b8\u4e26\u5217\u51e6\u7406"},{"location":"csharp/part-4/#_8","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part V \u3067\u306f\u3001\u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"csharp/part-4/#_9","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Task Parallel Library</li> <li>BlockingCollection</li> </ul>"},{"location":"csharp/part-5/","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"csharp/part-5/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Lock \u3068 Monitor \u3092\u4f7f\u3063\u305f\u540c\u671f\u3092\u5b66\u3073\u307e\u3059\u3002\u9280\u884c\u53e3\u5ea7\u306e\u4f8b\u3092\u901a\u3058\u3066\u3001\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306a\u5b9f\u88c5\u3068\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"csharp/part-5/#_2","title":"\u9280\u884c\u53e3\u5ea7\u306e\u4f8b","text":""},{"location":"csharp/part-5/#lock","title":"lock \u3092\u4f7f\u3063\u305f\u5b9f\u88c5","text":"<pre><code>public class BankAccount\n{\n    private readonly object _lock = new();\n    private int _balance;\n\n    public void Deposit(int amount)\n    {\n        lock (_lock)\n        {\n            _balance += amount;\n        }\n    }\n\n    public bool Withdraw(int amount)\n    {\n        lock (_lock)\n        {\n            if (_balance &gt;= amount)\n            {\n                _balance -= amount;\n                return true;\n            }\n            return false;\n        }\n    }\n}\n</code></pre>"},{"location":"csharp/part-5/#_3","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f","text":"<pre><code>public static bool Transfer(BankAccount from, BankAccount to, int amount)\n{\n    // \u5e38\u306b\u540c\u3058\u9806\u5e8f\u3067\u30ed\u30c3\u30af\u3092\u53d6\u5f97\n    var first = RuntimeHelpers.GetHashCode(from) &lt; RuntimeHelpers.GetHashCode(to) ? from : to;\n    var second = first == from ? to : from;\n\n    lock (first._lock)\n    {\n        lock (second._lock)\n        {\n            if (from._balance &gt;= amount)\n            {\n                from._balance -= amount;\n                to._balance += amount;\n                return true;\n            }\n            return false;\n        }\n    }\n}\n</code></pre>"},{"location":"csharp/part-5/#_4","title":"\u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6","text":"\u30d7\u30ea\u30df\u30c6\u30a3\u30d6 \u7528\u9014 <code>lock</code> \u6392\u4ed6\u5236\u5fa1 <code>Monitor</code> \u6761\u4ef6\u5909\u6570 <code>SemaphoreSlim</code> \u30ea\u30bd\u30fc\u30b9\u6570\u5236\u9650 <code>ReaderWriterLockSlim</code> \u8aad\u307f\u66f8\u304d\u30ed\u30c3\u30af"},{"location":"csharp/part-5/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VI \u3067\u306f\u3001\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"csharp/part-5/#_6","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>lock \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8</li> <li>System.Threading.Monitor</li> </ul>"},{"location":"csharp/part-6/","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":""},{"location":"csharp/part-6/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001C# \u306e async/await \u3092\u4f7f\u3063\u305f\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"csharp/part-6/#asyncawait","title":"async/await \u306e\u57fa\u672c","text":""},{"location":"csharp/part-6/#_2","title":"\u975e\u540c\u671f\u30e1\u30bd\u30c3\u30c9","text":"<pre><code>public async Task&lt;string&gt; FetchDataAsync(string url)\n{\n    using var client = new HttpClient();\n    return await client.GetStringAsync(url);\n}\n</code></pre>"},{"location":"csharp/part-6/#_3","title":"\u8907\u6570\u306e\u975e\u540c\u671f\u64cd\u4f5c","text":"<pre><code>public async Task&lt;string[]&gt; FetchMultipleAsync(string[] urls)\n{\n    var tasks = urls.Select(url =&gt; FetchDataAsync(url));\n    return await Task.WhenAll(tasks);\n}\n</code></pre>"},{"location":"csharp/part-6/#vs","title":"\u540c\u671f vs \u975e\u540c\u671f","text":"\u7279\u6027 \u540c\u671f \u975e\u540c\u671f \u30b9\u30ec\u30c3\u30c9 \u30d6\u30ed\u30c3\u30af \u89e3\u653e \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 \u4f4e \u9ad8 \u30b3\u30fc\u30c9\u8907\u96d1\u5ea6 \u4f4e \u3084\u3084\u9ad8"},{"location":"csharp/part-6/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VII \u3067\u306f\u3001Task \u3068\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u6df1\u304f\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"csharp/part-6/#_5","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>async/await</li> </ul>"},{"location":"csharp/part-7/","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"csharp/part-7/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001C# \u306e Task \u3068 async/await \u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"csharp/part-7/#task","title":"Task \u306e\u57fa\u672c","text":""},{"location":"csharp/part-7/#task_1","title":"Task \u306e\u4f5c\u6210","text":"<pre><code>var task = Task.Run(() =&gt; {\n    // \u975e\u540c\u671f\u51e6\u7406\n    return \"Result\";\n});\n\nstring result = await task;\n</code></pre>"},{"location":"csharp/part-7/#_2","title":"\u30c1\u30a7\u30fc\u30f3\u51e6\u7406","text":"<pre><code>var result = await Task.Run(() =&gt; FetchData())\n    .ContinueWith(t =&gt; Process(t.Result))\n    .ContinueWith(t =&gt; Save(t.Result));\n</code></pre>"},{"location":"csharp/part-7/#_3","title":"\u4e26\u884c\u5b9f\u884c","text":"<pre><code>var task1 = Task.Run(() =&gt; FetchData1());\nvar task2 = Task.Run(() =&gt; FetchData2());\n\nawait Task.WhenAll(task1, task2);\n</code></pre>"},{"location":"csharp/part-7/#valuetask","title":"ValueTask","text":"<pre><code>public ValueTask&lt;int&gt; GetCachedValueAsync()\n{\n    if (_cache.TryGetValue(key, out var value))\n        return new ValueTask&lt;int&gt;(value);\n\n    return new ValueTask&lt;int&gt;(FetchFromDatabaseAsync());\n}\n</code></pre>"},{"location":"csharp/part-7/#_4","title":"\u4f7f\u3044\u5206\u3051\u306e\u6307\u91dd","text":"\u30b7\u30ca\u30ea\u30aa \u63a8\u5968 I/O \u30d0\u30a6\u30f3\u30c9 async/await CPU \u30d0\u30a6\u30f3\u30c9 Task.Run / Parallel \u6df7\u5408 async/await + Task.Run"},{"location":"csharp/part-7/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VIII \u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068 PLINQ \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"csharp/part-7/#_6","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Task</li> <li>ValueTask</li> </ul>"},{"location":"csharp/part-8/","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":""},{"location":"csharp/part-8/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068 PLINQ \u3092\u4f7f\u3063\u305f\u5206\u6563\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"csharp/part-8/#mapreduce","title":"MapReduce \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"csharp/part-8/#_2","title":"\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u306e\u4f8b","text":"<pre><code>public static class WordCount\n{\n    // Map: \u30c6\u30ad\u30b9\u30c8\u3092 (word, 1) \u306e\u30da\u30a2\u306b\u5909\u63db\n    public static List&lt;KeyValuePair&lt;string, int&gt;&gt; Map(string text)\n    {\n        return text.ToLower()\n            .Split(' ', StringSplitOptions.RemoveEmptyEntries)\n            .Select(word =&gt; new KeyValuePair&lt;string, int&gt;(word, 1))\n            .ToList();\n    }\n\n    // Reduce: \u540c\u3058\u5358\u8a9e\u306e\u30ab\u30a6\u30f3\u30c8\u3092\u96c6\u7d04\n    public static Dictionary&lt;string, int&gt; Reduce(List&lt;KeyValuePair&lt;string, int&gt;&gt; pairs)\n    {\n        return pairs\n            .GroupBy(p =&gt; p.Key)\n            .ToDictionary(g =&gt; g.Key, g =&gt; g.Sum(p =&gt; p.Value));\n    }\n\n    // MapReduce\n    public static Dictionary&lt;string, int&gt; CountWords(List&lt;string&gt; texts)\n    {\n        // Map \u30d5\u30a7\u30fc\u30ba\uff08\u4e26\u5217\uff09\n        var mapped = texts\n            .AsParallel()\n            .SelectMany(text =&gt; Map(text))\n            .ToList();\n\n        // Reduce \u30d5\u30a7\u30fc\u30ba\n        return Reduce(mapped);\n    }\n}\n</code></pre>"},{"location":"csharp/part-8/#plinq","title":"PLINQ","text":"<pre><code>var result = data\n    .AsParallel()\n    .Where(x =&gt; x &gt; 0)\n    .Select(x =&gt; x * 2)\n    .ToList();\n</code></pre>"},{"location":"csharp/part-8/#_3","title":"\u307e\u3068\u3081","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u5b66\u3093\u3060\u5185\u5bb9:</p> Part \u30c8\u30d4\u30c3\u30af \u30ad\u30fc\u30dd\u30a4\u30f3\u30c8 I \u9010\u6b21\u51e6\u7406 \u57fa\u672c\u6982\u5ff5 II \u30b9\u30ec\u30c3\u30c9 Thread, Task III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30b2\u30fc\u30e0\u30eb\u30fc\u30d7 IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join, Pipeline V \u540c\u671f lock, Monitor VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 async/await VII \u975e\u540c\u671f Task VIII \u5206\u6563\u51e6\u7406 MapReduce, PLINQ"},{"location":"csharp/part-8/#_4","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>PLINQ</li> <li>Grokking Concurrency</li> </ul>"},{"location":"fsharp/","title":"F# \u3067\u5b66\u3076\u4e26\u884c\u51e6\u7406","text":""},{"location":"fsharp/#_1","title":"\u6982\u8981","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u306f\u3001F# \u3092\u4f7f\u7528\u3057\u3066\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u57fa\u790e\u304b\u3089\u5fdc\u7528\u307e\u3067\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/#_2","title":"\u76ee\u6b21","text":"Part \u30c8\u30d4\u30c3\u30af \u5185\u5bb9 Part I \u9010\u6b21\u51e6\u7406 \u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 Part II \u30b9\u30ec\u30c3\u30c9 Thread\u3001Async\u3001\u4e26\u5217\u5b9f\u884c Part III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3001\u30bf\u30b9\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0 Part IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 Part V \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 lock\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f Part VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O Async Part VII \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc Part VIII \u5206\u6563\u4e26\u5217\u51e6\u7406 MapReduce\u3001Array.Parallel"},{"location":"fsharp/#_3","title":"\u74b0\u5883\u8a2d\u5b9a","text":""},{"location":"fsharp/#_4","title":"\u5fc5\u8981\u306a\u30c4\u30fc\u30eb","text":"<ul> <li>.NET 8.0 SDK</li> <li>F# 8.0</li> </ul>"},{"location":"fsharp/#_5","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210","text":"<pre><code>apps/fsharp/\n\u251c\u2500\u2500 GrokkingConcurrency.FSharp.sln\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 Ch02/    # Part I\n\u2502   \u251c\u2500\u2500 Ch04/    # Part II\n\u2502   \u251c\u2500\u2500 Ch05/    # Part II\n\u2502   \u251c\u2500\u2500 Ch06/    # Part III\n\u2502   \u251c\u2500\u2500 Ch07/    # Part IV\n\u2502   \u251c\u2500\u2500 Ch08/    # Part V\n\u2502   \u2514\u2500\u2500 Ch13/    # Part VIII\n\u2514\u2500\u2500 tests/\n</code></pre>"},{"location":"fsharp/#_6","title":"\u30d3\u30eb\u30c9\u3068\u5b9f\u884c","text":"<pre><code>cd apps/fsharp\ndotnet build    # \u30d3\u30eb\u30c9\ndotnet test     # \u30c6\u30b9\u30c8\u5b9f\u884c\n</code></pre>"},{"location":"fsharp/#_7","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency</li> <li>F# Documentation</li> <li>F# Async Programming</li> </ul>"},{"location":"fsharp/part-1/","title":"Part I: \u9010\u6b21\u51e6\u7406","text":""},{"location":"fsharp/part-1/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3092\u4f8b\u306b\u9010\u6b21\u51e6\u7406\u306e\u57fa\u790e\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-1/#_2","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\u306e\u5b9f\u88c5","text":""},{"location":"fsharp/part-1/#_3","title":"\u7d44\u307f\u5408\u308f\u305b\u751f\u6210","text":"<pre><code>module PasswordCracker =\n    let private letters = \"abcdefghijklmnopqrstuvwxyz\"\n\n    /// Generate all combinations of lowercase letters of the given length\n    let getCombinations (length: int) : string list =\n        let rec generate (current: string list) (remaining: int) : string list =\n            if remaining = 0 then\n                current\n            else\n                let next =\n                    [ for prefix in current do\n                      for letter in letters do\n                          yield prefix + string letter ]\n                generate next (remaining - 1)\n        generate [\"\"] length\n</code></pre>"},{"location":"fsharp/part-1/#_4","title":"\u30cf\u30c3\u30b7\u30e5\u8a08\u7b97","text":"<pre><code>open System.Security.Cryptography\nopen System.Text\n\n/// Calculate SHA-256 hash of the given password\nlet getCryptoHash (password: string) : string =\n    let bytes = Encoding.UTF8.GetBytes(password)\n    let hash = SHA256.HashData(bytes)\n    hash |&gt; Array.map (fun b -&gt; sprintf \"%02x\" b) |&gt; String.concat \"\"\n</code></pre>"},{"location":"fsharp/part-1/#_5","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u89e3\u6790","text":"<pre><code>/// Check if the password matches the given hash\nlet checkPassword (password: string) (cryptoHash: string) : bool =\n    getCryptoHash password = cryptoHash\n\n/// Crack password by brute force\nlet crackPassword (cryptoHash: string) (length: int) : string option =\n    getCombinations length\n    |&gt; List.tryFind (fun p -&gt; checkPassword p cryptoHash)\n</code></pre>"},{"location":"fsharp/part-1/#f","title":"F# \u306e\u7279\u5fb4","text":"<ul> <li>\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u6f14\u7b97\u5b50 (<code>|&gt;</code>): \u30c7\u30fc\u30bf\u306e\u5909\u63db\u3092\u8aad\u307f\u3084\u3059\u304f\u8868\u73fe</li> <li>\u30ea\u30b9\u30c8\u5185\u5305\u8868\u8a18: <code>[ for x in xs do ... ]</code></li> <li>Option \u578b: null \u306e\u4ee3\u308f\u308a\u306b <code>Option&lt;string&gt;</code> \u3067\u7d50\u679c\u3092\u8868\u73fe</li> <li>\u518d\u5e30\u95a2\u6570: <code>let rec</code> \u3067\u518d\u5e30\u7684\u306b\u7d44\u307f\u5408\u308f\u305b\u3092\u751f\u6210</li> </ul>"},{"location":"fsharp/part-1/#_6","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part II \u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3068 Async \u3092\u4f7f\u3063\u305f\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-2/","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":""},{"location":"fsharp/part-2/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c\u64cd\u4f5c\u3068 Async \u3092\u4f7f\u3063\u305f\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"fsharp/part-2/#_2","title":"\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c","text":"<pre><code>open System.Threading\n\nmodule ThreadBasics =\n    /// Create a worker thread with the given name and task\n    let createWorker (name: string) (task: unit -&gt; unit) : Thread =\n        let thread = Thread(ThreadStart(task))\n        thread.Name &lt;- name\n        thread\n\n    /// Create multiple worker threads\n    let createMultipleWorkers (count: int) (task: int -&gt; unit) : Thread list =\n        [ for i in 0 .. count - 1 do\n            let thread = Thread(ThreadStart(fun () -&gt; task i))\n            thread.Name &lt;- $\"Worker-{i}\"\n            yield thread ]\n\n    /// Start all threads and wait for them to complete\n    let startAndJoinAll (threads: Thread list) : unit =\n        threads |&gt; List.iter (fun t -&gt; t.Start())\n        threads |&gt; List.iter (fun t -&gt; t.Join())\n</code></pre>"},{"location":"fsharp/part-2/#_3","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0","text":""},{"location":"fsharp/part-2/#async","title":"Async \u306b\u3088\u308b\u4e26\u5217\u5b9f\u884c","text":"<pre><code>type ChunkRange = { Start: int; End: int }\n\nmodule PasswordCrackerParallel =\n    /// Divide a range into chunks\n    let getChunks (numChunks: int) (totalSize: int) : ChunkRange list =\n        let chunkSize = totalSize / numChunks\n        let remainder = totalSize % numChunks\n\n        [ for i in 0 .. numChunks - 1 do\n            let start = i * chunkSize + min i remainder\n            let extraOne = if i &lt; remainder then 1 else 0\n            yield { Start = start; End = start + chunkSize + extraOne } ]\n\n    /// Crack password using parallel execution\n    let crackPasswordParallel (cryptoHash: string) (length: int) : string option =\n        let combinations = getCombinations length\n        let numCores = Environment.ProcessorCount\n        let chunks = getChunks numCores (List.length combinations)\n\n        let result = ref None\n        let combinationsArray = combinations |&gt; List.toArray\n\n        let tasks =\n            chunks\n            |&gt; List.map (fun chunk -&gt;\n                async {\n                    let subList = combinationsArray.[chunk.Start .. chunk.End - 1]\n                    for password in subList do\n                        if Option.isNone !result &amp;&amp; checkPassword password cryptoHash then\n                            result := Some password\n                })\n\n        tasks\n        |&gt; Async.Parallel\n        |&gt; Async.RunSynchronously\n        |&gt; ignore\n\n        !result\n</code></pre>"},{"location":"fsharp/part-2/#_4","title":"\u30dd\u30a4\u30f3\u30c8","text":"<ul> <li>Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc: <code>async { ... }</code> \u3067\u975e\u540c\u671f\u8a08\u7b97\u3092\u5b9a\u7fa9</li> <li>Async.Parallel: \u8907\u6570\u306e\u975e\u540c\u671f\u8a08\u7b97\u3092\u4e26\u5217\u5b9f\u884c</li> <li>\u53c2\u7167\u30bb\u30eb (<code>ref</code>): \u53ef\u5909\u306a\u5171\u6709\u72b6\u614b</li> </ul>"},{"location":"fsharp/part-2/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part III \u3067\u306f\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-3/","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"fsharp/part-3/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u4f8b\u306b\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-3/#_2","title":"\u30b2\u30fc\u30e0\u30bf\u30b9\u30af","text":"<pre><code>type GameTask = { Name: string; Action: unit -&gt; unit }\n\nmodule GameLoop =\n    /// Run a single task\n    let runTask (task: GameTask) : unit =\n        task.Action()\n</code></pre>"},{"location":"fsharp/part-3/#_3","title":"\u30a4\u30d9\u30f3\u30c8\u540c\u671f","text":"<pre><code>type ProcessorFreeEvent = {\n    Lock: obj\n    mutable Signaled: bool\n}\n\nmodule GameLoop =\n    /// Create a new processor free event\n    let createProcessorFreeEvent () : ProcessorFreeEvent =\n        { Lock = obj(); Signaled = false }\n\n    /// Wait for the event to be signaled\n    let waitForSignal (event: ProcessorFreeEvent) : unit =\n        lock event.Lock (fun () -&gt;\n            while not event.Signaled do\n                Monitor.Wait(event.Lock) |&gt; ignore\n        )\n\n    /// Signal the event\n    let signal (event: ProcessorFreeEvent) : unit =\n        lock event.Lock (fun () -&gt;\n            event.Signaled &lt;- true\n            Monitor.PulseAll(event.Lock)\n        )\n</code></pre>"},{"location":"fsharp/part-3/#_4","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7","text":"<pre><code>/// Run all tasks in a single frame\nlet runOneFrame (tasks: GameTask list) : unit =\n    tasks |&gt; List.iter runTask\n\n/// Run game loop for specified number of frames\nlet run (tasks: GameTask list) (frames: int) : unit =\n    for frame in 1 .. frames do\n        printfn $\"Frame {frame}\"\n        runOneFrame tasks\n</code></pre>"},{"location":"fsharp/part-3/#_5","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>let tasks = [\n    { Name = \"Input\"; Action = fun () -&gt; printfn \"Processing input...\" }\n    { Name = \"Update\"; Action = fun () -&gt; printfn \"Updating game state...\" }\n    { Name = \"Render\"; Action = fun () -&gt; printfn \"Rendering frame...\" }\n]\n\nGameLoop.run tasks 3\n</code></pre>"},{"location":"fsharp/part-3/#_6","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part IV \u3067\u306f\u3001Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-4/","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"fsharp/part-4/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-4/#forkjoin","title":"Fork/Join \u30d1\u30bf\u30fc\u30f3: \u6295\u7968\u30ab\u30a6\u30f3\u30bf\u30fc","text":""},{"location":"fsharp/part-4/#_2","title":"\u9010\u6b21\u30ab\u30a6\u30f3\u30c8","text":"<pre><code>module VoteCounter =\n    /// Count votes sequentially\n    let countVotes (votes: string list) : Map&lt;string, int&gt; =\n        votes\n        |&gt; List.groupBy id\n        |&gt; List.map (fun (key, group) -&gt; (key, List.length group))\n        |&gt; Map.ofList\n\n    /// Merge two vote count results\n    let mergeResults (a: Map&lt;string, int&gt;) (b: Map&lt;string, int&gt;) : Map&lt;string, int&gt; =\n        let allKeys = Set.union (Map.keys a |&gt; Set.ofSeq) (Map.keys b |&gt; Set.ofSeq)\n        allKeys\n        |&gt; Set.toList\n        |&gt; List.map (fun key -&gt;\n            let countA = Map.tryFind key a |&gt; Option.defaultValue 0\n            let countB = Map.tryFind key b |&gt; Option.defaultValue 0\n            (key, countA + countB))\n        |&gt; Map.ofList\n</code></pre>"},{"location":"fsharp/part-4/#_3","title":"\u4e26\u5217\u30ab\u30a6\u30f3\u30c8","text":"<pre><code>/// Count votes using fork-join pattern\nlet countVotesParallel (votes: string list) : Map&lt;string, int&gt; =\n    if List.isEmpty votes then\n        Map.empty\n    else\n        let numCores = Environment.ProcessorCount\n        let chunkSize = max 1 (List.length votes / numCores)\n        let chunks = votes |&gt; List.chunkBySize chunkSize\n\n        let results =\n            chunks\n            |&gt; List.map (fun chunk -&gt; async { return countVotes chunk })\n            |&gt; Async.Parallel\n            |&gt; Async.RunSynchronously\n            |&gt; Array.toList\n\n        results |&gt; List.reduce mergeResults\n</code></pre>"},{"location":"fsharp/part-4/#_4","title":"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>type Stage = { Name: string; Processor: obj -&gt; obj }\ntype Pipeline&lt;'T&gt; = { Stages: Stage list }\n\nmodule Pipeline =\n    let createPipeline&lt;'T&gt; : Pipeline&lt;'T&gt; =\n        { Stages = [] }\n\n    let addStage (name: string) (processor: obj -&gt; obj) (pipeline: Pipeline&lt;'T&gt;) : Pipeline&lt;'T&gt; =\n        { pipeline with Stages = pipeline.Stages @ [{ Name = name; Processor = processor }] }\n\n    let run (pipeline: Pipeline&lt;'T&gt;) (data: 'T list) : obj list =\n        if List.isEmpty pipeline.Stages then\n            data |&gt; List.map (fun x -&gt; x :&gt; obj)\n        else\n            data\n            |&gt; List.map (fun item -&gt;\n                pipeline.Stages\n                |&gt; List.fold (fun current stage -&gt; stage.Processor current) (item :&gt; obj)\n            )\n</code></pre>"},{"location":"fsharp/part-4/#_5","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>let pipeline =\n    Pipeline.createPipeline&lt;int&gt;\n    |&gt; Pipeline.addStage \"double\" (fun x -&gt; (x :?&gt; int) * 2 :&gt; obj)\n    |&gt; Pipeline.addStage \"addOne\" (fun x -&gt; (x :?&gt; int) + 1 :&gt; obj)\n\nlet results = Pipeline.run pipeline [1; 2; 3]\n// [3; 5; 7]\n</code></pre>"},{"location":"fsharp/part-4/#_6","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part V \u3067\u306f\u3001\u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-5/","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"fsharp/part-5/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u9280\u884c\u53e3\u5ea7\u3092\u4f8b\u306b\u540c\u671f\u3068\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-5/#_2","title":"\u9280\u884c\u53e3\u5ea7\u30ec\u30b3\u30fc\u30c9","text":"<pre><code>type BankAccount = {\n    Lock: obj\n    mutable Balance: int\n}\n\nmodule BankAccount =\n    /// Create a new bank account\n    let createAccount (initialBalance: int) : BankAccount =\n        { Lock = obj(); Balance = initialBalance }\n\n    /// Get the current balance\n    let getBalance (account: BankAccount) : int =\n        lock account.Lock (fun () -&gt; account.Balance)\n\n    /// Deposit money into the account\n    let deposit (account: BankAccount) (amount: int) : unit =\n        lock account.Lock (fun () -&gt;\n            account.Balance &lt;- account.Balance + amount\n        )\n\n    /// Withdraw money from the account\n    let withdraw (account: BankAccount) (amount: int) : bool =\n        lock account.Lock (fun () -&gt;\n            if account.Balance &gt;= amount then\n                account.Balance &lt;- account.Balance - amount\n                true\n            else\n                false\n        )\n</code></pre>"},{"location":"fsharp/part-5/#_3","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f","text":"<pre><code>open System.Runtime.CompilerServices\n\n/// Transfer money between accounts atomically, avoiding deadlock\nlet transfer (from: BankAccount) (toAccount: BankAccount) (amount: int) : bool =\n    // Always lock in consistent order to avoid deadlock\n    let fromHash = RuntimeHelpers.GetHashCode(from)\n    let toHash = RuntimeHelpers.GetHashCode(toAccount)\n    let (first, second) =\n        if fromHash &lt; toHash then (from, toAccount)\n        else (toAccount, from)\n\n    lock first.Lock (fun () -&gt;\n        lock second.Lock (fun () -&gt;\n            if from.Balance &gt;= amount then\n                from.Balance &lt;- from.Balance - amount\n                toAccount.Balance &lt;- toAccount.Balance + amount\n                true\n            else\n                false\n        )\n    )\n</code></pre>"},{"location":"fsharp/part-5/#f-lock","title":"F# \u306e lock \u95a2\u6570","text":"<pre><code>// F# \u306e lock \u95a2\u6570\u306f\u4ee5\u4e0b\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u7c21\u6f54\u306b\u66f8\u3051\u308b\nlock lockObj (fun () -&gt;\n    // \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30bb\u30af\u30b7\u30e7\u30f3\n    doSomething()\n)\n\n// \u3053\u308c\u306f\u4ee5\u4e0b\u3068\u7b49\u4fa1\nMonitor.Enter(lockObj)\ntry\n    doSomething()\nfinally\n    Monitor.Exit(lockObj)\n</code></pre>"},{"location":"fsharp/part-5/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VI \u3067\u306f\u3001\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-6/","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":""},{"location":"fsharp/part-6/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001F# \u306e Async \u3092\u4f7f\u7528\u3057\u305f\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-6/#vs","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0","text":""},{"location":"fsharp/part-6/#io","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<pre><code>// \u30b9\u30ec\u30c3\u30c9\u306f I/O \u5b8c\u4e86\u307e\u3067\u5f85\u6a5f\nlet content = File.ReadAllText(\"file.txt\")\n</code></pre>"},{"location":"fsharp/part-6/#io-async","title":"\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O (Async)","text":"<pre><code>let readFileAsync (path: string) : Async&lt;string&gt; =\n    async {\n        use reader = new StreamReader(path)\n        let! content = reader.ReadToEndAsync() |&gt; Async.AwaitTask\n        return content\n    }\n</code></pre>"},{"location":"fsharp/part-6/#async","title":"Async \u306e\u57fa\u672c","text":"<pre><code>// \u975e\u540c\u671f\u8a08\u7b97\u3092\u5b9a\u7fa9\uff08\u5b9f\u884c\u3055\u308c\u306a\u3044\uff09\nlet fetchData (url: string) : Async&lt;string&gt; =\n    async {\n        use client = new HttpClient()\n        let! response = client.GetStringAsync(url) |&gt; Async.AwaitTask\n        return response\n    }\n\n// \u540c\u671f\u7684\u306b\u5b9f\u884c\nlet result = Async.RunSynchronously (fetchData \"https://example.com\")\n\n// \u975e\u540c\u671f\u7684\u306b\u958b\u59cb\nAsync.Start (async {\n    let! result = fetchData \"https://example.com\"\n    printfn \"%s\" result\n})\n</code></pre>"},{"location":"fsharp/part-6/#async_1","title":"\u4e26\u5217 Async","text":"<pre><code>let downloadAll (urls: string list) : Async&lt;string[]&gt; =\n    urls\n    |&gt; List.map fetchData\n    |&gt; Async.Parallel\n\n// \u4f7f\u7528\u4f8b\nlet results =\n    [\"https://a.com\"; \"https://b.com\"; \"https://c.com\"]\n    |&gt; downloadAll\n    |&gt; Async.RunSynchronously\n</code></pre>"},{"location":"fsharp/part-6/#_2","title":"\u30e1\u30ea\u30c3\u30c8","text":"\u9805\u76ee \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 Async \u30b9\u30ec\u30c3\u30c9\u6d88\u8cbb \u5f85\u6a5f\u4e2d\u3082\u5360\u6709 \u89e3\u653e \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 \u4f4e\u3044 \u9ad8\u3044 \u30b3\u30fc\u30c9\u8907\u96d1\u3055 \u4f4e\u3044 \u3084\u3084\u9ad8\u3044"},{"location":"fsharp/part-6/#_3","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VII \u3067\u306f\u3001Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306e\u8a73\u7d30\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-7/","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"fsharp/part-7/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001F# \u306e Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u8a73\u3057\u304f\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-7/#async","title":"Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306e\u57fa\u672c","text":"<pre><code>// async { } \u5185\u3067\u975e\u540c\u671f\u8a08\u7b97\u3092\u8a18\u8ff0\nlet computation : Async&lt;int&gt; =\n    async {\n        printfn \"Starting...\"\n        do! Async.Sleep(1000)\n        printfn \"Done!\"\n        return 42\n    }\n</code></pre>"},{"location":"fsharp/part-7/#let-do","title":"let! \u3068 do!","text":"<pre><code>let example : Async&lt;int&gt; =\n    async {\n        // let! : \u5024\u3092\u53d6\u308a\u51fa\u3059\n        let! result = someAsyncComputation()\n\n        // do! : \u5024\u3092\u7121\u8996\n        do! Async.Sleep(100)\n\n        return result * 2\n    }\n</code></pre>"},{"location":"fsharp/part-7/#_2","title":"\u5408\u6210","text":"<pre><code>// \u9806\u6b21\u5b9f\u884c\nlet sequential : Async&lt;int&gt; =\n    async {\n        let! a = computeA()\n        let! b = computeB()\n        return a + b\n    }\n\n// \u4e26\u5217\u5b9f\u884c\nlet parallel : Async&lt;int[]&gt; =\n    [computeA(); computeB(); computeC()]\n    |&gt; Async.Parallel\n</code></pre>"},{"location":"fsharp/part-7/#_3","title":"\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":"<pre><code>let safeComputation : Async&lt;Result&lt;int, string&gt;&gt; =\n    async {\n        try\n            let! result = riskyComputation()\n            return Ok result\n        with\n        | ex -&gt; return Error ex.Message\n    }\n</code></pre>"},{"location":"fsharp/part-7/#_4","title":"\u30ad\u30e3\u30f3\u30bb\u30eb","text":"<pre><code>let cancellableComputation (ct: CancellationToken) : Async&lt;unit&gt; =\n    async {\n        for i in 1 .. 100 do\n            ct.ThrowIfCancellationRequested()\n            do! Async.Sleep(100)\n            printfn $\"Step {i}\"\n    }\n\n// \u4f7f\u7528\u4f8b\nlet cts = new CancellationTokenSource()\nAsync.Start(cancellableComputation cts.Token)\n// \u30ad\u30e3\u30f3\u30bb\u30eb\ncts.Cancel()\n</code></pre>"},{"location":"fsharp/part-7/#task","title":"Task \u3068\u306e\u76f8\u4e92\u904b\u7528","text":"<pre><code>// Task -&gt; Async\nlet asyncFromTask : Async&lt;string&gt; =\n    someTask |&gt; Async.AwaitTask\n\n// Async -&gt; Task\nlet taskFromAsync : Task&lt;string&gt; =\n    someAsync |&gt; Async.StartAsTask\n</code></pre>"},{"location":"fsharp/part-7/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VIII \u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068\u4e26\u5217\u914d\u5217\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-8/","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":""},{"location":"fsharp/part-8/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068 F# \u306e\u4e26\u5217\u914d\u5217\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"fsharp/part-8/#mapreduce","title":"MapReduce \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"fsharp/part-8/#_2","title":"\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u5b9f\u88c5","text":"<pre><code>module WordCount =\n    /// Map: Convert text to (word, 1) pairs\n    let map (text: string) : (string * int) list =\n        text.ToLower().Split([|' '; '\\t'; '\\n'; '\\r'|], StringSplitOptions.RemoveEmptyEntries)\n        |&gt; Array.filter (fun s -&gt; s.Length &gt; 0)\n        |&gt; Array.map (fun word -&gt; (word, 1))\n        |&gt; Array.toList\n\n    /// Reduce: Aggregate word counts\n    let reduce (pairs: (string * int) list) : Map&lt;string, int&gt; =\n        pairs\n        |&gt; List.groupBy fst\n        |&gt; List.map (fun (key, group) -&gt; (key, group |&gt; List.sumBy snd))\n        |&gt; Map.ofList\n\n    /// MapReduce: Count words in multiple texts using parallel execution\n    let countWords (texts: string list) : Map&lt;string, int&gt; =\n        // Map phase (parallel)\n        let mapped =\n            texts\n            |&gt; List.toArray\n            |&gt; Array.Parallel.collect (fun text -&gt; map text |&gt; List.toArray)\n            |&gt; Array.toList\n\n        // Reduce phase\n        reduce mapped\n</code></pre>"},{"location":"fsharp/part-8/#_3","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>let texts = [\n    \"hello world\"\n    \"hello fsharp\"\n    \"world of fsharp\"\n]\n\nlet result = WordCount.countWords texts\n// Map [(\"hello\", 2); (\"world\", 2); (\"fsharp\", 2); (\"of\", 1)]\n</code></pre>"},{"location":"fsharp/part-8/#arrayparallel","title":"Array.Parallel","text":"<pre><code>// \u4e26\u5217 map\nlet doubled = [|1..1000000|] |&gt; Array.Parallel.map (fun x -&gt; x * 2)\n\n// \u4e26\u5217 filter + map (collect)\nlet processed =\n    data\n    |&gt; Array.Parallel.collect (fun x -&gt;\n        if x &gt; 0 then [|x * 2|]\n        else [||]\n    )\n</code></pre>"},{"location":"fsharp/part-8/#_4","title":"\u307e\u3068\u3081","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u5b66\u3093\u3060\u5185\u5bb9:</p> Part \u30c8\u30d4\u30c3\u30af \u30ad\u30fc\u30dd\u30a4\u30f3\u30c8 I \u9010\u6b21\u51e6\u7406 \u57fa\u672c\u6982\u5ff5\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u6f14\u7b97\u5b50 II \u30b9\u30ec\u30c3\u30c9 Thread\u3001Async.Parallel III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30b2\u30fc\u30e0\u30eb\u30fc\u30d7 IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001Pipeline V \u540c\u671f lock\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 Async VII \u975e\u540c\u671f Async \u30ef\u30fc\u30af\u30d5\u30ed\u30fc VIII \u5206\u6563\u51e6\u7406 MapReduce\u3001Array.Parallel"},{"location":"fsharp/part-8/#_5","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>F# Async Programming</li> <li>Array.Parallel Module</li> <li>Grokking Concurrency</li> </ul>"},{"location":"haskell/","title":"Grokking Concurrency - Haskell \u7248","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u306f\u300cGrokking Concurrency\u300d\uff08Kirill Bobrov \u8457\uff09\u306e\u5b66\u7fd2\u30b3\u30f3\u30d1\u30cb\u30aa\u30f3\u3068\u3057\u3066\u3001\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u6982\u5ff5\u3092 Haskell \u3067\u5b9f\u88c5\u3057\u306a\u304c\u3089\u65e5\u672c\u8a9e\u3067\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"haskell/#_1","title":"\u5bfe\u8c61\u8aad\u8005","text":"<ul> <li>Haskell \u306e\u57fa\u790e\u77e5\u8b58\u304c\u3042\u308a\u3001\u4e26\u884c\u51e6\u7406\u306b\u8208\u5473\u304c\u3042\u308b\u958b\u767a\u8005</li> <li>STM\uff08Software Transactional Memory\uff09\u3092\u5b66\u3073\u305f\u3044\u65b9</li> <li>\u7d14\u7c8b\u95a2\u6570\u578b\u8a00\u8a9e\u3067\u306e\u4e26\u884c\u51e6\u7406\u3092\u7406\u89e3\u3057\u305f\u3044\u30a8\u30f3\u30b8\u30cb\u30a2</li> <li>async \u30e9\u30a4\u30d6\u30e9\u30ea\u3084 forkIO \u3092\u4f7f\u3063\u305f\u4e26\u5217\u51e6\u7406\u306b\u8208\u5473\u304c\u3042\u308b\u65b9</li> </ul>"},{"location":"haskell/#_2","title":"\u8a18\u4e8b\u4e00\u89a7","text":""},{"location":"haskell/#part-i","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":"<p>\u9010\u6b21\u51e6\u7406\u3068\u4e26\u884c\u51e6\u7406\u306e\u9055\u3044\u3001\u57fa\u672c\u6982\u5ff5\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c2\u7ae0 \u9010\u6b21\u51e6\u7406\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u4f8b <p>\u30ad\u30fc\u30ef\u30fc\u30c9: \u9010\u6b21\u51e6\u7406\u3001\u7d14\u7c8b\u95a2\u6570\u3001Maybe \u30e2\u30ca\u30c9</p>"},{"location":"haskell/#part-ii","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":"<p>\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c\u3068 async \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c4\u7ae0 forkIO\u3001async\u3001\u8efd\u91cf\u30b9\u30ec\u30c3\u30c9 \u7b2c5\u7ae0 \u4e26\u5217\u51e6\u7406\u3001mapConcurrently <p>\u30ad\u30fc\u30ef\u30fc\u30c9: forkIO\u3001async\u3001Async</p>"},{"location":"haskell/#part-iii","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":"<p>\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068 STM \u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c6\u7ae0 TVar\u3001STM\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: STM\u3001TVar\u3001atomically</p>"},{"location":"haskell/#part-iv","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":"<p>\u4e26\u5217\u51e6\u7406\u306e\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c7\u7ae0 \u30bf\u30b9\u30af\u5206\u89e3\u3001Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: mapConcurrently\u3001TQueue\u3001Pipeline</p>"},{"location":"haskell/#part-v","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":"<p>STM \u306b\u3088\u308b\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc\u306a\u540c\u671f\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c8\u7ae0 STM\u3001TVar\u3001\u30a2\u30c8\u30df\u30c3\u30af\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: STM\u3001atomically\u3001retry</p>"},{"location":"haskell/#part-vi-io","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<p>\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3068\u975e\u540c\u671f\u51e6\u7406\u306e\u57fa\u790e\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c10\u7ae0 IO \u30e2\u30ca\u30c9\u3001\u975e\u540c\u671f\u51e6\u7406 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: IO\u3001async\u3001concurrently</p>"},{"location":"haskell/#part-vii","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<p>Haskell \u306e async \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a73\u3057\u304f\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c12\u7ae0 async\u3001wait\u3001cancel\u3001race <p>\u30ad\u30fc\u30ef\u30fc\u30c9: Async\u3001race\u3001concurrently</p>"},{"location":"haskell/#part-viii","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":"<p>MapReduce \u30d1\u30bf\u30fc\u30f3\u3068\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c13\u7ae0 MapReduce\u3001\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: MapReduce\u3001mapConcurrently</p>"},{"location":"haskell/#_3","title":"\u4f7f\u7528\u30e9\u30a4\u30d6\u30e9\u30ea","text":"\u30e9\u30a4\u30d6\u30e9\u30ea \u7528\u9014 \u5bfe\u5fdc\u7ae0 base \u57fa\u672c\u30e9\u30a4\u30d6\u30e9\u30ea \u5168\u7ae0 async \u975e\u540c\u671f\u51e6\u7406 Part II-VIII stm Software Transactional Memory Part III, V cryptohash-sha256 \u30cf\u30c3\u30b7\u30e5\u8a08\u7b97 Part I, II containers Map\u3001Set Part IV, VIII"},{"location":"haskell/#_4","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u69cb\u6210","text":"<pre><code>grokking_concurrency/\n\u251c\u2500\u2500 apps/haskell/                  # Haskell \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\u2502   \u251c\u2500\u2500 grokking-concurrency-haskell.cabal\n\u2502   \u251c\u2500\u2500 stack.yaml\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 Ch02/PasswordCracker.hs\n\u2502       \u251c\u2500\u2500 Ch04/ThreadBasics.hs\n\u2502       \u251c\u2500\u2500 Ch05/PasswordCrackerParallel.hs\n\u2502       \u251c\u2500\u2500 Ch06/GameLoop.hs\n\u2502       \u251c\u2500\u2500 Ch07/VoteCounter.hs\n\u2502       \u251c\u2500\u2500 Ch07/Pipeline.hs\n\u2502       \u251c\u2500\u2500 Ch08/BankAccount.hs\n\u2502       \u2514\u2500\u2500 Ch13/WordCount.hs\n\u2514\u2500\u2500 docs/article/haskell/          # \u89e3\u8aac\u8a18\u4e8b\n    \u251c\u2500\u2500 index.md\n    \u251c\u2500\u2500 part-1.md\n    \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"haskell/#haskell","title":"Haskell \u3068\u4e26\u884c\u51e6\u7406","text":"<p>Haskell \u306f\u7d14\u7c8b\u95a2\u6570\u578b\u8a00\u8a9e\u3067\u3042\u308a\u3001\u4e26\u884c\u51e6\u7406\u306b\u72ec\u81ea\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"haskell/#forkio","title":"forkIO\uff08\u8efd\u91cf\u30b9\u30ec\u30c3\u30c9\uff09","text":"<pre><code>import Control.Concurrent (forkIO)\n\nmain :: IO ()\nmain = do\n    _ &lt;- forkIO $ putStrLn \"Hello from thread!\"\n    putStrLn \"Hello from main!\"\n</code></pre>"},{"location":"haskell/#async","title":"async \u30e9\u30a4\u30d6\u30e9\u30ea","text":"<pre><code>import Control.Concurrent.Async\n\nmain :: IO ()\nmain = do\n    result &lt;- async $ return (1 + 1)\n    value &lt;- wait result\n    print value\n</code></pre>"},{"location":"haskell/#stmsoftware-transactional-memory","title":"STM\uff08Software Transactional Memory\uff09","text":"<pre><code>import Control.Concurrent.STM\n\nmain :: IO ()\nmain = do\n    counter &lt;- newTVarIO 0\n    atomically $ modifyTVar' counter (+1)\n    value &lt;- readTVarIO counter\n    print value  -- 1\n</code></pre>"},{"location":"haskell/#_5","title":"\u4e26\u5217\u5b9f\u884c","text":"<pre><code>import Control.Concurrent.Async\n\nmain :: IO ()\nmain = do\n    results &lt;- mapConcurrently id\n        [return 1, return 2, return 3]\n    print results  -- [1, 2, 3]\n</code></pre>"},{"location":"haskell/#_6","title":"\u4e3b\u8981\u306a\u6982\u5ff5","text":""},{"location":"haskell/#io","title":"IO \u30e2\u30ca\u30c9\u3068\u7d14\u7c8b\u95a2\u6570","text":"\u7a2e\u985e \u8aac\u660e \u7d14\u7c8b\u95a2\u6570 \u526f\u4f5c\u7528\u306a\u3057\u3001\u53c2\u7167\u900f\u904e\u6027 IO a \u526f\u4f5c\u7528\u3092\u6301\u3064\u8a08\u7b97 STM a \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb\u306a\u8a08\u7b97"},{"location":"haskell/#stm","title":"STM \u306e\u7279\u5fb4","text":"\u6a5f\u80fd \u8aac\u660e atomically \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c retry \u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u308b\u307e\u3067\u5f85\u6a5f orElse \u4ee3\u66ff\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 TVar \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb\u5909\u6570"},{"location":"haskell/#_7","title":"\u4e26\u884c\u51e6\u7406\u306e\u5229\u70b9","text":"<ol> <li>\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc - STM \u306b\u3088\u308b\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4</li> <li>\u578b\u5b89\u5168\u6027 - \u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306e\u691c\u8a3c</li> <li>\u5408\u6210\u53ef\u80fd\u6027 - \u5c0f\u3055\u306a\u95a2\u6570\u3092\u7d44\u307f\u5408\u308f\u305b\u308b</li> <li>\u7d14\u7c8b\u6027 - \u526f\u4f5c\u7528\u306e\u660e\u793a\u7684\u306a\u7ba1\u7406</li> </ol>"},{"location":"haskell/#_8","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency - \u539f\u8457</li> <li>Parallel and Concurrent Programming in Haskell</li> <li>async package</li> <li>stm package</li> </ul>"},{"location":"haskell/part-1/","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":""},{"location":"haskell/part-1/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e\u3068\u3057\u3066\u9010\u6b21\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-1/#_2","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\u306e\u5b9f\u88c5","text":""},{"location":"haskell/part-1/#sha-256","title":"SHA-256 \u30cf\u30c3\u30b7\u30e5\u8a08\u7b97","text":"<pre><code>{-# LANGUAGE OverloadedStrings #-}\n\nmodule Ch02.PasswordCracker where\n\nimport Crypto.Hash.SHA256 (hash)\nimport Data.ByteString.Builder (byteStringHex, toLazyByteString)\nimport qualified Data.ByteString.Char8 as C8\nimport qualified Data.ByteString.Lazy as BL\n\n-- | Compute SHA-256 hash of a password\ngetCryptoHash :: String -&gt; String\ngetCryptoHash password =\n    let hashBytes = hash (C8.pack password)\n        hexBytes = toLazyByteString (byteStringHex hashBytes)\n    in C8.unpack (BL.toStrict hexBytes)\n</code></pre>"},{"location":"haskell/part-1/#_3","title":"\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\u63a2\u7d22","text":"<pre><code>-- | Crack password by brute force (sequential)\ncrackPassword :: String -&gt; String -&gt; Int -&gt; Maybe String\ncrackPassword _ _ 0 = Nothing\ncrackPassword cryptoHash alphabet len =\n    crackRecursive cryptoHash alphabet \"\" len\n\ncrackRecursive :: String -&gt; String -&gt; String -&gt; Int -&gt; Maybe String\ncrackRecursive cryptoHash alphabet prefix 0 =\n    if getCryptoHash prefix == cryptoHash\n        then Just prefix\n        else Nothing\ncrackRecursive cryptoHash alphabet prefix remaining =\n    foldr tryChar Nothing alphabet\n  where\n    tryChar c acc =\n        case crackRecursive cryptoHash alphabet (prefix ++ [c]) (remaining - 1) of\n            Just result -&gt; Just result\n            Nothing -&gt; acc\n</code></pre>"},{"location":"haskell/part-1/#_4","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>main :: IO ()\nmain = do\n    let alphabet = \"ab\"\n    let targetHash = getCryptoHash \"ab\"\n\n    case crackPassword targetHash alphabet 2 of\n        Just password -&gt; putStrLn $ \"Found: \" ++ password\n        Nothing -&gt; putStrLn \"Not found\"\n</code></pre>"},{"location":"haskell/part-1/#haskell","title":"Haskell \u306e\u7279\u5fb4","text":"\u6982\u5ff5 \u8aac\u660e Maybe a \u5024\u304c\u5b58\u5728\u3057\u306a\u3044\u53ef\u80fd\u6027\u3092\u8868\u73fe \u7d14\u7c8b\u95a2\u6570 \u526f\u4f5c\u7528\u306a\u3057\u3001\u53c2\u7167\u900f\u904e\u6027 \u9045\u5ef6\u8a55\u4fa1 \u5fc5\u8981\u306b\u306a\u308b\u307e\u3067\u8a08\u7b97\u3057\u306a\u3044 foldr \u53f3\u7573\u307f\u8fbc\u307f\u306b\u3088\u308b\u77ed\u7d61\u8a55\u4fa1"},{"location":"haskell/part-1/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part II \u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u3063\u305f\u4e26\u884c\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-2/","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":""},{"location":"haskell/part-2/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Haskell \u306e forkIO \u3068 async \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u305f\u30b9\u30ec\u30c3\u30c9\u64cd\u4f5c\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-2/#_2","title":"\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c","text":""},{"location":"haskell/part-2/#forkio","title":"forkIO \u306b\u3088\u308b\u30b9\u30ec\u30c3\u30c9\u4f5c\u6210","text":"<pre><code>import Control.Concurrent (forkIO, ThreadId)\n\n-- | Create and start a new thread\ncreateThread :: IO () -&gt; IO ThreadId\ncreateThread = forkIO\n</code></pre>"},{"location":"haskell/part-2/#async","title":"async \u306b\u3088\u308b\u8907\u6570\u30b9\u30ec\u30c3\u30c9\u306e\u5b9f\u884c","text":"<pre><code>import Control.Concurrent.Async (async, wait)\nimport Control.Monad (forM, forM_)\n\n-- | Run multiple threads and wait for completion\nrunThreads :: Int -&gt; (Int -&gt; IO ()) -&gt; IO ()\nrunThreads count action = do\n    handles &lt;- forM [0..count-1] $ \\i -&gt; async (action i)\n    forM_ handles wait\n</code></pre>"},{"location":"haskell/part-2/#_3","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc","text":"<pre><code>import Control.Concurrent.Async (mapConcurrently)\nimport Data.Maybe (listToMaybe, catMaybes)\n\n-- | Crack password using parallel execution\ncrackPasswordParallel :: String -&gt; String -&gt; Int -&gt; IO (Maybe String)\ncrackPasswordParallel _ _ 0 = return Nothing\ncrackPasswordParallel cryptoHash alphabet len = do\n    -- Parallelize on first character\n    results &lt;- mapConcurrently (tryFirstChar cryptoHash alphabet len) alphabet\n    return $ listToMaybe (catMaybes results)\n</code></pre>"},{"location":"haskell/part-2/#async_1","title":"async \u30e9\u30a4\u30d6\u30e9\u30ea","text":"\u95a2\u6570 \u8aac\u660e async \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u5b9f\u884c wait \u5b8c\u4e86\u3092\u5f85\u6a5f cancel \u30ad\u30e3\u30f3\u30bb\u30eb mapConcurrently \u4e26\u5217 map"},{"location":"haskell/part-2/#_4","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>import Control.Concurrent.STM\n\nmain :: IO ()\nmain = do\n    counter &lt;- newTVarIO (0 :: Int)\n\n    runThreads 5 $ \\_ -&gt;\n        atomically $ modifyTVar' counter (+1)\n\n    result &lt;- readTVarIO counter\n    print result  -- 5\n</code></pre>"},{"location":"haskell/part-2/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part III \u3067\u306f\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-3/","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"haskell/part-3/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001STM \u3092\u4f7f\u3063\u305f\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-3/#_2","title":"\u30b2\u30fc\u30e0\u30bf\u30b9\u30af","text":"<pre><code>-- | A game task that can be processed\ndata GameTask = GameTask\n    { taskName   :: String\n    , taskAction :: IO ()\n    }\n</code></pre>"},{"location":"haskell/part-3/#stm","title":"\u30d7\u30ed\u30bb\u30c3\u30b5\u30d5\u30ea\u30fc\u30a4\u30d9\u30f3\u30c8\uff08STM\uff09","text":"<pre><code>import Control.Concurrent.STM\n\n-- | Event for signaling processor availability\nnewtype ProcessorFreeEvent = ProcessorFreeEvent (TVar Bool)\n\n-- | Create a new processor free event\nnewProcessorFreeEvent :: IO ProcessorFreeEvent\nnewProcessorFreeEvent = ProcessorFreeEvent &lt;$&gt; newTVarIO False\n\n-- | Wait for the event to be signaled\nwaitEvent :: ProcessorFreeEvent -&gt; IO ()\nwaitEvent (ProcessorFreeEvent var) = atomically $ do\n    ready &lt;- readTVar var\n    if ready\n        then writeTVar var False\n        else retry\n\n-- | Signal the event\nsignalEvent :: ProcessorFreeEvent -&gt; IO ()\nsignalEvent (ProcessorFreeEvent var) = atomically $ writeTVar var True\n</code></pre>"},{"location":"haskell/part-3/#_3","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7","text":"<pre><code>import Control.Monad (forM_, replicateM_)\n\n-- | Simple game loop that processes tasks\ngameLoop :: [GameTask] -&gt; Int -&gt; IO ()\ngameLoop tasks iterations =\n    replicateM_ iterations $ forM_ tasks taskAction\n\n-- | Cooperative game loop with event signaling\ncooperativeGameLoop :: [GameTask] -&gt; ProcessorFreeEvent -&gt; Int -&gt; IO ()\ncooperativeGameLoop tasks event iterations =\n    replicateM_ iterations $ forM_ tasks $ \\task -&gt; do\n        taskAction task\n        signalEvent event\n</code></pre>"},{"location":"haskell/part-3/#stm_1","title":"STM \u306e\u7279\u5fb4","text":"\u95a2\u6570 \u8aac\u660e atomically \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c readTVar TVar \u3092\u8aad\u307f\u53d6\u308b writeTVar TVar \u306b\u66f8\u304d\u8fbc\u3080 retry \u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u308b\u307e\u3067\u5f85\u6a5f"},{"location":"haskell/part-3/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part IV \u3067\u306f\u3001Fork/Join \u3068 Pipeline \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-4/","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"haskell/part-4/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Fork/Join \u3068 Pipeline \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-4/#forkjoin","title":"Fork/Join \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"haskell/part-4/#_2","title":"\u6295\u7968\u30ab\u30a6\u30f3\u30bf\u30fc","text":"<pre><code>import Control.Concurrent.Async (mapConcurrently)\nimport Data.Map.Strict (Map)\nimport qualified Data.Map.Strict as Map\n\n-- | Count votes sequentially\ncountVotes :: [String] -&gt; Map String Int\ncountVotes = foldl' countOne Map.empty\n  where\n    countOne acc vote = Map.insertWith (+) vote 1 acc\n\n-- | Count votes using Fork/Join pattern\ncountVotesParallel :: [String] -&gt; IO (Map String Int)\ncountVotesParallel [] = return Map.empty\ncountVotesParallel votes = do\n    let chunks = splitIntoChunks 4 votes\n    results &lt;- mapConcurrently (return . countVotes) chunks\n    return $ foldl' (Map.unionWith (+)) Map.empty results\n</code></pre>"},{"location":"haskell/part-4/#pipeline","title":"Pipeline \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"haskell/part-4/#pipeline_1","title":"Pipeline \u69cb\u9020","text":"<pre><code>-- | A pipeline of processing stages\nnewtype Pipeline a = Pipeline [a -&gt; a]\n\n-- | Create a new empty pipeline\nnewPipeline :: Pipeline a\nnewPipeline = Pipeline []\n\n-- | Add a stage to the pipeline\naddStage :: (a -&gt; a) -&gt; Pipeline a -&gt; Pipeline a\naddStage f (Pipeline stages) = Pipeline (stages ++ [f])\n\n-- | Run the pipeline on a single input\nrunPipeline :: Pipeline a -&gt; a -&gt; a\nrunPipeline (Pipeline stages) input = foldl (flip ($)) input stages\n</code></pre>"},{"location":"haskell/part-4/#tqueue","title":"TQueue \u306b\u3088\u308b\u4e26\u884c\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3","text":"<pre><code>import Control.Concurrent.STM\n\n-- | Concurrent pipeline using TQueues\nconcurrentPipeline :: [a -&gt; a] -&gt; [a] -&gt; IO [a]\nconcurrentPipeline processors inputs = do\n    -- Create queues between stages\n    queues &lt;- forM [1..numQueues] $ \\_ -&gt; newTQueueIO\n    -- Feed input, create processor threads, collect results\n    ...\n</code></pre>"},{"location":"haskell/part-4/#_3","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>main :: IO ()\nmain = do\n    -- Pipeline\n    let pipeline = addStage (\\x -&gt; x - 3)\n                 $ addStage (*2)\n                 $ addStage (+1)\n                 $ newPipeline\n    print $ runPipeline pipeline (5 :: Int)  -- 9\n\n    -- Fork/Join\n    let votes = [\"A\", \"B\", \"A\", \"A\", \"B\", \"C\"]\n    result &lt;- countVotesParallel votes\n    print result  -- fromList [(\"A\",3),(\"B\",2),(\"C\",1)]\n</code></pre>"},{"location":"haskell/part-4/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part V \u3067\u306f\u3001STM \u306b\u3088\u308b\u540c\u671f\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-5/","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"haskell/part-5/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001STM \u3092\u4f7f\u3063\u305f\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc\u306a\u9280\u884c\u53e3\u5ea7\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-5/#stm","title":"\u9280\u884c\u53e3\u5ea7\uff08STM\uff09","text":"<pre><code>import Control.Concurrent.STM\n\n-- | A thread-safe bank account using STM\ndata BankAccount = BankAccount\n    { accountId      :: Int\n    , accountBalance :: TVar Int\n    }\n\n-- | Create a new bank account\nnewBankAccount :: Int -&gt; Int -&gt; IO BankAccount\nnewBankAccount accId initialBalance = do\n    balance &lt;- newTVarIO initialBalance\n    return $ BankAccount accId balance\n\n-- | Get the current balance\ngetBalance :: BankAccount -&gt; IO Int\ngetBalance account = readTVarIO (accountBalance account)\n\n-- | Deposit money\ndeposit :: BankAccount -&gt; Int -&gt; IO ()\ndeposit account amount = atomically $\n    modifyTVar' (accountBalance account) (+ amount)\n\n-- | Withdraw money\nwithdraw :: BankAccount -&gt; Int -&gt; IO Bool\nwithdraw account amount = atomically $ do\n    balance &lt;- readTVar (accountBalance account)\n    if balance &gt;= amount\n        then do\n            writeTVar (accountBalance account) (balance - amount)\n            return True\n        else return False\n</code></pre>"},{"location":"haskell/part-5/#_2","title":"\u30a2\u30c8\u30df\u30c3\u30af\u9001\u91d1\uff08\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc\uff09","text":"<pre><code>-- | Transfer money between accounts atomically\ntransfer :: BankAccount -&gt; BankAccount -&gt; Int -&gt; IO Bool\ntransfer from to amount = atomically $ do\n    fromBalance &lt;- readTVar (accountBalance from)\n    if fromBalance &gt;= amount\n        then do\n            modifyTVar' (accountBalance from) (subtract amount)\n            modifyTVar' (accountBalance to) (+ amount)\n            return True\n        else return False\n</code></pre>"},{"location":"haskell/part-5/#stm_1","title":"STM \u306e\u5229\u70b9","text":"\u7279\u5fb4 \u8aac\u660e \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc \u81ea\u52d5\u30ea\u30c8\u30e9\u30a4\u306b\u3088\u308b\u89e3\u6c7a \u5408\u6210\u53ef\u80fd\u6027 \u8907\u6570\u306e\u64cd\u4f5c\u3092\u7d44\u307f\u5408\u308f\u305b\u53ef\u80fd \u4f8b\u5916\u5b89\u5168 \u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u3088\u308b\u4e00\u8cab\u6027\u7dad\u6301 \u7c21\u6f54\u3055 \u30ed\u30c3\u30af\u9806\u5e8f\u3092\u8003\u616e\u4e0d\u8981"},{"location":"haskell/part-5/#stm-vs-mvar","title":"STM vs MVar","text":"\u6a5f\u80fd STM MVar \u5408\u6210 \u53ef\u80fd \u56f0\u96e3 \u30c7\u30c3\u30c9\u30ed\u30c3\u30af \u30d5\u30ea\u30fc \u53ef\u80fd\u6027\u3042\u308a \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 \u3084\u3084\u4f4e\u3044 \u9ad8\u3044 \u8907\u96d1\u3055 \u4f4e\u3044 \u9ad8\u3044"},{"location":"haskell/part-5/#_3","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VI \u3067\u306f\u3001\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-6/","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":""},{"location":"haskell/part-6/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Haskell \u306e async \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3057\u305f\u975e\u540c\u671f\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-6/#vs","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0","text":""},{"location":"haskell/part-6/#io","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<pre><code>-- \u30b9\u30ec\u30c3\u30c9\u306f I/O \u5b8c\u4e86\u307e\u3067\u5f85\u6a5f\ncontent &lt;- readFile \"file.txt\"\n</code></pre>"},{"location":"haskell/part-6/#io-async","title":"\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O (async)","text":"<pre><code>import Control.Concurrent.Async\n\n-- \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u5b9f\u884c\nhandle &lt;- async $ readFile \"file.txt\"\n-- \u4ed6\u306e\u51e6\u7406\u3092\u5b9f\u884c\ndoSomethingElse\n-- \u7d50\u679c\u3092\u53d6\u5f97\ncontent &lt;- wait handle\n</code></pre>"},{"location":"haskell/part-6/#async","title":"async \u306e\u57fa\u672c","text":"<pre><code>import Control.Concurrent.Async\n\nfetchData :: String -&gt; IO String\nfetchData url = do\n    threadDelay 1000000  -- 1\u79d2\u5f85\u6a5f\n    return $ \"Data from \" ++ url\n\nmain :: IO ()\nmain = do\n    -- \u975e\u540c\u671f\u5b9f\u884c\n    handle &lt;- async $ fetchData \"https://example.com\"\n\n    -- \u540c\u671f\u7684\u306b\u5f85\u6a5f\n    result &lt;- wait handle\n    putStrLn result\n</code></pre>"},{"location":"haskell/part-6/#_2","title":"\u4e26\u884c\u5b9f\u884c","text":"<pre><code>import Control.Concurrent.Async\n\ndownloadAll :: [String] -&gt; IO [String]\ndownloadAll urls = mapConcurrently fetchData urls\n\n-- \u4f7f\u7528\u4f8b\nmain :: IO ()\nmain = do\n    results &lt;- downloadAll\n        [\"https://a.com\", \"https://b.com\", \"https://c.com\"]\n    mapM_ putStrLn results\n</code></pre>"},{"location":"haskell/part-6/#_3","title":"\u30e1\u30ea\u30c3\u30c8","text":"\u9805\u76ee \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 async \u30b9\u30ec\u30c3\u30c9\u6d88\u8cbb \u5f85\u6a5f\u4e2d\u3082\u5360\u6709 \u52b9\u7387\u7684 \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 \u4f4e\u3044 \u9ad8\u3044 \u30b3\u30fc\u30c9\u8907\u96d1\u3055 \u4f4e\u3044 \u3084\u3084\u9ad8\u3044"},{"location":"haskell/part-6/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VII \u3067\u306f\u3001async \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a73\u7d30\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-7/","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"haskell/part-7/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Haskell \u306e async \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a73\u3057\u304f\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-7/#async","title":"Async \u578b","text":"<pre><code>-- Async a \u306f\u975e\u540c\u671f\u8a08\u7b97\u3092\u8868\u3059\ndata Async a\n\n-- \u975e\u540c\u671f\u8a08\u7b97\u3092\u958b\u59cb\nasync :: IO a -&gt; IO (Async a)\n\n-- \u7d50\u679c\u3092\u5f85\u6a5f\nwait :: Async a -&gt; IO a\n\n-- \u30ad\u30e3\u30f3\u30bb\u30eb\ncancel :: Async a -&gt; IO ()\n</code></pre>"},{"location":"haskell/part-7/#_2","title":"\u4e26\u884c\u5b9f\u884c","text":"<pre><code>import Control.Concurrent.Async\n\n-- \u9806\u6b21\u5b9f\u884c\nsequential :: IO (Int, Int)\nsequential = do\n    a &lt;- computeA\n    b &lt;- computeB\n    return (a, b)\n\n-- \u4e26\u884c\u5b9f\u884c\nparallel :: IO (Int, Int)\nparallel = concurrently computeA computeB\n</code></pre>"},{"location":"haskell/part-7/#race","title":"race","text":"<pre><code>import Control.Concurrent.Async\n\n-- \u5148\u306b\u7d42\u308f\u3063\u305f\u65b9\u3092\u8fd4\u3059\nraceExample :: IO (Either String Int)\nraceExample = race fetchFromServerA fetchFromServerB\n</code></pre>"},{"location":"haskell/part-7/#_3","title":"\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":"<pre><code>import Control.Concurrent.Async\nimport Control.Exception (try, SomeException)\n\nsafeComputation :: IO (Either SomeException Int)\nsafeComputation = do\n    result &lt;- async riskyComputation\n    try (wait result)\n</code></pre>"},{"location":"haskell/part-7/#withasync","title":"withAsync\uff08\u30ea\u30bd\u30fc\u30b9\u5b89\u5168\uff09","text":"<pre><code>import Control.Concurrent.Async\n\n-- \u5b8c\u4e86\u5f8c\u306b\u81ea\u52d5\u7684\u306b\u30ad\u30e3\u30f3\u30bb\u30eb\nwithAsync action $ \\handle -&gt; do\n    result &lt;- wait handle\n    processResult result\n</code></pre>"},{"location":"haskell/part-7/#async_1","title":"async \u95a2\u6570\u4e00\u89a7","text":"\u95a2\u6570 \u8aac\u660e async \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u5b9f\u884c wait \u5b8c\u4e86\u5f85\u6a5f cancel \u30ad\u30e3\u30f3\u30bb\u30eb race \u7af6\u4e89 concurrently \u4e21\u65b9\u4e26\u884c\u5b9f\u884c mapConcurrently \u4e26\u5217 map withAsync \u30ea\u30bd\u30fc\u30b9\u5b89\u5168\u306a\u5b9f\u884c"},{"location":"haskell/part-7/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VIII \u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-8/","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":""},{"location":"haskell/part-8/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068 mapConcurrently \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"haskell/part-8/#mapreduce","title":"MapReduce \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"haskell/part-8/#_2","title":"\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u5b9f\u88c5","text":"<pre><code>import Control.Concurrent.Async (mapConcurrently)\nimport Data.Char (toLower)\nimport Data.Map.Strict (Map)\nimport qualified Data.Map.Strict as Map\n\n-- | Map: Convert text to (word, 1) pairs\nmapPhase :: String -&gt; [(String, Int)]\nmapPhase text =\n    [(map toLower word, 1) | word &lt;- words text, not (null word)]\n\n-- | Reduce: Aggregate word counts\nreducePhase :: [(String, Int)] -&gt; Map String Int\nreducePhase = foldl' addPair Map.empty\n  where\n    addPair acc (word, count) = Map.insertWith (+) word count acc\n\n-- | MapReduce: Count words in multiple texts\ncountWords :: [String] -&gt; Map String Int\ncountWords texts =\n    let mapped = concatMap mapPhase texts\n    in reducePhase mapped\n</code></pre>"},{"location":"haskell/part-8/#_3","title":"\u4e26\u5217\u7248","text":"<pre><code>-- | MapReduce with parallel execution\ncountWordsParallel :: [String] -&gt; IO (Map String Int)\ncountWordsParallel [] = return Map.empty\ncountWordsParallel texts = do\n    -- Map phase (parallel)\n    mapped &lt;- mapConcurrently (return . mapPhase) texts\n    -- Reduce phase\n    return $ reducePhase (concat mapped)\n</code></pre>"},{"location":"haskell/part-8/#_4","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>main :: IO ()\nmain = do\n    let texts = [\"hello world\", \"hello haskell\", \"world of haskell\"]\n\n    result &lt;- countWordsParallel texts\n    -- fromList [(\"hello\",2),(\"haskell\",2),(\"of\",1),(\"world\",2)]\n    print result\n</code></pre>"},{"location":"haskell/part-8/#mapconcurrently","title":"mapConcurrently","text":"<pre><code>import Control.Concurrent.Async\n\n-- \u4e26\u5217 map\nresults &lt;- mapConcurrently processItem items\n\n-- \u4e26\u5217 filter + map\nresults &lt;- mapConcurrently (\\x -&gt;\n    if condition x\n        then return (Just (process x))\n        else return Nothing\n    ) items\n</code></pre>"},{"location":"haskell/part-8/#_5","title":"\u307e\u3068\u3081","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u5b66\u3093\u3060\u5185\u5bb9:</p> Part \u30c8\u30d4\u30c3\u30af \u30ad\u30fc\u30dd\u30a4\u30f3\u30c8 I \u9010\u6b21\u51e6\u7406 Maybe\u3001\u7d14\u7c8b\u95a2\u6570 II \u30b9\u30ec\u30c3\u30c9 forkIO\u3001async III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 STM\u3001TVar IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001Pipeline V \u540c\u671f STM\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u30d5\u30ea\u30fc VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 async VII \u975e\u540c\u671f race\u3001concurrently VIII \u5206\u6563\u51e6\u7406 MapReduce"},{"location":"haskell/part-8/#_6","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Parallel and Concurrent Programming in Haskell</li> <li>async package</li> <li>stm package</li> <li>Grokking Concurrency</li> </ul>"},{"location":"java/","title":"Java \u3067\u5b66\u3076\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"java/#_1","title":"\u6982\u8981","text":"<p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001Grokking Concurrency \u306e\u5185\u5bb9\u3092 Java 21 \u3067\u5b9f\u88c5\u3057\u306a\u304c\u3089\u5b66\u3073\u307e\u3059\u3002TDD\uff08\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\uff09\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30b3\u30fc\u30c9\u4f8b\u3068\u3001\u8a73\u7d30\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u901a\u3058\u3066\u3001\u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e\u304b\u3089\u5fdc\u7528\u307e\u3067\u3092\u7406\u89e3\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"java/#_2","title":"\u76ee\u6b21","text":""},{"location":"java/#part-i","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":"<p>\u9010\u6b21\u51e6\u7406\u306e\u7279\u5fb4\u3068\u9650\u754c\u3092\u7406\u89e3\u3057\u3001\u306a\u305c\u4e26\u884c\u51e6\u7406\u304c\u5fc5\u8981\u304b\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part I - \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e</li> </ul>"},{"location":"java/#part-ii","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":"<p>OS \u30ec\u30d9\u30eb\u306e\u4e26\u884c\u51e6\u7406\u306e\u57fa\u672c\u5358\u4f4d\u3067\u3042\u308b\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part II - \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9</li> </ul>"},{"location":"java/#part-iii","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0","text":"<p>OS \u304c\u3069\u306e\u3088\u3046\u306b\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u308b\u304b\u3001\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part III - \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0</li> </ul>"},{"location":"java/#part-iv","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":"<p>Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part IV - \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3</li> </ul>"},{"location":"java/#part-v","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":"<p>Lock\u3001Semaphore\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part V - \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1</li> </ul>"},{"location":"java/#part-vi-io","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<p>Java NIO \u3092\u4f7f\u3063\u305f\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part VI - \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O</li> </ul>"},{"location":"java/#part-vii","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<p>CompletableFuture \u3068 Virtual Threads \u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part VII - \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0</li> </ul>"},{"location":"java/#part-viii","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":"<p>MapReduce \u30d1\u30bf\u30fc\u30f3\u3068\u5206\u6563\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>Part VIII - \u5206\u6563\u4e26\u5217\u51e6\u7406</li> </ul>"},{"location":"java/#_3","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<ul> <li>Java 21 (Virtual Threads, Record, Pattern Matching)</li> <li>Gradle (\u30d3\u30eb\u30c9\u30c4\u30fc\u30eb)</li> <li>JUnit 5 (\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af)</li> <li>AssertJ (\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u30e9\u30a4\u30d6\u30e9\u30ea)</li> </ul>"},{"location":"java/#_4","title":"\u5b9f\u884c\u65b9\u6cd5","text":""},{"location":"java/#_5","title":"\u30c6\u30b9\u30c8\u306e\u5b9f\u884c","text":"<pre><code>cd apps/java\n./gradlew test\n</code></pre>"},{"location":"java/#_6","title":"\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e\u5b9f\u884c","text":"<pre><code>cd apps/java\n./gradlew run -PmainClass=concurrency.ch02.PasswordCracker\n</code></pre>"},{"location":"java/#_7","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency - \u539f\u8457</li> <li>Java Concurrency in Practice - Java \u4e26\u884c\u51e6\u7406\u306e\u540d\u8457</li> <li>Java 21 Documentation</li> </ul>"},{"location":"java/part-1/","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":""},{"location":"java/part-1/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u4e26\u884c\u51e6\u7406\u3092\u5b66\u3076\u524d\u63d0\u3068\u3057\u3066\u9010\u6b21\u51e6\u7406\uff08Sequential Processing\uff09\u306e\u57fa\u672c\u3092\u7406\u89e3\u3057\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3092\u4f8b\u306b\u3001\u9010\u6b21\u51e6\u7406\u306e\u7279\u5fb4\u3068\u9650\u754c\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-1/#2","title":"\u7b2c2\u7ae0: \u9010\u6b21\u51e6\u7406","text":""},{"location":"java/part-1/#_2","title":"\u9010\u6b21\u51e6\u7406\u3068\u306f","text":"<p>\u9010\u6b21\u51e6\u7406\u306f\u3001\u30bf\u30b9\u30af\u3092\u4e00\u3064\u305a\u3064\u9806\u756a\u306b\u5b9f\u884c\u3059\u308b\u6700\u3082\u57fa\u672c\u7684\u306a\u51e6\u7406\u65b9\u5f0f\u3067\u3059\u3002</p> <p></p>"},{"location":"java/part-1/#_3","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u306e\u4f8b","text":"<p>\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\uff08\u7dcf\u5f53\u305f\u308a\uff09\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u89e3\u8aad\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u901a\u3058\u3066\u3001\u9010\u6b21\u51e6\u7406\u306e\u7279\u5fb4\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"java/part-1/#_4","title":"\u5b9f\u88c5\u306e\u5168\u4f53\u50cf","text":"<p>\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb: <code>apps/java/src/main/java/concurrency/ch02/PasswordCracker.java</code></p> <pre><code>package concurrency.ch02;\n\nimport java.nio.charset.StandardCharsets;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.ArrayList;\nimport java.util.HexFormat;\nimport java.util.List;\n\n/**\n * \u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\uff08\u9010\u6b21\u51e6\u7406\u7248\uff09\n * \u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\uff08\u7dcf\u5f53\u305f\u308a\uff09\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u89e3\u8aad\u3059\u308b\n */\npublic class PasswordCracker {\n\n    public static List&lt;String&gt; getCombinations(int length, int minNumber, int maxNumber) {\n        List&lt;String&gt; combinations = new ArrayList&lt;&gt;();\n        String format = \"%0\" + length + \"d\";\n\n        for (int i = minNumber; i &lt;= maxNumber; i++) {\n            combinations.add(String.format(format, i));\n        }\n        return combinations;\n    }\n\n    public static String getCryptoHash(String password) {\n        try {\n            MessageDigest digest = MessageDigest.getInstance(\"SHA-256\");\n            byte[] hash = digest.digest(password.getBytes(StandardCharsets.UTF_8));\n            return HexFormat.of().formatHex(hash);\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(\"SHA-256 algorithm not available\", e);\n        }\n    }\n\n    public static boolean checkPassword(String expectedCryptoHash, String possiblePassword) {\n        String actualCryptoHash = getCryptoHash(possiblePassword);\n        return expectedCryptoHash.equals(actualCryptoHash);\n    }\n\n    public static String crackPassword(String cryptoHash, int length) {\n        int maxNumber = (int) Math.pow(10, length) - 1;\n        List&lt;String&gt; combinations = getCombinations(length, 0, maxNumber);\n\n        for (String combination : combinations) {\n            if (checkPassword(cryptoHash, combination)) {\n                return combination;\n            }\n        }\n        return null;\n    }\n\n    public static void main(String[] args) {\n        String cryptoHash = \"ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f\";\n        int length = 8;\n\n        System.out.println(\"Processing number combinations sequentially\");\n        long startTime = System.nanoTime();\n\n        String result = crackPassword(cryptoHash, length);\n\n        long processTime = System.nanoTime() - startTime;\n        if (result != null) {\n            System.out.println(\"PASSWORD CRACKED: \" + result);\n        }\n        System.out.printf(\"PROCESS TIME: %.3f seconds%n\", processTime / 1_000_000_000.0);\n    }\n}\n</code></pre>"},{"location":"java/part-1/#_5","title":"\u30b3\u30fc\u30c9\u306e\u89e3\u8aac","text":""},{"location":"java/part-1/#1","title":"1. \u30d1\u30b9\u30ef\u30fc\u30c9\u7d44\u307f\u5408\u308f\u305b\u306e\u751f\u6210","text":"<pre><code>public static List&lt;String&gt; getCombinations(int length, int minNumber, int maxNumber) {\n    List&lt;String&gt; combinations = new ArrayList&lt;&gt;();\n    String format = \"%0\" + length + \"d\";  // \u5148\u982d\u30bc\u30ed\u57cb\u3081\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\n    for (int i = minNumber; i &lt;= maxNumber; i++) {\n        combinations.add(String.format(format, i));\n    }\n    return combinations;\n}\n</code></pre> <p>8\u6841\u306e\u6570\u5b57\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5834\u5408\u3001<code>00000000</code> \u304b\u3089 <code>99999999</code> \u307e\u3067 1\u5104\u901a\u308a\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u751f\u6210\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-1/#2_1","title":"2. \u30cf\u30c3\u30b7\u30e5\u95a2\u6570","text":"<pre><code>public static String getCryptoHash(String password) {\n    MessageDigest digest = MessageDigest.getInstance(\"SHA-256\");\n    byte[] hash = digest.digest(password.getBytes(StandardCharsets.UTF_8));\n    return HexFormat.of().formatHex(hash);  // Java 17+ \u306e HexFormat\n}\n</code></pre> <p>SHA-256 \u3092\u4f7f\u7528\u3057\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u307e\u3059\u3002<code>HexFormat</code> \u306f Java 17 \u4ee5\u964d\u3067\u5229\u7528\u53ef\u80fd\u306a\u4fbf\u5229\u306a\u30af\u30e9\u30b9\u3067\u3059\u3002</p>"},{"location":"java/part-1/#3","title":"3. \u30d1\u30b9\u30ef\u30fc\u30c9\u30c1\u30a7\u30c3\u30af","text":"<pre><code>public static boolean checkPassword(String expectedCryptoHash, String possiblePassword) {\n    String actualCryptoHash = getCryptoHash(possiblePassword);\n    return expectedCryptoHash.equals(actualCryptoHash);\n}\n</code></pre> <p>\u5019\u88dc\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30cf\u30c3\u30b7\u30e5\u3068\u3001\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-1/#_6","title":"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6e2c\u5b9a","text":"<pre><code>long startTime = System.nanoTime();\n// ... \u51e6\u7406 ...\nlong processTime = System.nanoTime() - startTime;\nSystem.out.printf(\"PROCESS TIME: %.3f seconds%n\", processTime / 1_000_000_000.0);\n</code></pre> <p><code>System.nanoTime()</code> \u306f\u9ad8\u7cbe\u5ea6\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30ab\u30a6\u30f3\u30bf\u30fc\u3067\u3001\u7d4c\u904e\u6642\u9593\u306e\u6e2c\u5b9a\u306b\u9069\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"java/part-1/#tdd","title":"TDD \u306b\u3088\u308b\u30c6\u30b9\u30c8","text":"<p>\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb: <code>apps/java/src/test/java/concurrency/ch02/PasswordCrackerTest.java</code></p> <pre><code>@Test\n@DisplayName(\"4\u6841\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u751f\u6210\u3067\u304d\u308b\")\nvoid shouldGenerateFourDigitCombinations() {\n    List&lt;String&gt; combinations = PasswordCracker.getCombinations(4, 0, 9);\n\n    assertThat(combinations)\n        .hasSize(10)\n        .containsExactly(\n            \"0000\", \"0001\", \"0002\", \"0003\", \"0004\",\n            \"0005\", \"0006\", \"0007\", \"0008\", \"0009\"\n        );\n}\n\n@Test\n@DisplayName(\"SHA-256\u30cf\u30c3\u30b7\u30e5\u3092\u8a08\u7b97\u3067\u304d\u308b\")\nvoid shouldCalculateSha256Hash() {\n    String hash = PasswordCracker.getCryptoHash(\"12345678\");\n\n    assertThat(hash)\n        .isEqualTo(\"ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f\");\n}\n\n@Test\n@DisplayName(\"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30af\u30e9\u30c3\u30af\u3067\u304d\u308b\")\nvoid shouldCrackPassword() {\n    String cryptoHash = PasswordCracker.getCryptoHash(\"1234\");\n\n    String result = PasswordCracker.crackPassword(cryptoHash, 4);\n\n    assertThat(result).isEqualTo(\"1234\");\n}\n</code></pre>"},{"location":"java/part-1/#_7","title":"\u9010\u6b21\u51e6\u7406\u306e\u7279\u5fb4","text":""},{"location":"java/part-1/#_8","title":"\u5229\u70b9","text":"\u5229\u70b9 \u8aac\u660e \u30b7\u30f3\u30d7\u30eb \u5b9f\u88c5\u304c\u7c21\u5358\u3067\u7406\u89e3\u3057\u3084\u3059\u3044 \u4e88\u6e2c\u53ef\u80fd \u5b9f\u884c\u9806\u5e8f\u304c\u6c7a\u5b9a\u7684 \u30c7\u30d0\u30c3\u30b0\u5bb9\u6613 \u554f\u984c\u306e\u7279\u5b9a\u304c\u5bb9\u6613 \u7af6\u5408\u306a\u3057 \u5171\u6709\u30ea\u30bd\u30fc\u30b9\u306e\u7af6\u5408\u304c\u767a\u751f\u3057\u306a\u3044"},{"location":"java/part-1/#_9","title":"\u9650\u754c","text":"\u9650\u754c \u8aac\u660e \u9045\u3044 1\u5104\u901a\u308a\u30921\u3064\u305a\u3064\u51e6\u7406\u3059\u308b\u305f\u3081\u6642\u9593\u304c\u304b\u304b\u308b \u30ea\u30bd\u30fc\u30b9\u975e\u52b9\u7387 \u30de\u30eb\u30c1\u30b3\u30a2 CPU \u3092\u6d3b\u7528\u3067\u304d\u306a\u3044 \u30b9\u30b1\u30fc\u30eb\u3057\u306a\u3044 \u30c7\u30fc\u30bf\u91cf\u306b\u6bd4\u4f8b\u3057\u3066\u51e6\u7406\u6642\u9593\u304c\u5897\u52a0"},{"location":"java/part-1/#_10","title":"\u306a\u305c\u4e26\u884c\u51e6\u7406\u304c\u5fc5\u8981\u304b","text":"<p>8\u6841\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3067\u306f\u30011\u5104\u901a\u308a\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u9806\u756a\u306b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>4\u30b3\u30a2 CPU \u304c\u3042\u3063\u3066\u3082\u3001\u9010\u6b21\u51e6\u7406\u3067\u306f1\u30b3\u30a2\u3057\u304b\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002\u4e26\u884c\u51e6\u7406\u3092\u4f7f\u3048\u3070\u3001\u8907\u6570\u30b3\u30a2\u306b\u4f5c\u696d\u3092\u5206\u6563\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"java/part-1/#_11","title":"\u5b9f\u884c\u65b9\u6cd5","text":""},{"location":"java/part-1/#_12","title":"\u30c6\u30b9\u30c8\u306e\u5b9f\u884c","text":"<pre><code>cd apps/java\n./gradlew test\n</code></pre>"},{"location":"java/part-1/#_13","title":"\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e\u5b9f\u884c","text":"<pre><code>cd apps/java\n./gradlew run\n</code></pre>"},{"location":"java/part-1/#_14","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part II \u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3068\u30d7\u30ed\u30bb\u30b9\u3092\u4f7f\u3063\u3066\u4e26\u884c\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3092\u4e26\u5217\u5316\u3057\u3001\u51e6\u7406\u6642\u9593\u3092\u5927\u5e45\u306b\u77ed\u7e2e\u3059\u308b\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"java/part-1/#_15","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/java/src/main/java/concurrency/ch02/PasswordCracker.java</li> <li>apps/java/src/test/java/concurrency/ch02/PasswordCrackerTest.java</li> </ul>"},{"location":"java/part-2/","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":""},{"location":"java/part-2/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001OS \u30ec\u30d9\u30eb\u306e\u4e26\u884c\u51e6\u7406\u306e\u57fa\u672c\u5358\u4f4d\u3067\u3042\u308b\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u3092\u5b66\u3073\u307e\u3059\u3002Java \u3067\u306e\u5b9f\u88c5\u65b9\u6cd5\u3068\u3001\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3001\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u306b\u3064\u3044\u3066\u3082\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-2/#4","title":"\u7b2c4\u7ae0: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u790e","text":""},{"location":"java/part-2/#_2","title":"\u30d7\u30ed\u30bb\u30b9\u3068\u306f","text":"<p>\u30d7\u30ed\u30bb\u30b9\u306f\u3001\u5b9f\u884c\u4e2d\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\u72ec\u81ea\u306e\u30e1\u30e2\u30ea\u7a7a\u9593\u3001\u30d5\u30a1\u30a4\u30eb\u30cf\u30f3\u30c9\u30eb\u3001\u305d\u306e\u4ed6\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6301\u3061\u307e\u3059\u3002</p>"},{"location":"java/part-2/#_3","title":"\u30b9\u30ec\u30c3\u30c9\u3068\u306f","text":"<p>\u30b9\u30ec\u30c3\u30c9\u306f\u3001\u30d7\u30ed\u30bb\u30b9\u5185\u306e\u5b9f\u884c\u5358\u4f4d\u3067\u3059\u3002\u540c\u3058\u30d7\u30ed\u30bb\u30b9\u5185\u306e\u30b9\u30ec\u30c3\u30c9\u306f\u30e1\u30e2\u30ea\u7a7a\u9593\u3092\u5171\u6709\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-2/#vs","title":"\u30d7\u30ed\u30bb\u30b9 vs \u30b9\u30ec\u30c3\u30c9","text":"\u7279\u5fb4 \u30d7\u30ed\u30bb\u30b9 \u30b9\u30ec\u30c3\u30c9 \u30e1\u30e2\u30ea \u72ec\u7acb \u5171\u6709 \u4f5c\u6210\u30b3\u30b9\u30c8 \u9ad8\u3044 \u4f4e\u3044 \u901a\u4fe1 IPC \u304c\u5fc5\u8981 \u76f4\u63a5\u5171\u6709\u53ef\u80fd \u5b89\u5168\u6027 \u9ad8\u3044 \u7af6\u5408\u306e\u53ef\u80fd\u6027"},{"location":"java/part-2/#_4","title":"\u30b9\u30ec\u30c3\u30c9\u306e\u4f5c\u6210\u3068\u5b9f\u884c","text":"<p>\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb: <code>apps/java/src/main/java/concurrency/ch04/ThreadBasics.java</code></p> <pre><code>package concurrency.ch04;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.IntConsumer;\n\npublic class ThreadBasics {\n\n    /**\n     * \u30ef\u30fc\u30ab\u30fc\u30b9\u30ec\u30c3\u30c9\u3092\u4f5c\u6210\n     */\n    public static Thread createWorkerThread(Runnable task) {\n        return new Thread(task);\n    }\n\n    /**\n     * \u8907\u6570\u306e\u30ef\u30fc\u30ab\u30fc\u30b9\u30ec\u30c3\u30c9\u3092\u4f5c\u6210\n     */\n    public static List&lt;Thread&gt; createMultipleWorkers(int count, IntConsumer task) {\n        List&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; count; i++) {\n            final int index = i;\n            Thread thread = new Thread(() -&gt; task.accept(index), \"Worker-\" + i);\n            threads.add(thread);\n        }\n        return threads;\n    }\n\n    /**\n     * \u540d\u524d\u4ed8\u304d\u30b9\u30ec\u30c3\u30c9\u3092\u4f5c\u6210\n     */\n    public static Thread createNamedThread(String name, Runnable task) {\n        return new Thread(task, name);\n    }\n\n    /**\n     * \u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30ec\u30c3\u30c9\u6570\u3092\u53d6\u5f97\n     */\n    public static int getActiveThreadCount() {\n        return Thread.activeCount();\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        System.out.println(\"Starting thread demo...\");\n        System.out.println(\"Current process: \" + ProcessHandle.current().pid());\n        System.out.println(\"Thread count: \" + getActiveThreadCount());\n\n        int numThreads = 5;\n        List&lt;Thread&gt; threads = createMultipleWorkers(numThreads, i -&gt; {\n            String name = Thread.currentThread().getName();\n            System.out.println(name + \" doing \" + i + \" work\");\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        });\n\n        for (Thread thread : threads) {\n            thread.start();\n        }\n\n        System.out.println(\"Thread count: \" + getActiveThreadCount());\n\n        for (Thread thread : threads) {\n            thread.join();\n        }\n\n        System.out.println(\"All workers done!\");\n    }\n}\n</code></pre>"},{"location":"java/part-2/#_5","title":"\u5b9f\u884c\u7d50\u679c","text":"<pre><code>Starting thread demo...\nCurrent process: 12345\nThread count: 1\nWorker-0 doing 0 work\nWorker-1 doing 1 work\nWorker-2 doing 2 work\nWorker-3 doing 3 work\nWorker-4 doing 4 work\nThread count: 6\nAll workers done!\n</code></pre>"},{"location":"java/part-2/#5","title":"\u7b2c5\u7ae0: \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3068\u4e26\u5217\u51e6\u7406","text":""},{"location":"java/part-2/#executorservice","title":"ExecutorService \u306b\u3088\u308b\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb","text":"<p>Java \u306e <code>java.util.concurrent</code> \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u3046\u3068\u3001\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3092\u7c21\u5358\u306b\u5229\u7528\u3067\u304d\u307e\u3059\u3002</p> <pre><code>import java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\n// \u56fa\u5b9a\u30b5\u30a4\u30ba\u306e\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\nExecutorService executor = Executors.newFixedThreadPool(4);\n\n// \u30bf\u30b9\u30af\u3092\u9001\u4fe1\nexecutor.submit(() -&gt; {\n    System.out.println(\"Task running in \" + Thread.currentThread().getName());\n});\n\n// \u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\nexecutor.shutdown();\n</code></pre>"},{"location":"java/part-2/#virtual-threadsjava-21","title":"Virtual Threads\uff08Java 21\uff09","text":"<p>Java 21 \u4ee5\u964d\u3067\u306f\u3001Virtual Threads\uff08\u4eee\u60f3\u30b9\u30ec\u30c3\u30c9\uff09\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002</p> <pre><code>// Virtual Thread \u3067\u5b9f\u884c\nThread.startVirtualThread(() -&gt; {\n    System.out.println(\"Running in virtual thread\");\n});\n\n// Virtual Thread \u306e ExecutorService\ntry (var executor = Executors.newVirtualThreadPerTaskExecutor()) {\n    executor.submit(() -&gt; {\n        System.out.println(\"Task in virtual thread\");\n    });\n}\n</code></pre>"},{"location":"java/part-2/#_6","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0","text":"<p>Part I \u3067\u5b66\u3093\u3060\u9010\u6b21\u51e6\u7406\u7248\u3092\u3001\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u3067\u4e26\u5217\u5316\u3057\u307e\u3059\u3002</p> <p>\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb: <code>apps/java/src/main/java/concurrency/ch05/PasswordCrackerParallel.java</code></p> <pre><code>package concurrency.ch05;\n\nimport concurrency.ch02.PasswordCracker;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\n\npublic class PasswordCrackerParallel {\n\n    public record ChunkRange(int start, int end) {}\n\n    /**\n     * \u30d1\u30b9\u30ef\u30fc\u30c9\u7bc4\u56f2\u3092\u30c1\u30e3\u30f3\u30af\u306b\u5206\u5272\n     */\n    public static List&lt;ChunkRange&gt; getChunks(int numChunks, int length) {\n        int maxNumber = (int) Math.pow(10, length) - 1;\n        int chunkSize = (maxNumber + 1) / numChunks;\n\n        List&lt;ChunkRange&gt; chunks = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; numChunks; i++) {\n            int start = i * chunkSize;\n            int end = (i == numChunks - 1) ? maxNumber : start + chunkSize - 1;\n            chunks.add(new ChunkRange(start, end));\n        }\n        return chunks;\n    }\n\n    /**\n     * \u30c1\u30e3\u30f3\u30af\u5185\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u63a2\u7d22\n     */\n    public static String crackChunk(String cryptoHash, int length,\n                                     int chunkStart, int chunkEnd) {\n        List&lt;String&gt; combinations =\n            PasswordCracker.getCombinations(length, chunkStart, chunkEnd);\n\n        for (String combination : combinations) {\n            if (PasswordCracker.checkPassword(cryptoHash, combination)) {\n                return combination;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * \u8907\u6570\u30b9\u30ec\u30c3\u30c9\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4e26\u5217\u89e3\u8aad\n     */\n    public static String crackPasswordParallel(String cryptoHash, int length) {\n        int numCores = Runtime.getRuntime().availableProcessors();\n        List&lt;ChunkRange&gt; chunks = getChunks(numCores, length);\n\n        try (ExecutorService executor = Executors.newFixedThreadPool(numCores)) {\n            List&lt;Future&lt;String&gt;&gt; futures = new ArrayList&lt;&gt;();\n\n            for (ChunkRange chunk : chunks) {\n                Future&lt;String&gt; future = executor.submit(() -&gt;\n                    crackChunk(cryptoHash, length, chunk.start(), chunk.end())\n                );\n                futures.add(future);\n            }\n\n            for (Future&lt;String&gt; future : futures) {\n                String result = future.get();\n                if (result != null) {\n                    executor.shutdownNow();\n                    return result;\n                }\n            }\n        } catch (InterruptedException | ExecutionException e) {\n            Thread.currentThread().interrupt();\n        }\n        return null;\n    }\n}\n</code></pre>"},{"location":"java/part-2/#_7","title":"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6bd4\u8f03","text":"\u51e6\u7406\u65b9\u5f0f \u51e6\u7406\u6642\u9593 CPU \u4f7f\u7528\u7387 \u9010\u6b21\u51e6\u7406 ~60\u79d2 25% (1\u30b3\u30a2) \u4e26\u5217\u51e6\u7406\uff084\u30b3\u30a2\uff09 ~15\u79d2 100% (\u5168\u30b3\u30a2)"},{"location":"java/part-2/#java-api","title":"Java \u306e\u4e26\u884c\u51e6\u7406 API","text":""},{"location":"java/part-2/#_8","title":"\u4e3b\u8981\u30af\u30e9\u30b9","text":"\u30af\u30e9\u30b9 \u8aac\u660e <code>Thread</code> \u57fa\u672c\u7684\u306a\u30b9\u30ec\u30c3\u30c9\u30af\u30e9\u30b9 <code>Runnable</code> \u5f15\u6570\u306a\u3057\u3001\u623b\u308a\u5024\u306a\u3057\u306e\u30bf\u30b9\u30af <code>Callable&lt;V&gt;</code> \u623b\u308a\u5024\u3092\u6301\u3064\u30bf\u30b9\u30af <code>Future&lt;V&gt;</code> \u975e\u540c\u671f\u8a08\u7b97\u306e\u7d50\u679c <code>ExecutorService</code> \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb"},{"location":"java/part-2/#executorservice_1","title":"ExecutorService \u306e\u7a2e\u985e","text":"\u30d5\u30a1\u30af\u30c8\u30ea\u30e1\u30bd\u30c3\u30c9 \u8aac\u660e <code>newFixedThreadPool(n)</code> \u56fa\u5b9a\u30b5\u30a4\u30ba\u306e\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb <code>newCachedThreadPool()</code> \u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30b9\u30ec\u30c3\u30c9\u3092\u4f5c\u6210 <code>newSingleThreadExecutor()</code> \u5358\u4e00\u30b9\u30ec\u30c3\u30c9 <code>newVirtualThreadPerTaskExecutor()</code> Virtual Thread\uff08Java 21+\uff09"},{"location":"java/part-2/#_9","title":"\u4f7f\u3044\u5206\u3051\u306e\u6307\u91dd","text":"\u30bf\u30b9\u30af\u30bf\u30a4\u30d7 \u63a8\u5968 I/O \u30d0\u30a6\u30f3\u30c9 \u30b9\u30ec\u30c3\u30c9 / Virtual Thread CPU \u30d0\u30a6\u30f3\u30c9 \u30b9\u30ec\u30c3\u30c9\uff08\u30b3\u30a2\u6570\u5206\uff09 \u5927\u91cf\u306e\u77ed\u3044\u30bf\u30b9\u30af Virtual Thread"},{"location":"java/part-2/#_10","title":"\u5b9f\u884c\u65b9\u6cd5","text":""},{"location":"java/part-2/#_11","title":"\u30c6\u30b9\u30c8\u306e\u5b9f\u884c","text":"<pre><code>cd apps/java\n./gradlew test --tests \"concurrency.ch04.*\"\n./gradlew test --tests \"concurrency.ch05.*\"\n</code></pre>"},{"location":"java/part-2/#_12","title":"\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e\u5b9f\u884c","text":"<pre><code>cd apps/java\n./gradlew run -PmainClass=concurrency.ch04.ThreadBasics\n./gradlew run -PmainClass=concurrency.ch05.PasswordCrackerParallel\n</code></pre>"},{"location":"java/part-2/#_13","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part III \u3067\u306f\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u306e\u6982\u5ff5\u3092\u5b66\u3073\u307e\u3059\u3002OS \u304c\u3069\u306e\u3088\u3046\u306b\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u308b\u304b\u3001\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-2/#_14","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/java/src/main/java/concurrency/ch04/ThreadBasics.java</li> <li>apps/java/src/main/java/concurrency/ch05/PasswordCrackerParallel.java</li> </ul>"},{"location":"java/part-3/","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"java/part-3/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001OS \u304c\u3069\u306e\u3088\u3046\u306b\u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u540c\u6642\u306b\u5b9f\u884c\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u305b\u308b\u304b\u3092\u5b66\u3073\u307e\u3059\u3002\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u306e\u5b9f\u88c5\u3092\u901a\u3058\u3066\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-3/#6","title":"\u7b2c6\u7ae0: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0","text":""},{"location":"java/part-3/#_2","title":"\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u306f","text":"<p>\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u306f\u3001\u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u306a\u304c\u3089\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u3042\u305f\u304b\u3082\u540c\u6642\u306b\u5b9f\u884c\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u305b\u308b\u6280\u8853\u3067\u3059\u3002</p>"},{"location":"java/part-3/#_3","title":"\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0","text":"<p>CPU \u6642\u9593\u3092\u5c0f\u3055\u306a\u30b9\u30e9\u30a4\u30b9\u306b\u5206\u5272\u3057\u3001\u5404\u30bf\u30b9\u30af\u306b\u9806\u756a\u306b\u5272\u308a\u5f53\u3066\u307e\u3059\u3002</p> <p></p>"},{"location":"java/part-3/#_4","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u306e\u5b9f\u88c5","text":"<p>\u30a2\u30fc\u30b1\u30fc\u30c9\u30b2\u30fc\u30e0\uff08\u30d1\u30c3\u30af\u30de\u30f3\uff09\u3092\u4f8b\u306b\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-3/#3","title":"\u30b2\u30fc\u30e0\u306e3\u3064\u306e\u30bf\u30b9\u30af","text":"<ol> <li>\u5165\u529b\u51e6\u7406 - \u30e6\u30fc\u30b6\u30fc\u306e\u64cd\u4f5c\u3092\u53d7\u3051\u4ed8\u3051\u308b</li> <li>\u30b2\u30fc\u30e0\u8a08\u7b97 - \u30b2\u30fc\u30e0\u4e16\u754c\u306e\u72b6\u614b\u3092\u66f4\u65b0</li> <li>\u63cf\u753b\u51e6\u7406 - \u753b\u9762\u3092\u66f4\u65b0</li> </ol> <p>\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb: <code>apps/java/src/main/java/concurrency/ch06/GameLoop.java</code></p> <pre><code>package concurrency.ch06;\n\nimport java.util.function.BooleanSupplier;\n\npublic class GameLoop {\n\n    public record Task(String name, Runnable action) implements Runnable {\n        @Override\n        public void run() {\n            action.run();\n        }\n    }\n\n    private final Runnable inputTask;\n    private final Runnable computeTask;\n    private final Runnable renderTask;\n    private final BooleanSupplier continueCondition;\n\n    public GameLoop(Runnable inputTask, Runnable computeTask,\n                    Runnable renderTask, BooleanSupplier continueCondition) {\n        this.inputTask = inputTask;\n        this.computeTask = computeTask;\n        this.renderTask = renderTask;\n        this.continueCondition = continueCondition;\n    }\n\n    public void run() {\n        while (continueCondition.getAsBoolean()) {\n            inputTask.run();\n            computeTask.run();\n            renderTask.run();\n        }\n    }\n}\n</code></pre>"},{"location":"java/part-3/#_5","title":"\u30a4\u30d9\u30f3\u30c8\u306b\u3088\u308b\u540c\u671f","text":"<p><code>ProcessorFreeEvent</code> \u30af\u30e9\u30b9\u306f\u3001Python \u306e <code>threading.Event</code> \u306b\u76f8\u5f53\u3059\u308b\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <pre><code>public static class ProcessorFreeEvent {\n    private final Lock lock = new ReentrantLock();\n    private final Condition condition = lock.newCondition();\n    private boolean signaled = false;\n\n    public void waitForSignal() {\n        lock.lock();\n        try {\n            while (!signaled) {\n                condition.await();\n            }\n            signaled = false;\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public void signal() {\n        lock.lock();\n        try {\n            signaled = true;\n            condition.signal();\n        } finally {\n            lock.unlock();\n        }\n    }\n}\n</code></pre>"},{"location":"java/part-3/#_6","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1","text":"<p>\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u308b\u969b\u3001\u73fe\u5728\u306e\u30bf\u30b9\u30af\u306e\u72b6\u614b\u3092\u4fdd\u5b58\u3057\u3001\u6b21\u306e\u30bf\u30b9\u30af\u306e\u72b6\u614b\u3092\u5fa9\u5143\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-3/#_7","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306e\u30b3\u30b9\u30c8","text":"<ul> <li>\u30ec\u30b8\u30b9\u30bf\u306e\u4fdd\u5b58\u3068\u5fa9\u5143</li> <li>\u30e1\u30e2\u30ea\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u7121\u52b9\u5316</li> <li>TLB\uff08Translation Lookaside Buffer\uff09\u306e\u30d5\u30e9\u30c3\u30b7\u30e5</li> </ul>"},{"location":"java/part-3/#vs","title":"\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6 vs \u5354\u8abf\u7684","text":""},{"location":"java/part-3/#_8","title":"\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u30fb\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0","text":"<ul> <li>OS \u304c\u30bf\u30b9\u30af\u3092\u5f37\u5236\u7684\u306b\u4e2d\u65ad</li> <li>\u30bf\u30a4\u30e0\u30b9\u30e9\u30a4\u30b9\u3067\u5236\u5fa1</li> <li>\u516c\u5e73\u306a\u30ea\u30bd\u30fc\u30b9\u914d\u5206</li> </ul>"},{"location":"java/part-3/#_9","title":"\u5354\u8abf\u7684\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0","text":"<ul> <li>\u30bf\u30b9\u30af\u304c\u81ea\u767a\u7684\u306b\u5236\u5fa1\u3092\u8b72\u308b</li> <li><code>yield</code> \u3067\u5236\u5fa1\u3092\u8fd4\u3059</li> <li>\u52b9\u7387\u7684\u3060\u304c\u3001\u884c\u5100\u306e\u60aa\u3044\u30bf\u30b9\u30af\u306b\u6ce8\u610f</li> </ul>"},{"location":"java/part-3/#_10","title":"\u5b9f\u884c\u65b9\u6cd5","text":""},{"location":"java/part-3/#_11","title":"\u30c6\u30b9\u30c8\u306e\u5b9f\u884c","text":"<pre><code>cd apps/java\n./gradlew test --tests \"concurrency.ch06.*\"\n</code></pre>"},{"location":"java/part-3/#_12","title":"\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e\u5b9f\u884c","text":"<pre><code>cd apps/java\n./gradlew run -PmainClass=concurrency.ch06.GameLoop\n</code></pre>"},{"location":"java/part-3/#_13","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part IV \u3067\u306f\u3001\u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3\uff08Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\uff09\u3092\u5b66\u3073\u307e\u3059\u3002\u8907\u96d1\u306a\u554f\u984c\u3092\u4e26\u5217\u5316\u53ef\u80fd\u306a\u30b5\u30d6\u30bf\u30b9\u30af\u306b\u5206\u5272\u3059\u308b\u624b\u6cd5\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-3/#_14","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/java/src/main/java/concurrency/ch06/GameLoop.java</li> </ul>"},{"location":"java/part-4/","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"java/part-4/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8907\u96d1\u306a\u554f\u984c\u3092\u4e26\u5217\u5316\u53ef\u80fd\u306a\u30b5\u30d6\u30bf\u30b9\u30af\u306b\u5206\u5272\u3059\u308b\u624b\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5\u3092\u901a\u3058\u3066\u3001\u4e26\u5217\u51e6\u7406\u306e\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-4/#7","title":"\u7b2c7\u7ae0: \u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"java/part-4/#vs","title":"\u30c7\u30fc\u30bf\u4e26\u5217 vs \u30bf\u30b9\u30af\u4e26\u5217","text":"\u30d1\u30bf\u30fc\u30f3 \u8aac\u660e \u4f8b \u30c7\u30fc\u30bf\u4e26\u5217 \u540c\u3058\u64cd\u4f5c\u3092\u8907\u6570\u306e\u30c7\u30fc\u30bf\u306b\u9069\u7528 \u914d\u5217\u306e\u5404\u8981\u7d20\u30922\u500d \u30bf\u30b9\u30af\u4e26\u5217 \u7570\u306a\u308b\u64cd\u4f5c\u3092\u540c\u6642\u306b\u5b9f\u884c \u5165\u529b\u30fb\u8a08\u7b97\u30fb\u51fa\u529b"},{"location":"java/part-4/#forkjoin","title":"Fork/Join \u30d1\u30bf\u30fc\u30f3","text":"<p>\u554f\u984c\u3092\u5206\u5272\u3057\u3001\u4e26\u5217\u306b\u51e6\u7406\u3057\u305f\u5f8c\u3001\u7d50\u679c\u3092\u7d71\u5408\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002</p>"},{"location":"java/part-4/#_2","title":"\u6295\u7968\u96c6\u8a08\u306e\u4f8b","text":"<p>\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb: <code>apps/java/src/main/java/concurrency/ch07/VoteCounter.java</code></p> <pre><code>public class VoteCounter {\n\n    public static Map&lt;Integer, Integer&gt; countVotes(List&lt;Integer&gt; votes) {\n        Map&lt;Integer, Integer&gt; result = new HashMap&lt;&gt;();\n        for (Integer vote : votes) {\n            result.merge(vote, 1, Integer::sum);\n        }\n        return result;\n    }\n\n    public static Map&lt;Integer, Integer&gt; countVotesParallel(List&lt;Integer&gt; votes, int numWorkers) {\n        int chunkSize = (int) Math.ceil((double) votes.size() / numWorkers);\n        List&lt;List&lt;Integer&gt;&gt; chunks = new ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; votes.size(); i += chunkSize) {\n            chunks.add(votes.subList(i, Math.min(i + chunkSize, votes.size())));\n        }\n\n        try (ExecutorService executor = Executors.newFixedThreadPool(numWorkers)) {\n            // Fork: \u5404\u30ef\u30fc\u30ab\u30fc\u306b\u30c1\u30e3\u30f3\u30af\u3092\u5272\u308a\u5f53\u3066\n            List&lt;Future&lt;Map&lt;Integer, Integer&gt;&gt;&gt; futures = new ArrayList&lt;&gt;();\n            for (List&lt;Integer&gt; chunk : chunks) {\n                futures.add(executor.submit(() -&gt; countVotes(chunk)));\n            }\n\n            // Join: \u7d50\u679c\u3092\u7d71\u5408\n            Map&lt;Integer, Integer&gt; total = new HashMap&lt;&gt;();\n            for (Future&lt;Map&lt;Integer, Integer&gt;&gt; future : futures) {\n                total = mergeResults(total, future.get());\n            }\n            return total;\n        }\n    }\n\n    public static Map&lt;Integer, Integer&gt; mergeResults(Map&lt;Integer, Integer&gt; result1,\n                                                      Map&lt;Integer, Integer&gt; result2) {\n        Map&lt;Integer, Integer&gt; merged = new HashMap&lt;&gt;(result1);\n        result2.forEach((key, value) -&gt; merged.merge(key, value, Integer::sum));\n        return merged;\n    }\n}\n</code></pre>"},{"location":"java/part-4/#forkjoin_1","title":"Fork/Join \u306e\u6d41\u308c","text":""},{"location":"java/part-4/#_3","title":"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3","text":"<p>\u51e6\u7406\u3092\u30b9\u30c6\u30fc\u30b8\u306b\u5206\u5272\u3057\u3001\u5404\u30b9\u30c6\u30fc\u30b8\u3092\u4e26\u5217\u306b\u5b9f\u884c\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002</p>"},{"location":"java/part-4/#_4","title":"\u6d17\u6fef\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u4f8b","text":"<p>\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb: <code>apps/java/src/main/java/concurrency/ch07/Pipeline.java</code></p> <pre><code>public class Pipeline&lt;T&gt; {\n\n    public record Stage&lt;I, O&gt;(String name, Function&lt;I, O&gt; processor) {}\n\n    private final List&lt;StageWorker&gt; workers = new ArrayList&lt;&gt;();\n    private final List&lt;BlockingQueue&lt;Object&gt;&gt; queues = new ArrayList&lt;&gt;();\n\n    public &lt;I, O&gt; void addStage(String name, Function&lt;I, O&gt; processor) {\n        // \u30b9\u30c6\u30fc\u30b8\u9593\u306e\u30ad\u30e5\u30fc\u3092\u8a2d\u5b9a\n        BlockingQueue&lt;Object&gt; inputQueue = queues.isEmpty() ?\n            new LinkedBlockingQueue&lt;&gt;() : queues.get(queues.size() - 1);\n        BlockingQueue&lt;Object&gt; outputQueue = new LinkedBlockingQueue&lt;&gt;();\n        queues.add(outputQueue);\n\n        workers.add(new StageWorker(name, inputQueue, outputQueue, processor));\n    }\n\n    public void start() {\n        for (StageWorker worker : workers) {\n            worker.start();\n        }\n    }\n\n    public void submit(T item) {\n        queues.get(0).offer(item);\n    }\n}\n</code></pre>"},{"location":"java/part-4/#_5","title":"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u6d41\u308c","text":""},{"location":"java/part-4/#blockingqueue","title":"BlockingQueue \u306b\u3088\u308b\u30b9\u30ec\u30c3\u30c9\u9593\u901a\u4fe1","text":"<p><code>java.util.concurrent.BlockingQueue</code> \u306f\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306a\u30ad\u30e5\u30fc\u3067\u3059\u3002</p> \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e <code>put(item)</code> \u30a2\u30a4\u30c6\u30e0\u3092\u8ffd\u52a0\uff08\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff09 <code>take()</code> \u30a2\u30a4\u30c6\u30e0\u3092\u53d6\u5f97\uff08\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff09 <code>offer(item)</code> \u30a2\u30a4\u30c6\u30e0\u3092\u8ffd\u52a0\uff08\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff09 <code>poll()</code> \u30a2\u30a4\u30c6\u30e0\u3092\u53d6\u5f97\uff08\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff09"},{"location":"java/part-4/#_6","title":"\u5b9f\u884c\u65b9\u6cd5","text":"<pre><code>cd apps/java\n./gradlew test --tests \"concurrency.ch07.*\"\n</code></pre>"},{"location":"java/part-4/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part V \u3067\u306f\u3001\u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1\u3092\u5b66\u3073\u307e\u3059\u3002\u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306a\u3069\u306e\u554f\u984c\u3068\u3001Lock\u3001Semaphore \u306b\u3088\u308b\u89e3\u6c7a\u7b56\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-4/#_8","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/java/src/main/java/concurrency/ch07/VoteCounter.java</li> <li>apps/java/src/main/java/concurrency/ch07/Pipeline.java</li> </ul>"},{"location":"java/part-5/","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"java/part-5/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u4e26\u884c\u51e6\u7406\u306b\u304a\u3051\u308b\u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1\u3092\u5b66\u3073\u307e\u3059\u3002\u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306a\u3069\u306e\u554f\u984c\u3068\u3001Lock\u3001Semaphore \u306b\u3088\u308b\u89e3\u6c7a\u7b56\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-5/#8-lock","title":"\u7b2c8\u7ae0: Lock \u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"java/part-5/#_2","title":"\u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3","text":"<p>\u8907\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u5171\u6709\u30ea\u30bd\u30fc\u30b9\u306b\u540c\u6642\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u4e88\u671f\u3057\u306a\u3044\u7d50\u679c\u304c\u767a\u751f\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"java/part-5/#_3","title":"\u9280\u884c\u53e3\u5ea7\u306e\u4f8b","text":"<p>\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb: <code>apps/java/src/main/java/concurrency/ch08/BankAccount.java</code></p> <pre><code>public class BankAccount {\n    private final Lock lock = new ReentrantLock();\n    private int balance;\n\n    public void deposit(int amount) {\n        lock.lock();\n        try {\n            balance += amount;\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public boolean withdraw(int amount) {\n        lock.lock();\n        try {\n            if (balance &gt;= amount) {\n                balance -= amount;\n                return true;\n            }\n            return false;\n        } finally {\n            lock.unlock();\n        }\n    }\n}\n</code></pre>"},{"location":"java/part-5/#_4","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f","text":"<p>\u8907\u6570\u306e\u30ed\u30c3\u30af\u3092\u53d6\u5f97\u3059\u308b\u5834\u5408\u3001\u5e38\u306b\u540c\u3058\u9806\u5e8f\u3067\u30ed\u30c3\u30af\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u3067\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u3092\u56de\u907f\u3067\u304d\u307e\u3059\u3002</p> <pre><code>public static boolean transfer(BankAccount from, BankAccount to, int amount) {\n    // \u5e38\u306b\u540c\u3058\u9806\u5e8f\u3067\u30ed\u30c3\u30af\u3092\u53d6\u5f97\n    BankAccount first = System.identityHashCode(from) &lt; System.identityHashCode(to) ? from : to;\n    BankAccount second = first == from ? to : from;\n\n    first.lock.lock();\n    try {\n        second.lock.lock();\n        try {\n            if (from.balance &gt;= amount) {\n                from.balance -= amount;\n                to.balance += amount;\n                return true;\n            }\n            return false;\n        } finally {\n            second.lock.unlock();\n        }\n    } finally {\n        first.lock.unlock();\n    }\n}\n</code></pre>"},{"location":"java/part-5/#_5","title":"\u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6","text":"API \u8aac\u660e <code>ReentrantLock</code> \u518d\u5165\u53ef\u80fd\u306a\u30ed\u30c3\u30af <code>ReadWriteLock</code> \u8aad\u307f\u53d6\u308a/\u66f8\u304d\u8fbc\u307f\u30ed\u30c3\u30af <code>Semaphore</code> \u30ab\u30a6\u30f3\u30c6\u30a3\u30f3\u30b0\u30bb\u30de\u30d5\u30a9 <code>CountDownLatch</code> \u30ab\u30a6\u30f3\u30c8\u30c0\u30a6\u30f3\u30e9\u30c3\u30c1 <code>CyclicBarrier</code> \u30b5\u30a4\u30af\u30ea\u30c3\u30af\u30d0\u30ea\u30a2"},{"location":"java/part-5/#_6","title":"\u5b9f\u884c\u65b9\u6cd5","text":"<pre><code>cd apps/java\n./gradlew test --tests \"concurrency.ch08.*\"\n</code></pre>"},{"location":"java/part-5/#_7","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/java/src/main/java/concurrency/ch08/BankAccount.java</li> </ul>"},{"location":"java/part-6/","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":""},{"location":"java/part-6/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u308f\u305a\u306b\u4e26\u884c\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3068\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002Java NIO \u3092\u4f7f\u3063\u305f\u5b9f\u88c5\u3092\u901a\u3058\u3066\u7406\u89e3\u3092\u6df1\u3081\u307e\u3059\u3002</p>"},{"location":"java/part-6/#java-nio","title":"Java NIO \u306e\u4e3b\u8981\u30af\u30e9\u30b9","text":"\u30af\u30e9\u30b9 \u8aac\u660e <code>Selector</code> I/O \u591a\u91cd\u5316\u30bb\u30ec\u30af\u30bf <code>Channel</code> I/O \u30c1\u30e3\u30cd\u30eb <code>ByteBuffer</code> \u30d0\u30a4\u30c8\u30d0\u30c3\u30d5\u30a1 <code>SelectionKey</code> \u30bb\u30ec\u30af\u30b7\u30e7\u30f3\u30ad\u30fc"},{"location":"java/part-6/#io","title":"\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u306e\u4f8b","text":"<pre><code>// \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u30e2\u30fc\u30c9\u306b\u8a2d\u5b9a\nchannel.configureBlocking(false);\n\n// \u30bb\u30ec\u30af\u30bf\u306b\u767b\u9332\nselector.register(channel, SelectionKey.OP_READ);\n\n// \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\nwhile (true) {\n    selector.select();\n    for (SelectionKey key : selector.selectedKeys()) {\n        if (key.isReadable()) {\n            // \u8aad\u307f\u53d6\u308a\u51e6\u7406\n        }\n    }\n}\n</code></pre>"},{"location":"java/part-6/#_2","title":"\u30b7\u30f3\u30b0\u30eb\u30b9\u30ec\u30c3\u30c9\u306e\u5229\u70b9","text":"\u5229\u70b9 \u8aac\u660e \u30ed\u30c3\u30af\u4e0d\u8981 \u5171\u6709\u72b6\u614b\u306e\u7af6\u5408\u306a\u3057 \u8efd\u91cf \u30b9\u30ec\u30c3\u30c9\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u306a\u3057 \u30b9\u30b1\u30fc\u30e9\u30d6\u30eb \u5927\u91cf\u63a5\u7d9a\u3092\u52b9\u7387\u7684\u306b\u51e6\u7406 \u4e88\u6e2c\u53ef\u80fd \u5b9f\u884c\u9806\u5e8f\u304c\u660e\u78ba"},{"location":"java/part-6/#_3","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VII \u3067\u306f\u3001Java \u306e CompletableFuture \u3068 Virtual Threads \u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"java/part-6/#_4","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Java NIO Tutorial</li> </ul>"},{"location":"java/part-7/","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"java/part-7/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Java \u306e CompletableFuture \u3068 Virtual Threads\uff08Java 21\uff09\u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"java/part-7/#completablefuture","title":"CompletableFuture","text":""},{"location":"java/part-7/#_2","title":"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9","text":"<pre><code>CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {\n    // \u975e\u540c\u671f\u51e6\u7406\n    return \"Result\";\n});\n\n// \u7d50\u679c\u3092\u53d6\u5f97\nString result = future.get();\n</code></pre>"},{"location":"java/part-7/#_3","title":"\u30c1\u30a7\u30fc\u30f3\u51e6\u7406","text":"<pre><code>CompletableFuture.supplyAsync(() -&gt; fetchData())\n    .thenApply(data -&gt; process(data))\n    .thenAccept(result -&gt; save(result));\n</code></pre>"},{"location":"java/part-7/#_4","title":"\u4e26\u884c\u5b9f\u884c","text":"<pre><code>CompletableFuture&lt;String&gt; future1 = CompletableFuture.supplyAsync(() -&gt; fetchData1());\nCompletableFuture&lt;String&gt; future2 = CompletableFuture.supplyAsync(() -&gt; fetchData2());\n\n// \u3059\u3079\u3066\u306e\u5b8c\u4e86\u3092\u5f85\u6a5f\nCompletableFuture.allOf(future1, future2).join();\n</code></pre>"},{"location":"java/part-7/#virtual-threads-java-21","title":"Virtual Threads (Java 21+)","text":""},{"location":"java/part-7/#_5","title":"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9","text":"<pre><code>// Virtual Thread \u3067\u5b9f\u884c\nThread.startVirtualThread(() -&gt; {\n    System.out.println(\"Running in virtual thread\");\n});\n\n// Virtual Thread \u306e ExecutorService\ntry (var executor = Executors.newVirtualThreadPerTaskExecutor()) {\n    executor.submit(() -&gt; {\n        System.out.println(\"Task in virtual thread\");\n    });\n}\n</code></pre>"},{"location":"java/part-7/#_6","title":"\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u30b9\u30ec\u30c3\u30c9\u3068\u306e\u9055\u3044","text":"\u7279\u6027 \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u30b9\u30ec\u30c3\u30c9 Virtual Thread \u4f5c\u6210\u30b3\u30b9\u30c8 \u9ad8\u3044 \u4f4e\u3044 \u30e1\u30e2\u30ea ~1MB/\u30b9\u30ec\u30c3\u30c9 ~KB/\u30b9\u30ec\u30c3\u30c9 \u6700\u5927\u6570 \u6570\u5343 \u6570\u767e\u4e07 \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 \u975e\u52b9\u7387 \u52b9\u7387\u7684"},{"location":"java/part-7/#_7","title":"\u4f7f\u3044\u5206\u3051\u306e\u6307\u91dd","text":"\u30b7\u30ca\u30ea\u30aa \u63a8\u5968 I/O \u30d0\u30a6\u30f3\u30c9 Virtual Thread / CompletableFuture CPU \u30d0\u30a6\u30f3\u30c9 \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u30b9\u30ec\u30c3\u30c9 \u6df7\u5408 Virtual Thread + \u4e26\u5217\u30b9\u30c8\u30ea\u30fc\u30e0"},{"location":"java/part-7/#_8","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VIII \u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068\u5206\u6563\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"java/part-7/#_9","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Java CompletableFuture</li> <li>Virtual Threads (JEP 444)</li> </ul>"},{"location":"java/part-8/","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":""},{"location":"java/part-8/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u3063\u305f\u5206\u6563\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002\u884c\u5217\u4e57\u7b97\u3068\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u306e\u5b9f\u88c5\u3092\u901a\u3058\u3066\u3001\u5927\u898f\u6a21\u30c7\u30fc\u30bf\u306e\u4e26\u5217\u51e6\u7406\u624b\u6cd5\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"java/part-8/#mapreduce","title":"MapReduce \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"java/part-8/#_2","title":"\u51e6\u7406\u30d5\u30ed\u30fc","text":""},{"location":"java/part-8/#_3","title":"\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u306e\u4f8b","text":"<pre><code>public class WordCount {\n\n    // Map: \u30c6\u30ad\u30b9\u30c8\u3092 (word, 1) \u306e\u30da\u30a2\u306b\u5909\u63db\n    public static List&lt;Map.Entry&lt;String, Integer&gt;&gt; map(String text) {\n        return Arrays.stream(text.toLowerCase().split(\"\\\\s+\"))\n            .map(word -&gt; Map.entry(word, 1))\n            .toList();\n    }\n\n    // Reduce: \u540c\u3058\u5358\u8a9e\u306e\u30ab\u30a6\u30f3\u30c8\u3092\u96c6\u7d04\n    public static Map&lt;String, Integer&gt; reduce(List&lt;Map.Entry&lt;String, Integer&gt;&gt; pairs) {\n        return pairs.stream()\n            .collect(Collectors.groupingBy(\n                Map.Entry::getKey,\n                Collectors.summingInt(Map.Entry::getValue)\n            ));\n    }\n\n    // MapReduce\n    public static Map&lt;String, Integer&gt; wordCount(List&lt;String&gt; texts) {\n        // Map \u30d5\u30a7\u30fc\u30ba\uff08\u4e26\u5217\uff09\n        List&lt;Map.Entry&lt;String, Integer&gt;&gt; mapped = texts.parallelStream()\n            .flatMap(text -&gt; map(text).stream())\n            .toList();\n\n        // Reduce \u30d5\u30a7\u30fc\u30ba\n        return reduce(mapped);\n    }\n}\n</code></pre>"},{"location":"java/part-8/#_4","title":"\u307e\u3068\u3081","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u5b66\u3093\u3060\u5185\u5bb9:</p> Part \u30c8\u30d4\u30c3\u30af \u30ad\u30fc\u30dd\u30a4\u30f3\u30c8 I \u9010\u6b21\u51e6\u7406 \u57fa\u672c\u6982\u5ff5\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6e2c\u5b9a II \u30b9\u30ec\u30c3\u30c9/\u30d7\u30ed\u30bb\u30b9 ExecutorService\u3001\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0 IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 V \u540c\u671f Lock\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O NIO\u3001Selector VII \u975e\u540c\u671f CompletableFuture\u3001Virtual Threads VIII \u5206\u6563\u51e6\u7406 MapReduce"},{"location":"java/part-8/#_5","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency - \u539f\u8457</li> <li>Java Concurrency in Practice - Java \u4e26\u884c\u51e6\u7406\u306e\u540d\u8457</li> <li>Java 21 Documentation</li> </ul>"},{"location":"python/","title":"Grokking Concurrency - Python \u7248","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u306f\u300cGrokking Concurrency\u300d\uff08Kirill Bobrov \u8457\uff09\u306e\u5b66\u7fd2\u30b3\u30f3\u30d1\u30cb\u30aa\u30f3\u3068\u3057\u3066\u3001\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u6982\u5ff5\u3092 Python \u3067\u5b9f\u88c5\u3057\u306a\u304c\u3089\u65e5\u672c\u8a9e\u3067\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"python/#_1","title":"\u5bfe\u8c61\u8aad\u8005","text":"<ul> <li>Python \u306e\u7d4c\u9a13\u304c\u3042\u308a\u3001\u4e26\u884c\u51e6\u7406\u306b\u8208\u5473\u304c\u3042\u308b\u958b\u767a\u8005</li> <li>\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u3001\u30de\u30eb\u30c1\u30d7\u30ed\u30bb\u30b9\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u305f\u3044\u65b9</li> <li>\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\uff08asyncio\uff09\u3092\u7406\u89e3\u3057\u305f\u3044\u30a8\u30f3\u30b8\u30cb\u30a2</li> <li>\u4e26\u884c\u51e6\u7406\u306e\u554f\u984c\uff08\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u3001\u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\uff09\u3092\u7406\u89e3\u3057\u305f\u3044\u65b9</li> </ul>"},{"location":"python/#_2","title":"\u8a18\u4e8b\u4e00\u89a7","text":""},{"location":"python/#part-i","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":"<p>\u9010\u6b21\u51e6\u7406\u3068\u4e26\u884c\u51e6\u7406\u306e\u9055\u3044\u3001\u57fa\u672c\u6982\u5ff5\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c2\u7ae0 \u9010\u6b21\u51e6\u7406\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u4f8b <p>\u30ad\u30fc\u30ef\u30fc\u30c9: \u9010\u6b21\u51e6\u7406\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6e2c\u5b9a\u3001\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9</p>"},{"location":"python/#part-ii","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":"<p>OS \u30ec\u30d9\u30eb\u306e\u4e26\u884c\u51e6\u7406\u306e\u57fa\u672c\u5358\u4f4d\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c4\u7ae0 \u30d7\u30ed\u30bb\u30b9\u3001\u30b9\u30ec\u30c3\u30c9\u3001\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb \u7b2c5\u7ae0 \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3001IPC\u3001\u4e26\u5217\u51e6\u7406 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: Process\u3001Thread\u3001fork\u3001\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3001IPC</p>"},{"location":"python/#part-iii","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":"<p>\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u306e\u6982\u5ff5\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c6\u7ae0 \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3001\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3001\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u3001\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0</p>"},{"location":"python/#part-iv","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":"<p>\u4e26\u5217\u51e6\u7406\u306e\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c7\u7ae0 \u30bf\u30b9\u30af\u5206\u89e3\u3001Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3001\u30c7\u30fc\u30bf\u4e26\u5217\u3001\u30bf\u30b9\u30af\u4e26\u5217</p>"},{"location":"python/#part-v","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":"<p>\u4e26\u884c\u51e6\u7406\u306b\u304a\u3051\u308b\u540c\u671f\u554f\u984c\u3068\u89e3\u6c7a\u7b56\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c8\u7ae0 \u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u3001Lock\u3001Semaphore \u7b2c9\u7ae0 \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u3001\u30e9\u30a4\u30d6\u30ed\u30c3\u30af\u3001\u30b9\u30bf\u30d9\u30fc\u30b7\u30e7\u30f3 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: Lock\u3001Semaphore\u3001\u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af</p>"},{"location":"python/#part-vi-io","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<p>\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3068\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c10\u7ae0 \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u7b2c11\u7ae0 \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3001Reactor \u30d1\u30bf\u30fc\u30f3 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O\u3001\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3001Reactor</p>"},{"location":"python/#part-vii","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<p>Python \u306e asyncio \u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c12\u7ae0 Future\u3001Coroutine\u3001async/await <p>\u30ad\u30fc\u30ef\u30fc\u30c9: asyncio\u3001Future\u3001Coroutine\u3001async/await</p>"},{"location":"python/#part-viii","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":"<p>MapReduce \u30d1\u30bf\u30fc\u30f3\u3068\u5206\u6563\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c13\u7ae0 MapReduce\u3001\u884c\u5217\u4e57\u7b97\u3001\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: MapReduce\u3001\u5206\u6563\u51e6\u7406\u3001\u4e26\u5217\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0</p>"},{"location":"python/#_3","title":"\u5b66\u7fd2\u30d1\u30b9","text":""},{"location":"python/#_4","title":"\u4f7f\u7528\u30e9\u30a4\u30d6\u30e9\u30ea","text":"\u30e9\u30a4\u30d6\u30e9\u30ea \u7528\u9014 \u5bfe\u5fdc\u7ae0 Python 3.9+ \u8a00\u8a9e \u5168\u7ae0 threading \u30b9\u30ec\u30c3\u30c9\u64cd\u4f5c Part II-V multiprocessing \u30d7\u30ed\u30bb\u30b9\u64cd\u4f5c Part II, IV, VIII asyncio \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Part VII concurrent.futures \u9ad8\u30ec\u30d9\u30eb\u4e26\u884c\u51e6\u7406 Part II, IV"},{"location":"python/#_5","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u69cb\u6210","text":"<pre><code>grokking_concurrency/\n\u251c\u2500\u2500 apps/python/                  # Python \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\u2502   \u251c\u2500\u2500 Chapter 2/                # \u9010\u6b21\u51e6\u7406\n\u2502   \u251c\u2500\u2500 Chapter 4/                # \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\n\u2502   \u251c\u2500\u2500 Chapter 5/                # \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3001IPC\n\u2502   \u251c\u2500\u2500 Chapter 6/                # \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\n\u2502   \u251c\u2500\u2500 Chapter 7/                # \u30bf\u30b9\u30af\u5206\u89e3\n\u2502   \u251c\u2500\u2500 Chapter 8/                # \u540c\u671f\u554f\u984c\n\u2502   \u251c\u2500\u2500 Chapter 9/                # \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\n\u2502   \u251c\u2500\u2500 Chapter 10/               # \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O\n\u2502   \u251c\u2500\u2500 Chapter 11/               # \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\n\u2502   \u251c\u2500\u2500 Chapter 12/               # \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\n\u2502   \u2514\u2500\u2500 Chapter 13/               # MapReduce\n\u251c\u2500\u2500 docs/journal/                 # \u958b\u767a\u5c65\u6b74\n\u2514\u2500\u2500 docs/wiki/\u8a18\u4e8b/...            # \u89e3\u8aac\u8a18\u4e8b\uff08\u672c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff09\n    \u251c\u2500\u2500 index.md                  # \u3053\u306e\u8a18\u4e8b\n    \u251c\u2500\u2500 part-1.md                 # Part I\n    \u251c\u2500\u2500 part-2.md                 # Part II\n    \u2514\u2500\u2500 ...                       # \u4ee5\u964d\u306e Part\n</code></pre>"},{"location":"python/#python","title":"Python \u3068\u4e26\u884c\u51e6\u7406","text":"<p>Python \u306f\u4e26\u884c\u51e6\u7406\u306e\u591a\u304f\u306e\u6982\u5ff5\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059:</p>"},{"location":"python/#_6","title":"\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":"<pre><code>from threading import Thread\nfrom multiprocessing import Process\n\ndef worker(name: str) -&gt; None:\n    print(f\"Hello from {name}\")\n\n# \u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u7528\nthread = Thread(target=worker, args=(\"Thread-1\",))\nthread.start()\nthread.join()\n\n# \u30d7\u30ed\u30bb\u30b9\u3092\u4f7f\u7528\nprocess = Process(target=worker, args=(\"Process-1\",))\nprocess.start()\nprocess.join()\n</code></pre>"},{"location":"python/#_7","title":"\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb","text":"<pre><code>from concurrent.futures import ThreadPoolExecutor\n\ndef task(n: int) -&gt; int:\n    return n * 2\n\nwith ThreadPoolExecutor(max_workers=4) as executor:\n    futures = [executor.submit(task, i) for i in range(10)]\n    results = [f.result() for f in futures]\n</code></pre>"},{"location":"python/#_8","title":"\u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6","text":"<pre><code>from threading import Lock, Semaphore\n\nlock = Lock()\nsemaphore = Semaphore(3)\n\nwith lock:\n    # \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30bb\u30af\u30b7\u30e7\u30f3\n    pass\n\nwith semaphore:\n    # \u6700\u59273\u3064\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u540c\u6642\u306b\u5b9f\u884c\u53ef\u80fd\n    pass\n</code></pre>"},{"location":"python/#_9","title":"\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<pre><code>import asyncio\n\nasync def fetch_data(url: str) -&gt; str:\n    await asyncio.sleep(1)  # I/O \u5f85\u3061\n    return f\"Data from {url}\"\n\nasync def main():\n    tasks = [fetch_data(f\"url_{i}\") for i in range(5)]\n    results = await asyncio.gather(*tasks)\n    print(results)\n\nasyncio.run(main())\n</code></pre>"},{"location":"python/#_10","title":"\u4e3b\u8981\u306a\u6982\u5ff5","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3092\u901a\u3058\u3066\u3001\u4ee5\u4e0b\u306e\u6982\u5ff5\u3092\u5b66\u3079\u307e\u3059:</p>"},{"location":"python/#vs","title":"\u4e26\u884c\u51e6\u7406 vs \u4e26\u5217\u51e6\u7406","text":"\u6982\u5ff5 \u8aac\u660e \u4e26\u884c\u51e6\u7406 (Concurrency) \u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u4ea4\u4e92\u306b\u5b9f\u884c\u3057\u3001\u9032\u884c\u3055\u305b\u308b \u4e26\u5217\u51e6\u7406 (Parallelism) \u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u7269\u7406\u7684\u306b\u540c\u6642\u306b\u5b9f\u884c\u3059\u308b"},{"location":"python/#gil-global-interpreter-lock","title":"GIL (Global Interpreter Lock)","text":"<p>Python \u306e CPython \u5b9f\u88c5\u306b\u306f GIL \u304c\u3042\u308a\u3001\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u3067\u306e CPU \u30d0\u30a6\u30f3\u30c9\u51e6\u7406\u306b\u306f\u5236\u9650\u304c\u3042\u308a\u307e\u3059:</p> <ul> <li>I/O \u30d0\u30a6\u30f3\u30c9\u51e6\u7406: \u30b9\u30ec\u30c3\u30c9\u3067\u52b9\u679c\u7684</li> <li>CPU \u30d0\u30a6\u30f3\u30c9\u51e6\u7406: \u30d7\u30ed\u30bb\u30b9\u3067\u52b9\u679c\u7684</li> </ul>"},{"location":"python/#_11","title":"\u540c\u671f\u554f\u984c","text":"\u554f\u984c \u8aac\u660e \u89e3\u6c7a\u7b56 \u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3 \u8907\u6570\u30b9\u30ec\u30c3\u30c9\u304c\u5171\u6709\u30ea\u30bd\u30fc\u30b9\u306b\u7af6\u5408 Lock\u3001Mutex \u30c7\u30c3\u30c9\u30ed\u30c3\u30af \u76f8\u4e92\u306b\u30ea\u30bd\u30fc\u30b9\u3092\u5f85\u3061\u5408\u3044 \u9806\u5e8f\u4ed8\u3051\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8 \u30e9\u30a4\u30d6\u30ed\u30c3\u30af \u72b6\u614b\u304c\u5909\u5316\u3059\u308b\u304c\u9032\u884c\u3057\u306a\u3044 \u30d0\u30c3\u30af\u30aa\u30d5\u6226\u7565 \u30b9\u30bf\u30d9\u30fc\u30b7\u30e7\u30f3 \u7279\u5b9a\u30b9\u30ec\u30c3\u30c9\u304c\u30ea\u30bd\u30fc\u30b9\u3092\u53d6\u5f97\u3067\u304d\u306a\u3044 \u516c\u5e73\u306a\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0"},{"location":"python/#_12","title":"\u4e26\u884c\u51e6\u7406\u306e\u5229\u70b9","text":"<ol> <li>\u5fdc\u7b54\u6027\u5411\u4e0a - UI \u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u306a\u3044</li> <li>\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u5411\u4e0a - \u8907\u6570\u30bf\u30b9\u30af\u3092\u540c\u6642\u51e6\u7406</li> <li>\u30ea\u30bd\u30fc\u30b9\u6709\u52b9\u6d3b\u7528 - CPU\u3001I/O \u306e\u5f85\u3061\u6642\u9593\u3092\u6d3b\u7528</li> <li>\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 - \u30de\u30eb\u30c1\u30b3\u30a2\u3092\u6d3b\u7528</li> </ol>"},{"location":"python/#_13","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency - \u539f\u8457</li> <li>Python \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - threading</li> <li>Python \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - multiprocessing</li> <li>Python \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - asyncio</li> <li>Real Python - Concurrency</li> </ul>"},{"location":"python/part-1/","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":""},{"location":"python/part-1/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u4e26\u884c\u51e6\u7406\u3092\u5b66\u3076\u524d\u63d0\u3068\u3057\u3066\u9010\u6b21\u51e6\u7406\uff08Sequential Processing\uff09\u306e\u57fa\u672c\u3092\u7406\u89e3\u3057\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3092\u4f8b\u306b\u3001\u9010\u6b21\u51e6\u7406\u306e\u7279\u5fb4\u3068\u9650\u754c\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-1/#2","title":"\u7b2c2\u7ae0: \u9010\u6b21\u51e6\u7406","text":""},{"location":"python/part-1/#_2","title":"\u9010\u6b21\u51e6\u7406\u3068\u306f","text":"<p>\u9010\u6b21\u51e6\u7406\u306f\u3001\u30bf\u30b9\u30af\u3092\u4e00\u3064\u305a\u3064\u9806\u756a\u306b\u5b9f\u884c\u3059\u308b\u6700\u3082\u57fa\u672c\u7684\u306a\u51e6\u7406\u65b9\u5f0f\u3067\u3059\u3002</p> <p></p>"},{"location":"python/part-1/#_3","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u306e\u4f8b","text":"<p>\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\uff08\u7dcf\u5f53\u305f\u308a\uff09\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u89e3\u8aad\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u901a\u3058\u3066\u3001\u9010\u6b21\u51e6\u7406\u306e\u7279\u5fb4\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"python/part-1/#_4","title":"\u5b9f\u88c5\u306e\u5168\u4f53\u50cf","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\uff08\u9010\u6b21\u51e6\u7406\u7248\uff09\"\"\"\n\nimport time\nimport math\nimport hashlib\nimport typing as T\n\n\ndef get_combinations(*, length: int, min_number: int = 0,\n                     max_number: T.Optional[int] = None) -&gt; T.List[str]:\n    \"\"\"\u5168\u3066\u306e\u53ef\u80fd\u306a\u30d1\u30b9\u30ef\u30fc\u30c9\u7d44\u307f\u5408\u308f\u305b\u3092\u751f\u6210\"\"\"\n    combinations = []\n    if not max_number:\n        max_number = int(math.pow(10, length) - 1)\n\n    for i in range(min_number, max_number + 1):\n        str_num = str(i)\n        zeros = \"0\" * (length - len(str_num))\n        combinations.append(\"\".join((zeros, str_num)))\n    return combinations\n\n\ndef get_crypto_hash(password: str) -&gt; str:\n    \"\"\"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u6697\u53f7\u30cf\u30c3\u30b7\u30e5\u3092\u8a08\u7b97\"\"\"\n    return hashlib.sha256(password.encode()).hexdigest()\n\n\ndef check_password(expected_crypto_hash: str,\n                   possible_password: str) -&gt; bool:\n    \"\"\"\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3059\u308b\u304b\u78ba\u8a8d\"\"\"\n    actual_crypto_hash = get_crypto_hash(possible_password)\n    return expected_crypto_hash == actual_crypto_hash\n\n\ndef crack_password(crypto_hash: str, length: int) -&gt; None:\n    \"\"\"\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u89e3\u8aad\"\"\"\n    print(\"Processing number combinations sequentially\")\n    start_time = time.perf_counter()\n\n    combinations = get_combinations(length=length)\n    for combination in combinations:\n        if check_password(crypto_hash, combination):\n            print(f\"PASSWORD CRACKED: {combination}\")\n            break\n\n    process_time = time.perf_counter() - start_time\n    print(f\"PROCESS TIME: {process_time}\")\n\n\nif __name__ == \"__main__\":\n    # \"12345678\" \u306eSHA-256\u30cf\u30c3\u30b7\u30e5\n    crypto_hash = \\\n        \"e24df920078c3dd4e7e8d2442f00e5c9ab2a231bb3918d65cc50906e49ecaef4\"\n    length = 8\n    crack_password(crypto_hash, length)\n</code></pre>"},{"location":"python/part-1/#_5","title":"\u30b3\u30fc\u30c9\u306e\u89e3\u8aac","text":""},{"location":"python/part-1/#1","title":"1. \u30d1\u30b9\u30ef\u30fc\u30c9\u7d44\u307f\u5408\u308f\u305b\u306e\u751f\u6210","text":"<pre><code>def get_combinations(*, length: int, min_number: int = 0,\n                     max_number: T.Optional[int] = None) -&gt; T.List[str]:\n    \"\"\"\u5168\u3066\u306e\u53ef\u80fd\u306a\u30d1\u30b9\u30ef\u30fc\u30c9\u7d44\u307f\u5408\u308f\u305b\u3092\u751f\u6210\"\"\"\n    combinations = []\n    if not max_number:\n        # 8\u6841\u306e\u5834\u5408: 10^8 - 1 = 99,999,999\n        max_number = int(math.pow(10, length) - 1)\n\n    for i in range(min_number, max_number + 1):\n        str_num = str(i)\n        # \u5148\u982d\u3092\u30bc\u30ed\u57cb\u3081: 1 \u2192 \"00000001\"\n        zeros = \"0\" * (length - len(str_num))\n        combinations.append(\"\".join((zeros, str_num)))\n    return combinations\n</code></pre> <p>8\u6841\u306e\u6570\u5b57\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5834\u5408\u3001<code>00000000</code> \u304b\u3089 <code>99999999</code> \u307e\u3067 1\u5104\u901a\u308a\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u751f\u6210\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-1/#2_1","title":"2. \u30cf\u30c3\u30b7\u30e5\u95a2\u6570","text":"<pre><code>def get_crypto_hash(password: str) -&gt; str:\n    \"\"\"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u6697\u53f7\u30cf\u30c3\u30b7\u30e5\u3092\u8a08\u7b97\"\"\"\n    return hashlib.sha256(password.encode()).hexdigest()\n</code></pre> <p>SHA-256 \u3092\u4f7f\u7528\u3057\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u307e\u3059\u3002\u5b9f\u969b\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u5e73\u6587\u3067\u306f\u306a\u304f\u30cf\u30c3\u30b7\u30e5\u5024\u3068\u3057\u3066\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"python/part-1/#3","title":"3. \u30d1\u30b9\u30ef\u30fc\u30c9\u30c1\u30a7\u30c3\u30af","text":"<pre><code>def check_password(expected_crypto_hash: str,\n                   possible_password: str) -&gt; bool:\n    actual_crypto_hash = get_crypto_hash(possible_password)\n    return expected_crypto_hash == actual_crypto_hash\n</code></pre> <p>\u5019\u88dc\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30cf\u30c3\u30b7\u30e5\u3068\u3001\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-1/#_6","title":"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6e2c\u5b9a","text":"<pre><code>start_time = time.perf_counter()\n# ... \u51e6\u7406 ...\nprocess_time = time.perf_counter() - start_time\nprint(f\"PROCESS TIME: {process_time}\")\n</code></pre> <p><code>time.perf_counter()</code> \u306f\u9ad8\u7cbe\u5ea6\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30ab\u30a6\u30f3\u30bf\u30fc\u3067\u3001\u7d4c\u904e\u6642\u9593\u306e\u6e2c\u5b9a\u306b\u9069\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"python/part-1/#_7","title":"\u9010\u6b21\u51e6\u7406\u306e\u7279\u5fb4","text":""},{"location":"python/part-1/#_8","title":"\u5229\u70b9","text":"\u5229\u70b9 \u8aac\u660e \u30b7\u30f3\u30d7\u30eb \u5b9f\u88c5\u304c\u7c21\u5358\u3067\u7406\u89e3\u3057\u3084\u3059\u3044 \u4e88\u6e2c\u53ef\u80fd \u5b9f\u884c\u9806\u5e8f\u304c\u6c7a\u5b9a\u7684 \u30c7\u30d0\u30c3\u30b0\u5bb9\u6613 \u554f\u984c\u306e\u7279\u5b9a\u304c\u5bb9\u6613 \u7af6\u5408\u306a\u3057 \u5171\u6709\u30ea\u30bd\u30fc\u30b9\u306e\u7af6\u5408\u304c\u767a\u751f\u3057\u306a\u3044"},{"location":"python/part-1/#_9","title":"\u9650\u754c","text":"\u9650\u754c \u8aac\u660e \u9045\u3044 1\u5104\u901a\u308a\u30921\u3064\u305a\u3064\u51e6\u7406\u3059\u308b\u305f\u3081\u6642\u9593\u304c\u304b\u304b\u308b \u30ea\u30bd\u30fc\u30b9\u975e\u52b9\u7387 \u30de\u30eb\u30c1\u30b3\u30a2 CPU \u3092\u6d3b\u7528\u3067\u304d\u306a\u3044 \u30b9\u30b1\u30fc\u30eb\u3057\u306a\u3044 \u30c7\u30fc\u30bf\u91cf\u306b\u6bd4\u4f8b\u3057\u3066\u51e6\u7406\u6642\u9593\u304c\u5897\u52a0"},{"location":"python/part-1/#_10","title":"\u306a\u305c\u4e26\u884c\u51e6\u7406\u304c\u5fc5\u8981\u304b","text":"<p>8\u6841\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3067\u306f\u30011\u5104\u901a\u308a\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u9806\u756a\u306b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>4\u30b3\u30a2 CPU \u304c\u3042\u3063\u3066\u3082\u3001\u9010\u6b21\u51e6\u7406\u3067\u306f1\u30b3\u30a2\u3057\u304b\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002\u4e26\u884c\u51e6\u7406\u3092\u4f7f\u3048\u3070\u3001\u8907\u6570\u30b3\u30a2\u306b\u4f5c\u696d\u3092\u5206\u6563\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"python/part-1/#_11","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part II \u3067\u306f\u3001\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u4e26\u884c\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3092\u4e26\u5217\u5316\u3057\u3001\u51e6\u7406\u6642\u9593\u3092\u5927\u5e45\u306b\u77ed\u7e2e\u3059\u308b\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"python/part-1/#_12","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/python/Chapter 2/password_cracking_sequential.py</li> </ul>"},{"location":"python/part-2/","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":""},{"location":"python/part-2/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001OS \u30ec\u30d9\u30eb\u306e\u4e26\u884c\u51e6\u7406\u306e\u57fa\u672c\u5358\u4f4d\u3067\u3042\u308b\u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u3092\u5b66\u3073\u307e\u3059\u3002Python \u3067\u306e\u5b9f\u88c5\u65b9\u6cd5\u3068\u3001\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3001\u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\uff08IPC\uff09\u306b\u3064\u3044\u3066\u3082\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-2/#4","title":"\u7b2c4\u7ae0: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u790e","text":""},{"location":"python/part-2/#_2","title":"\u30d7\u30ed\u30bb\u30b9\u3068\u306f","text":"<p>\u30d7\u30ed\u30bb\u30b9\u306f\u3001\u5b9f\u884c\u4e2d\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\u72ec\u81ea\u306e\u30e1\u30e2\u30ea\u7a7a\u9593\u3001\u30d5\u30a1\u30a4\u30eb\u30cf\u30f3\u30c9\u30eb\u3001\u305d\u306e\u4ed6\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6301\u3061\u307e\u3059\u3002</p>"},{"location":"python/part-2/#_3","title":"\u30b9\u30ec\u30c3\u30c9\u3068\u306f","text":"<p>\u30b9\u30ec\u30c3\u30c9\u306f\u3001\u30d7\u30ed\u30bb\u30b9\u5185\u306e\u5b9f\u884c\u5358\u4f4d\u3067\u3059\u3002\u540c\u3058\u30d7\u30ed\u30bb\u30b9\u5185\u306e\u30b9\u30ec\u30c3\u30c9\u306f\u30e1\u30e2\u30ea\u7a7a\u9593\u3092\u5171\u6709\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-2/#vs","title":"\u30d7\u30ed\u30bb\u30b9 vs \u30b9\u30ec\u30c3\u30c9","text":"\u7279\u5fb4 \u30d7\u30ed\u30bb\u30b9 \u30b9\u30ec\u30c3\u30c9 \u30e1\u30e2\u30ea \u72ec\u7acb \u5171\u6709 \u4f5c\u6210\u30b3\u30b9\u30c8 \u9ad8\u3044 \u4f4e\u3044 \u901a\u4fe1 IPC \u304c\u5fc5\u8981 \u76f4\u63a5\u5171\u6709\u53ef\u80fd \u5b89\u5168\u6027 \u9ad8\u3044 \u7af6\u5408\u306e\u53ef\u80fd\u6027 GIL \u306e\u5f71\u97ff \u306a\u3057 \u3042\u308a"},{"location":"python/part-2/#_4","title":"\u30b9\u30ec\u30c3\u30c9\u306e\u4f5c\u6210\u3068\u5b9f\u884c","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\"\"\"\n\nimport os\nimport time\nimport threading\nfrom threading import Thread\n\n\ndef cpu_waster(i: int) -&gt; None:\n    \"\"\"\u6642\u9593\u306e\u304b\u304b\u308b\u51e6\u7406\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\"\"\"\n    name = threading.current_thread().name\n    print(f\"{name} doing {i} work\")\n    time.sleep(3)\n\n\ndef display_threads() -&gt; None:\n    \"\"\"\u73fe\u5728\u306e\u30b9\u30ec\u30c3\u30c9\u60c5\u5831\u3092\u8868\u793a\"\"\"\n    print(\"-\" * 10)\n    print(f\"Current process PID: {os.getpid()}\")\n    print(f\"Thread Count: {threading.active_count()}\")\n    print(\"Active threads:\")\n    for thread in threading.enumerate():\n        print(thread)\n\n\ndef main(num_threads: int) -&gt; None:\n    display_threads()\n\n    print(f\"Starting {num_threads} CPU wasters...\")\n    for i in range(num_threads):\n        # \u30b9\u30ec\u30c3\u30c9\u306e\u4f5c\u6210\u3068\u958b\u59cb\n        thread = Thread(target=cpu_waster, args=(i,))\n        thread.start()\n\n    display_threads()\n\n\nif __name__ == \"__main__\":\n    num_threads = 5\n    main(num_threads)\n</code></pre>"},{"location":"python/part-2/#_5","title":"\u5b9f\u884c\u7d50\u679c","text":"<pre><code>----------\nCurrent process PID: 12345\nThread Count: 1\nActive threads:\n&lt;_MainThread(MainThread, started 140234567890)&gt;\nStarting 5 CPU wasters...\nThread-1 doing 0 work\nThread-2 doing 1 work\nThread-3 doing 2 work\nThread-4 doing 3 work\nThread-5 doing 4 work\n----------\nCurrent process PID: 12345\nThread Count: 6\nActive threads:\n&lt;_MainThread(MainThread, started 140234567890)&gt;\n&lt;Thread(Thread-1, started 140234567891)&gt;\n...\n</code></pre>"},{"location":"python/part-2/#_6","title":"\u30d7\u30ed\u30bb\u30b9\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30d7\u30ed\u30bb\u30b9\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\"\"\"\n\nimport time\nfrom multiprocessing import Process\n\n\nclass Worker(Process):\n    def run(self) -&gt; None:\n        print(\"Worker started...\")\n        time.sleep(3)\n        print(\"Worker is done.\")\n\n\ndef main() -&gt; None:\n    print(\"Boss requesting Worker's help.\")\n    worker = Worker()\n    print(f\"\\tWorker alive?: {worker.is_alive()}\")  # False\n\n    print(\"Boss tells Worker to start.\")\n    worker.start()\n    print(f\"\\tWorker alive?: {worker.is_alive()}\")  # True\n\n    print(\"Boss goes for coffee.\")\n    time.sleep(0.5)\n    print(f\"\\tWorker alive?: {worker.is_alive()}\")  # True\n\n    print(\"Boss patiently waits for Worker to finish and join...\")\n    worker.join()  # \u30ef\u30fc\u30ab\u30fc\u306e\u5b8c\u4e86\u3092\u5f85\u6a5f\n    print(f\"\\tWorker alive?: {worker.is_alive()}\")  # False\n\n    print(\"Boss and Worker are both done!\")\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"python/part-2/#_7","title":"\u30d7\u30ed\u30bb\u30b9\u306e\u72b6\u614b\u9077\u79fb","text":""},{"location":"python/part-2/#5-ipc","title":"\u7b2c5\u7ae0: \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3068 IPC","text":""},{"location":"python/part-2/#_8","title":"\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u306e\u5b9f\u88c5","text":"<p>\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u306f\u3001\u4e8b\u524d\u306b\u4f5c\u6210\u3057\u305f\u30b9\u30ec\u30c3\u30c9\u3092\u518d\u5229\u7528\u3057\u3066\u30bf\u30b9\u30af\u3092\u51e6\u7406\u3057\u307e\u3059\u3002</p> <pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30b7\u30f3\u30d7\u30eb\u306a\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u5b9f\u88c5\"\"\"\n\nimport time\nimport queue\nimport typing as T\nfrom threading import Thread, current_thread\n\nCallback = T.Callable[..., None]\nTask = T.Tuple[Callback, T.Any, T.Any]\n\n\nclass Worker(Thread):\n    \"\"\"\u30bf\u30b9\u30af\u30ad\u30e5\u30fc\u304b\u3089\u30bf\u30b9\u30af\u3092\u53d6\u5f97\u3057\u3066\u5b9f\u884c\u3059\u308b\u30ef\u30fc\u30ab\u30fc\"\"\"\n    def __init__(self, tasks: queue.Queue[Task]):\n        super().__init__()\n        self.tasks = tasks\n\n    def run(self) -&gt; None:\n        while True:\n            func, args, kwargs = self.tasks.get()\n            try:\n                func(*args, **kwargs)\n            except Exception as e:\n                print(e)\n            self.tasks.task_done()\n\n\nclass ThreadPool:\n    \"\"\"\u30bf\u30b9\u30af\u30ad\u30e5\u30fc\u3092\u6d88\u8cbb\u3059\u308b\u30b9\u30ec\u30c3\u30c9\u306e\u30d7\u30fc\u30eb\"\"\"\n    def __init__(self, num_threads: int):\n        self.tasks: queue.Queue = queue.Queue(num_threads)\n        self.num_threads = num_threads\n\n        # \u9577\u6642\u9593\u7a3c\u50cd\u3059\u308b\u30b9\u30ec\u30c3\u30c9\u3092\u4f5c\u6210\n        for _ in range(self.num_threads):\n            worker = Worker(self.tasks)\n            worker.daemon = True\n            worker.start()\n\n    def submit(self, func: Callback, *args, **kwargs) -&gt; None:\n        \"\"\"\u30bf\u30b9\u30af\u3092\u30ad\u30e5\u30fc\u306b\u8ffd\u52a0\"\"\"\n        self.tasks.put((func, args, kwargs))\n\n    def wait_completion(self) -&gt; None:\n        \"\"\"\u5168\u30bf\u30b9\u30af\u306e\u5b8c\u4e86\u3092\u5f85\u6a5f\"\"\"\n        self.tasks.join()\n\n\ndef cpu_waster(i: int) -&gt; None:\n    name = current_thread().name\n    print(f\"{name} doing {i} work\")\n    time.sleep(3)\n\n\ndef main() -&gt; None:\n    pool = ThreadPool(num_threads=5)\n    for i in range(20):\n        pool.submit(cpu_waster, i)\n\n    print(\"All work requests sent\")\n    pool.wait_completion()\n    print(\"All work completed\")\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"python/part-2/#_9","title":"\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb","text":"<p>Python \u306e <code>concurrent.futures</code> \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3046\u3068\u3001\u3088\u308a\u7c21\u5358\u306b\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002</p> <pre><code>from concurrent.futures import ThreadPoolExecutor\nimport os\n\ndef cpu_waster(i: int) -&gt; str:\n    name = current_thread().name\n    print(f\"{name} doing Task {i}\")\n    time.sleep(3)\n    return f\"Task {i} completed\"\n\n\ndef main() -&gt; None:\n    with ThreadPoolExecutor(\n        max_workers=os.cpu_count(),\n        thread_name_prefix=\"Pool_Thread\"\n    ) as pool:\n        tasks = []\n        for i in range(20):\n            tasks.append(pool.submit(cpu_waster, i))\n\n        for task in tasks:\n            print(task.result())\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"python/part-2/#_10","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0","text":"<p>Part I \u3067\u5b66\u3093\u3060\u9010\u6b21\u51e6\u7406\u7248\u3092\u3001\u30de\u30eb\u30c1\u30d7\u30ed\u30bb\u30b9\u3067\u4e26\u5217\u5316\u3057\u307e\u3059\u3002</p> <pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\uff08\u4e26\u5217\u51e6\u7406\u7248\uff09\"\"\"\n\nimport os\nimport math\nimport time\nimport typing as T\nimport hashlib\nfrom multiprocessing import Pool\n\nChunkRange = T.Tuple[int, int]\n\n\ndef get_combinations(*, length: int, min_number: int = 0,\n                     max_number: int = None) -&gt; T.List[str]:\n    \"\"\"\u30d1\u30b9\u30ef\u30fc\u30c9\u7d44\u307f\u5408\u308f\u305b\u3092\u751f\u6210\"\"\"\n    combinations = []\n    if not max_number:\n        max_number = int(math.pow(10, length) - 1)\n\n    for i in range(min_number, max_number + 1):\n        str_num = str(i)\n        zeros = \"0\" * (length - len(str_num))\n        combinations.append(\"\".join((zeros, str_num)))\n    return combinations\n\n\ndef get_crypto_hash(password: str) -&gt; str:\n    return hashlib.sha256(password.encode()).hexdigest()\n\n\ndef check_password(expected_crypto_hash: str,\n                   possible_password: str) -&gt; bool:\n    actual_crypto_hash = get_crypto_hash(possible_password)\n    return expected_crypto_hash == actual_crypto_hash\n\n\ndef get_chunks(num_ranges: int, length: int) -&gt; T.Iterator[ChunkRange]:\n    \"\"\"\u30d1\u30b9\u30ef\u30fc\u30c9\u7bc4\u56f2\u3092\u30c1\u30e3\u30f3\u30af\u306b\u5206\u5272\"\"\"\n    max_number = int(math.pow(10, length) - 1)\n    chunk_starts = [int(max_number / num_ranges * i)\n                    for i in range(num_ranges)]\n    chunk_ends = [start - 1 for start in chunk_starts[1:]] + [max_number]\n    return zip(chunk_starts, chunk_ends)\n\n\ndef crack_chunk(crypto_hash: str, length: int,\n                chunk_start: int, chunk_end: int) -&gt; T.Union[str, None]:\n    \"\"\"\u30c1\u30e3\u30f3\u30af\u5185\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u63a2\u7d22\"\"\"\n    print(f\"Processing {chunk_start} to {chunk_end}\")\n    combinations = get_combinations(\n        length=length, min_number=chunk_start, max_number=chunk_end)\n    for combination in combinations:\n        if check_password(crypto_hash, combination):\n            return combination\n    return None\n\n\ndef crack_password_parallel(crypto_hash: str, length: int) -&gt; None:\n    \"\"\"\u8907\u6570\u30d7\u30ed\u30bb\u30b9\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u89e3\u8aad\"\"\"\n    num_cores = os.cpu_count()\n    print(\"Processing number combinations concurrently\")\n    start_time = time.perf_counter()\n\n    with Pool() as pool:\n        arguments = ((crypto_hash, length, start, end)\n                     for start, end in get_chunks(num_cores, length))\n        results = pool.starmap(crack_chunk, arguments)\n        pool.close()\n        pool.join()\n\n    result = [res for res in results if res]\n    print(f\"PASSWORD CRACKED: {result[0]}\")\n    process_time = time.perf_counter() - start_time\n    print(f\"PROCESS TIME: {process_time}\")\n\n\nif __name__ == \"__main__\":\n    crypto_hash = \\\n        \"e24df920078c3dd4e7e8d2442f00e5c9ab2a231bb3918d65cc50906e49ecaef4\"\n    length = 8\n    crack_password_parallel(crypto_hash, length)\n</code></pre>"},{"location":"python/part-2/#_11","title":"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6bd4\u8f03","text":"\u51e6\u7406\u65b9\u5f0f \u51e6\u7406\u6642\u9593 CPU \u4f7f\u7528\u7387 \u9010\u6b21\u51e6\u7406 ~60\u79d2 25% (1\u30b3\u30a2) \u4e26\u5217\u51e6\u7406\uff084\u30b3\u30a2\uff09 ~15\u79d2 100% (\u5168\u30b3\u30a2)"},{"location":"python/part-2/#gil-global-interpreter-lock","title":"GIL (Global Interpreter Lock)","text":"<p>Python \u306e CPython \u5b9f\u88c5\u306b\u306f GIL \u304c\u3042\u308a\u3001\u4e00\u5ea6\u306b1\u3064\u306e\u30b9\u30ec\u30c3\u30c9\u3057\u304b Python \u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3002</p>"},{"location":"python/part-2/#gil","title":"GIL \u306e\u5f71\u97ff","text":"\u30bf\u30b9\u30af\u30bf\u30a4\u30d7 \u30b9\u30ec\u30c3\u30c9 \u30d7\u30ed\u30bb\u30b9 I/O \u30d0\u30a6\u30f3\u30c9 \u52b9\u679c\u7684 \u52b9\u679c\u7684 CPU \u30d0\u30a6\u30f3\u30c9 \u52b9\u679c\u306a\u3057 \u52b9\u679c\u7684"},{"location":"python/part-2/#_12","title":"\u4f7f\u3044\u5206\u3051\u306e\u6307\u91dd","text":"<ul> <li>I/O \u30d0\u30a6\u30f3\u30c9\u51e6\u7406\uff08\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u66f8\u304d\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u901a\u4fe1\uff09\u2192 \u30b9\u30ec\u30c3\u30c9</li> <li>CPU \u30d0\u30a6\u30f3\u30c9\u51e6\u7406\uff08\u8a08\u7b97\u51e6\u7406\uff09\u2192 \u30d7\u30ed\u30bb\u30b9</li> </ul>"},{"location":"python/part-2/#_13","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part III \u3067\u306f\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u306e\u6982\u5ff5\u3092\u5b66\u3073\u307e\u3059\u3002OS \u304c\u3069\u306e\u3088\u3046\u306b\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u308b\u304b\u3001\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-2/#_14","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/python/Chapter 4/multithreading.py</li> <li>apps/python/Chapter 4/process_lifecycle.py</li> <li>apps/python/Chapter 5/thread_pool.py</li> <li>apps/python/Chapter 5/password_cracking_parallel.py</li> </ul>"},{"location":"python/part-3/","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"python/part-3/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001OS \u304c\u3069\u306e\u3088\u3046\u306b\u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u540c\u6642\u306b\u5b9f\u884c\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u305b\u308b\u304b\u3092\u5b66\u3073\u307e\u3059\u3002\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0\u306e\u4ed5\u7d44\u307f\u3092\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u306e\u5b9f\u88c5\u3092\u901a\u3058\u3066\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-3/#6","title":"\u7b2c6\u7ae0: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0","text":""},{"location":"python/part-3/#_2","title":"\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u306f","text":"<p>\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u306f\u3001\u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u306a\u304c\u3089\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u3042\u305f\u304b\u3082\u540c\u6642\u306b\u5b9f\u884c\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u305b\u308b\u6280\u8853\u3067\u3059\u3002</p>"},{"location":"python/part-3/#_3","title":"\u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0","text":"<p>CPU \u6642\u9593\u3092\u5c0f\u3055\u306a\u30b9\u30e9\u30a4\u30b9\u306b\u5206\u5272\u3057\u3001\u5404\u30bf\u30b9\u30af\u306b\u9806\u756a\u306b\u5272\u308a\u5f53\u3066\u307e\u3059\u3002</p> <p></p>"},{"location":"python/part-3/#_4","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u306e\u5b9f\u88c5","text":"<p>\u30a2\u30fc\u30b1\u30fc\u30c9\u30b2\u30fc\u30e0\uff08\u30d1\u30c3\u30af\u30de\u30f3\uff09\u3092\u4f8b\u306b\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-3/#3","title":"\u30b2\u30fc\u30e0\u306e3\u3064\u306e\u30bf\u30b9\u30af","text":"<ol> <li>\u5165\u529b\u51e6\u7406 - \u30e6\u30fc\u30b6\u30fc\u306e\u64cd\u4f5c\u3092\u53d7\u3051\u4ed8\u3051\u308b</li> <li>\u30b2\u30fc\u30e0\u8a08\u7b97 - \u30b2\u30fc\u30e0\u4e16\u754c\u306e\u72b6\u614b\u3092\u66f4\u65b0</li> <li>\u63cf\u753b\u51e6\u7406 - \u753b\u9762\u3092\u66f4\u65b0</li> </ol>"},{"location":"python/part-3/#_5","title":"\u30b7\u30f3\u30d7\u30eb\u306a\u5b9f\u88c5\uff08\u30a4\u30d9\u30f3\u30c8\u30d9\u30fc\u30b9\uff09","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30a4\u30d9\u30f3\u30c8\u30d9\u30fc\u30b9\u306e\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\"\"\"\n\nimport typing as T\nfrom threading import Thread, Event\n\nfrom pacman import get_user_input, compute_game_world, render_next_screen\n\n# \u30d7\u30ed\u30bb\u30c3\u30b5\u304c\u7a7a\u3044\u3066\u3044\u308b\u304b\u3092\u793a\u3059\u30a4\u30d9\u30f3\u30c8\nprocessor_free = Event()\nprocessor_free.set()\n\n\nclass Task(Thread):\n    def __init__(self, func: T.Callable[..., None]):\n        super().__init__()\n        self.func = func\n\n    def run(self) -&gt; None:\n        while True:\n            processor_free.wait()   # \u30b7\u30b0\u30ca\u30eb\u3092\u5f85\u3064\n            processor_free.clear()  # \u4ed6\u306e\u30bf\u30b9\u30af\u3092\u30d6\u30ed\u30c3\u30af\n            self.func()             # \u30bf\u30b9\u30af\u3092\u5b9f\u884c\n            processor_free.set()    # \u6b21\u306e\u30bf\u30b9\u30af\u3092\u8a31\u53ef\n\n\ndef arcade_machine() -&gt; None:\n    \"\"\"\u30a2\u30fc\u30b1\u30fc\u30c9\u30de\u30b7\u30f3\u306e\u30e1\u30a4\u30f3\u6a5f\u80fd\"\"\"\n    get_user_input_task = Task(get_user_input)\n    compute_game_world_task = Task(compute_game_world)\n    render_next_screen_task = Task(render_next_screen)\n\n    get_user_input_task.start()\n    compute_game_world_task.start()\n    render_next_screen_task.start()\n\n\nif __name__ == \"__main__\":\n    arcade_machine()\n</code></pre>"},{"location":"python/part-3/#event","title":"Event \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5f79\u5272","text":"<p><code>threading.Event</code> \u306f\u3001\u30b9\u30ec\u30c3\u30c9\u9593\u306e\u540c\u671f\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p> \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e <code>set()</code> \u30d5\u30e9\u30b0\u3092 True \u306b\u8a2d\u5b9a <code>clear()</code> \u30d5\u30e9\u30b0\u3092 False \u306b\u8a2d\u5b9a <code>wait()</code> \u30d5\u30e9\u30b0\u304c True \u306b\u306a\u308b\u307e\u3067\u30d6\u30ed\u30c3\u30af <code>is_set()</code> \u30d5\u30e9\u30b0\u306e\u72b6\u614b\u3092\u78ba\u8a8d"},{"location":"python/part-3/#_6","title":"\u30d1\u30c3\u30af\u30de\u30f3\u306e\u5b9f\u88c5","text":"<pre><code>\"\"\"\u30d1\u30c3\u30af\u30de\u30f3\u30b2\u30fc\u30e0\u306e\u5b9f\u88c5\"\"\"\n\nimport sys\nimport time\nimport select\nfrom random import randrange\n\n# \u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u30b2\u30fc\u30e0\u72b6\u614b\nPACMAN_POSITION = {}\n\n\ndef get_user_input() -&gt; None:\n    \"\"\"\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u304b\u3089\u306e\u5165\u529b\u3092\u53d6\u5f97\"\"\"\n    global PACMAN_POSITION\n    i, o, e = select.select([sys.stdin], [], [], 1)\n    if i:\n        user_input = sys.stdin.readline().strip()\n        print(f\"user input: {user_input}\")\n        PACMAN_POSITION[\"user_input\"] = user_input\n\n\ndef compute_game_world() -&gt; None:\n    \"\"\"\u30b2\u30fc\u30e0\u30eb\u30fc\u30eb\u306b\u5f93\u3063\u3066\u4e16\u754c\u3092\u8a08\u7b97\"\"\"\n    global PACMAN_POSITION\n    print(f\"Pacman doing: {PACMAN_POSITION.get('user_input', 'N/A')}\")\n    print(\"computing\")\n    PACMAN_POSITION[\"position\"] = randrange(10)\n    time.sleep(1)\n\n\ndef render_next_screen() -&gt; None:\n    \"\"\"\u6b21\u306e\u30d5\u30ec\u30fc\u30e0\u3092\u63cf\u753b\"\"\"\n    global PACMAN_POSITION\n    print(f\"Rendering pacman at position: \"\n          f\"{PACMAN_POSITION.get('position', 0)}\")\n    print(\"rendering\")\n    time.sleep(0.5)\n</code></pre>"},{"location":"python/part-3/#_7","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1","text":"<p>\u30bf\u30b9\u30af\u3092\u5207\u308a\u66ff\u3048\u308b\u969b\u3001\u73fe\u5728\u306e\u30bf\u30b9\u30af\u306e\u72b6\u614b\u3092\u4fdd\u5b58\u3057\u3001\u6b21\u306e\u30bf\u30b9\u30af\u306e\u72b6\u614b\u3092\u5fa9\u5143\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-3/#_8","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306e\u30b3\u30b9\u30c8","text":"<ul> <li>\u30ec\u30b8\u30b9\u30bf\u306e\u4fdd\u5b58\u3068\u5fa9\u5143</li> <li>\u30e1\u30e2\u30ea\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u7121\u52b9\u5316</li> <li>TLB\uff08Translation Lookaside Buffer\uff09\u306e\u30d5\u30e9\u30c3\u30b7\u30e5</li> </ul>"},{"location":"python/part-3/#vs","title":"\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6 vs \u5354\u8abf\u7684","text":""},{"location":"python/part-3/#_9","title":"\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u30fb\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0","text":"<ul> <li>OS \u304c\u30bf\u30b9\u30af\u3092\u5f37\u5236\u7684\u306b\u4e2d\u65ad</li> <li>\u30bf\u30a4\u30e0\u30b9\u30e9\u30a4\u30b9\u3067\u5236\u5fa1</li> <li>\u516c\u5e73\u306a\u30ea\u30bd\u30fc\u30b9\u914d\u5206</li> </ul>"},{"location":"python/part-3/#_10","title":"\u5354\u8abf\u7684\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0","text":"<ul> <li>\u30bf\u30b9\u30af\u304c\u81ea\u767a\u7684\u306b\u5236\u5fa1\u3092\u8b72\u308b</li> <li><code>yield</code> \u3067\u5236\u5fa1\u3092\u8fd4\u3059</li> <li>\u52b9\u7387\u7684\u3060\u304c\u3001\u884c\u5100\u306e\u60aa\u3044\u30bf\u30b9\u30af\u306b\u6ce8\u610f</li> </ul>"},{"location":"python/part-3/#_11","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part IV \u3067\u306f\u3001\u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3\uff08Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\uff09\u3092\u5b66\u3073\u307e\u3059\u3002\u8907\u96d1\u306a\u554f\u984c\u3092\u4e26\u5217\u5316\u53ef\u80fd\u306a\u30b5\u30d6\u30bf\u30b9\u30af\u306b\u5206\u5272\u3059\u308b\u624b\u6cd5\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-3/#_12","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/python/Chapter 6/arcade_machine.py</li> <li>apps/python/Chapter 6/pacman.py</li> </ul>"},{"location":"python/part-4/","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"python/part-4/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8907\u96d1\u306a\u554f\u984c\u3092\u4e26\u5217\u5316\u53ef\u80fd\u306a\u30b5\u30d6\u30bf\u30b9\u30af\u306b\u5206\u5272\u3059\u308b\u624b\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5\u3092\u901a\u3058\u3066\u3001\u4e26\u5217\u51e6\u7406\u306e\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-4/#7","title":"\u7b2c7\u7ae0: \u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"python/part-4/#vs","title":"\u30c7\u30fc\u30bf\u4e26\u5217 vs \u30bf\u30b9\u30af\u4e26\u5217","text":"\u30d1\u30bf\u30fc\u30f3 \u8aac\u660e \u4f8b \u30c7\u30fc\u30bf\u4e26\u5217 \u540c\u3058\u64cd\u4f5c\u3092\u8907\u6570\u306e\u30c7\u30fc\u30bf\u306b\u9069\u7528 \u914d\u5217\u306e\u5404\u8981\u7d20\u30922\u500d \u30bf\u30b9\u30af\u4e26\u5217 \u7570\u306a\u308b\u64cd\u4f5c\u3092\u540c\u6642\u306b\u5b9f\u884c \u5165\u529b\u30fb\u8a08\u7b97\u30fb\u51fa\u529b"},{"location":"python/part-4/#forkjoin","title":"Fork/Join \u30d1\u30bf\u30fc\u30f3","text":"<p>\u554f\u984c\u3092\u5206\u5272\u3057\u3001\u4e26\u5217\u306b\u51e6\u7406\u3057\u305f\u5f8c\u3001\u7d50\u679c\u3092\u7d71\u5408\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002</p>"},{"location":"python/part-4/#_2","title":"\u6295\u7968\u96c6\u8a08\u306e\u4f8b","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"Fork/Join \u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308b\u6295\u7968\u96c6\u8a08\"\"\"\n\nimport typing as T\nimport random\nfrom math import ceil\nfrom threading import Thread\n\n\nclass StaffMember(Thread):\n    \"\"\"\u6295\u7968\u7528\u7d19\u3092\u96c6\u8a08\u3059\u308b\u30b9\u30bf\u30c3\u30d5\"\"\"\n\n    def __init__(self, votes: T.List[int]):\n        super().__init__()\n        self.votes = votes\n        self.summary: T.Dict[int, int] = {}\n\n    def run(self) -&gt; None:\n        for vote in self.votes:\n            if vote in self.summary:\n                self.summary[vote] += 1\n            else:\n                self.summary[vote] = 1\n\n\ndef count_votes(votes: T.List[int], num_workers: int = 3) -&gt; T.Dict[int, int]:\n    \"\"\"\u6295\u7968\u3092\u8907\u6570\u306e\u30ef\u30fc\u30ab\u30fc\u3067\u4e26\u5217\u96c6\u8a08\"\"\"\n    workers = []\n    vote_count = len(votes)\n    votes_per_worker = ceil(vote_count / num_workers)\n\n    # Fork: \u6295\u7968\u7528\u7d19\u3092\u30ef\u30fc\u30ab\u30fc\u306b\u5206\u914d\n    for i in range(num_workers):\n        start = i * votes_per_worker\n        end = start + votes_per_worker\n        pile = votes[start:end]\n        worker = StaffMember(pile)\n        workers.append(worker)\n        worker.start()\n\n    # Join: \u5168\u30ef\u30fc\u30ab\u30fc\u306e\u5b8c\u4e86\u3092\u5f85\u6a5f\n    for worker in workers:\n        worker.join()\n\n    # \u7d50\u679c\u306e\u7d71\u5408\n    total: T.Dict[int, int] = {}\n    for worker in workers:\n        for candidate, count in worker.summary.items():\n            total[candidate] = total.get(candidate, 0) + count\n\n    return total\n\n\nif __name__ == \"__main__\":\n    # 10\u4e07\u7968\u3092\u751f\u6210\n    votes = [random.randint(1, 10) for _ in range(100000)]\n    result = count_votes(votes)\n    print(f\"\u6295\u7968\u7d50\u679c: {result}\")\n</code></pre>"},{"location":"python/part-4/#forkjoin_1","title":"Fork/Join \u306e\u6d41\u308c","text":""},{"location":"python/part-4/#_3","title":"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3","text":"<p>\u51e6\u7406\u3092\u30b9\u30c6\u30fc\u30b8\u306b\u5206\u5272\u3057\u3001\u5404\u30b9\u30c6\u30fc\u30b8\u3092\u4e26\u5217\u306b\u5b9f\u884c\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002</p>"},{"location":"python/part-4/#_4","title":"\u6d17\u6fef\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u4f8b","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308b\u6d17\u6fef\u51e6\u7406\"\"\"\n\nimport time\nfrom queue import Queue\nfrom threading import Thread\n\nWashload = str\n\n\nclass Washer(Thread):\n    \"\"\"\u6d17\u6fef\u6a5f\u3092\u8868\u3059\u30b9\u30ec\u30c3\u30c9\"\"\"\n\n    def __init__(self, in_queue: Queue, out_queue: Queue):\n        super().__init__()\n        self.in_queue = in_queue\n        self.out_queue = out_queue\n\n    def run(self) -&gt; None:\n        while True:\n            washload = self.in_queue.get()\n            print(f\"Washer: washing {washload}...\")\n            time.sleep(4)  # \u6d17\u6fef\u306b4\u79d2\n            self.out_queue.put(washload)\n            self.in_queue.task_done()\n\n\nclass Dryer(Thread):\n    \"\"\"\u4e7e\u71e5\u6a5f\u3092\u8868\u3059\u30b9\u30ec\u30c3\u30c9\"\"\"\n\n    def __init__(self, in_queue: Queue, out_queue: Queue):\n        super().__init__()\n        self.in_queue = in_queue\n        self.out_queue = out_queue\n\n    def run(self) -&gt; None:\n        while True:\n            washload = self.in_queue.get()\n            print(f\"Dryer: drying {washload}...\")\n            time.sleep(2)  # \u4e7e\u71e5\u306b2\u79d2\n            self.out_queue.put(washload)\n            self.in_queue.task_done()\n\n\nclass Folder(Thread):\n    \"\"\"\u305f\u305f\u307f\u51e6\u7406\u3092\u8868\u3059\u30b9\u30ec\u30c3\u30c9\"\"\"\n\n    def __init__(self, in_queue: Queue):\n        super().__init__()\n        self.in_queue = in_queue\n\n    def run(self) -&gt; None:\n        while True:\n            washload = self.in_queue.get()\n            print(f\"Folder: folding {washload}...\")\n            time.sleep(1)  # \u305f\u305f\u307f\u306b1\u79d2\n            print(f\"Folder: {washload} done!\")\n            self.in_queue.task_done()\n\n\nclass Pipeline:\n    \"\"\"\u6d17\u6fef\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\"\"\"\n\n    def run_concurrently(self) -&gt; None:\n        # \u30ad\u30e5\u30fc\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n        to_be_washed: Queue = Queue()\n        to_be_dried: Queue = Queue()\n        to_be_folded: Queue = Queue()\n\n        # \u6d17\u6fef\u7269\u3092\u6295\u5165\n        for i in range(4):\n            to_be_washed.put(f'Washload #{i}')\n\n        # \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u958b\u59cb\n        Washer(to_be_washed, to_be_dried).start()\n        Dryer(to_be_dried, to_be_folded).start()\n        Folder(to_be_folded).start()\n\n        # \u5b8c\u4e86\u3092\u5f85\u6a5f\n        to_be_washed.join()\n        to_be_dried.join()\n        to_be_folded.join()\n        print(\"All done!\")\n\n\nif __name__ == \"__main__\":\n    pipeline = Pipeline()\n    pipeline.run_concurrently()\n</code></pre>"},{"location":"python/part-4/#_5","title":"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u6d41\u308c","text":""},{"location":"python/part-4/#_6","title":"\u9010\u6b21\u51e6\u7406\u3068\u306e\u6bd4\u8f03","text":"\u51e6\u7406\u65b9\u5f0f 4\u3064\u306e\u6d17\u6fef\u7269 \u9010\u6b21\u51e6\u7406 (4+2+1) \u00d7 4 = 28\u79d2 \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 4+4+4+4 + 2 + 1 = 23\u79d2"},{"location":"python/part-4/#queue","title":"Queue \u306b\u3088\u308b\u30b9\u30ec\u30c3\u30c9\u9593\u901a\u4fe1","text":"<p><code>queue.Queue</code> \u306f\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306a\u30ad\u30e5\u30fc\u3067\u3059\u3002</p> \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e <code>put(item)</code> \u30a2\u30a4\u30c6\u30e0\u3092\u8ffd\u52a0\uff08\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff09 <code>get()</code> \u30a2\u30a4\u30c6\u30e0\u3092\u53d6\u5f97\uff08\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\uff09 <code>task_done()</code> \u30bf\u30b9\u30af\u5b8c\u4e86\u3092\u901a\u77e5 <code>join()</code> \u5168\u30bf\u30b9\u30af\u5b8c\u4e86\u3092\u5f85\u6a5f"},{"location":"python/part-4/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part V \u3067\u306f\u3001\u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1\u3092\u5b66\u3073\u307e\u3059\u3002\u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306a\u3069\u306e\u554f\u984c\u3068\u3001Lock\u3001Semaphore \u306b\u3088\u308b\u89e3\u6c7a\u7b56\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-4/#_8","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/python/Chapter 7/count_votes/count_votes_concurrent.py</li> <li>apps/python/Chapter 7/pipeline.py</li> </ul>"},{"location":"python/part-5/","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"python/part-5/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u4e26\u884c\u51e6\u7406\u306b\u304a\u3051\u308b\u540c\u671f\u554f\u984c\uff08\u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u3001\u30e9\u30a4\u30d6\u30ed\u30c3\u30af\u3001\u30b9\u30bf\u30d9\u30fc\u30b7\u30e7\u30f3\uff09\u3068\u3001\u305d\u306e\u89e3\u6c7a\u7b56\uff08Lock\u3001Semaphore\uff09\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"python/part-5/#8-lock","title":"\u7b2c8\u7ae0: \u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u3068 Lock","text":""},{"location":"python/part-5/#_2","title":"\u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u3068\u306f","text":"<p>\u8907\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u5171\u6709\u30ea\u30bd\u30fc\u30b9\u306b\u540c\u6642\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u7d50\u679c\u304c\u5b9f\u884c\u9806\u5e8f\u306b\u4f9d\u5b58\u3057\u3066\u3057\u307e\u3046\u554f\u984c\u3067\u3059\u3002</p>"},{"location":"python/part-5/#_3","title":"\u9280\u884c\u53e3\u5ea7\u306e\u4f8b\uff08\u554f\u984c\u3042\u308a\uff09","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30ec\u30fc\u30b9\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u304c\u767a\u751f\u3059\u308b\u9280\u884c\u53e3\u5ea7\"\"\"\n\nimport time\nfrom threading import Thread\n\n\nclass UnsyncedBankAccount:\n    \"\"\"\u540c\u671f\u306a\u3057\u306e\u9280\u884c\u53e3\u5ea7\uff08\u5371\u967a\uff09\"\"\"\n\n    def __init__(self, balance: float = 0):\n        self.balance = balance\n\n    def deposit(self, amount: float) -&gt; None:\n        # \u3053\u306e3\u884c\u306e\u9593\u306b\u4ed6\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u5272\u308a\u8fbc\u3080\u53ef\u80fd\u6027\u3042\u308a\n        current = self.balance\n        time.sleep(0.001)  # \u51e6\u7406\u6642\u9593\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\n        self.balance = current + amount\n\n    def withdraw(self, amount: float) -&gt; None:\n        current = self.balance\n        time.sleep(0.001)\n        self.balance = current - amount\n\n\nclass ATM(Thread):\n    \"\"\"ATM\u30b9\u30ec\u30c3\u30c9\"\"\"\n\n    def __init__(self, bank_account):\n        super().__init__()\n        self.bank_account = bank_account\n\n    def run(self) -&gt; None:\n        for _ in range(100):\n            self.bank_account.deposit(10)\n            self.bank_account.withdraw(10)\n\n\nif __name__ == \"__main__\":\n    account = UnsyncedBankAccount(balance=1000)\n\n    atms = [ATM(account) for _ in range(5)]\n    for atm in atms:\n        atm.start()\n    for atm in atms:\n        atm.join()\n\n    # \u671f\u5f85: 1000\u3001\u5b9f\u969b: \u4e88\u6e2c\u4e0d\u80fd\n    print(f\"Final balance: {account.balance}\")\n</code></pre>"},{"location":"python/part-5/#lock","title":"\u89e3\u6c7a\u7b56: Lock \u3092\u4f7f\u7528","text":"<pre><code>from threading import Lock\n\n\nclass SyncedBankAccount:\n    \"\"\"Lock \u3067\u540c\u671f\u3057\u305f\u9280\u884c\u53e3\u5ea7\"\"\"\n\n    def __init__(self, balance: float = 0):\n        self.balance = balance\n        self.lock = Lock()\n\n    def deposit(self, amount: float) -&gt; None:\n        with self.lock:  # \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30bb\u30af\u30b7\u30e7\u30f3\n            current = self.balance\n            time.sleep(0.001)\n            self.balance = current + amount\n\n    def withdraw(self, amount: float) -&gt; None:\n        with self.lock:\n            current = self.balance\n            time.sleep(0.001)\n            self.balance = current - amount\n</code></pre>"},{"location":"python/part-5/#semaphore","title":"Semaphore\uff08\u30bb\u30de\u30d5\u30a9\uff09","text":"<p>Semaphore \u306f\u3001\u540c\u6642\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30b9\u30ec\u30c3\u30c9\u6570\u3092\u5236\u9650\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-5/#_4","title":"\u99d0\u8eca\u5834\u306e\u4f8b","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30bb\u30de\u30d5\u30a9\u306b\u3088\u308b\u99d0\u8eca\u5834\u306e\u5b9f\u88c5\"\"\"\n\nimport time\nimport random\nimport typing as T\nfrom threading import Thread, Semaphore, Lock\n\nTOTAL_SPOTS = 3  # \u99d0\u8eca\u30b9\u30da\u30fc\u30b9\u6570\n\n\nclass Garage:\n    \"\"\"\u99d0\u8eca\u5834\"\"\"\n\n    def __init__(self) -&gt; None:\n        self.semaphore = Semaphore(TOTAL_SPOTS)\n        self.cars_lock = Lock()\n        self.parked_cars: T.List[str] = []\n\n    def enter(self, car_name: str) -&gt; None:\n        \"\"\"\u99d0\u8eca\u5834\u306b\u5165\u308b\"\"\"\n        self.semaphore.acquire()  # \u30b9\u30da\u30fc\u30b9\u3092\u78ba\u4fdd\n        with self.cars_lock:\n            self.parked_cars.append(car_name)\n            print(f\"{car_name} parked\")\n\n    def exit(self, car_name: str) -&gt; None:\n        \"\"\"\u99d0\u8eca\u5834\u3092\u51fa\u308b\"\"\"\n        with self.cars_lock:\n            self.parked_cars.remove(car_name)\n            print(f\"{car_name} leaving\")\n        self.semaphore.release()  # \u30b9\u30da\u30fc\u30b9\u3092\u89e3\u653e\n\n\ndef park_car(garage: Garage, car_name: str) -&gt; None:\n    garage.enter(car_name)\n    time.sleep(random.uniform(1, 2))\n    garage.exit(car_name)\n\n\nif __name__ == \"__main__\":\n    garage = Garage()\n    threads = []\n\n    for i in range(10):\n        t = Thread(target=park_car, args=(garage, f\"Car #{i}\"))\n        threads.append(t)\n        t.start()\n\n    for t in threads:\n        t.join()\n</code></pre>"},{"location":"python/part-5/#9","title":"\u7b2c9\u7ae0: \u30c7\u30c3\u30c9\u30ed\u30c3\u30af","text":""},{"location":"python/part-5/#_5","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u3068\u306f","text":"<p>\u8907\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u4e92\u3044\u306b\u76f8\u624b\u306e\u6301\u3064\u30ea\u30bd\u30fc\u30b9\u3092\u5f85\u3061\u7d9a\u3051\u3001\u6c38\u9060\u306b\u9032\u884c\u3057\u306a\u3044\u72b6\u614b\u3067\u3059\u3002</p>"},{"location":"python/part-5/#_6","title":"\u98df\u4e8b\u3059\u308b\u54f2\u5b66\u8005\u554f\u984c","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u304c\u767a\u751f\u3059\u308b\u54f2\u5b66\u8005\u554f\u984c\"\"\"\n\nimport time\nfrom threading import Thread, Lock\n\ndumplings = 20\n\n\nclass LockWithName:\n    \"\"\"\u540d\u524d\u4ed8\u304dLock\"\"\"\n    def __init__(self, name: str):\n        self.name = name\n        self.lock = Lock()\n\n    def acquire(self):\n        self.lock.acquire()\n\n    def release(self):\n        self.lock.release()\n\n\nclass Philosopher(Thread):\n    def __init__(self, name: str, left: LockWithName, right: LockWithName):\n        super().__init__()\n        self.name = name\n        self.left_chopstick = left\n        self.right_chopstick = right\n\n    def run(self) -&gt; None:\n        global dumplings\n\n        while dumplings &gt; 0:\n            # \u5de6\u306e\u7bb8\u3092\u53d6\u308b\n            self.left_chopstick.acquire()\n            print(f\"{self.left_chopstick.name} grabbed by {self.name}\")\n\n            # \u53f3\u306e\u7bb8\u3092\u53d6\u308d\u3046\u3068\u3059\u308b\uff08\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306e\u539f\u56e0\uff09\n            self.right_chopstick.acquire()\n            print(f\"{self.right_chopstick.name} grabbed by {self.name}\")\n\n            dumplings -= 1\n            print(f\"{self.name} eats. Left: {dumplings}\")\n\n            self.right_chopstick.release()\n            self.left_chopstick.release()\n            time.sleep(0.1)\n\n\nif __name__ == \"__main__\":\n    chopstick_a = LockWithName(\"chopstick_a\")\n    chopstick_b = LockWithName(\"chopstick_b\")\n\n    # \u4e21\u65b9\u306e\u54f2\u5b66\u8005\u304c\u7570\u306a\u308b\u9806\u5e8f\u3067\u7bb8\u3092\u53d6\u308b \u2192 \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\n    p1 = Philosopher(\"Philosopher #1\", chopstick_a, chopstick_b)\n    p2 = Philosopher(\"Philosopher #2\", chopstick_b, chopstick_a)\n\n    p1.start()\n    p2.start()\n</code></pre>"},{"location":"python/part-5/#4","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306e\u6761\u4ef6\uff084\u3064\u5168\u3066\u5fc5\u8981\uff09","text":"<ol> <li>\u76f8\u4e92\u6392\u9664 - \u30ea\u30bd\u30fc\u30b9\u306f\u4e00\u5ea6\u306b1\u3064\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u307f\u4f7f\u7528</li> <li>\u4fdd\u6301\u3068\u5f85\u6a5f - \u30ea\u30bd\u30fc\u30b9\u3092\u4fdd\u6301\u3057\u306a\u304c\u3089\u4ed6\u3092\u5f85\u3064</li> <li>\u6a2a\u53d6\u308a\u4e0d\u53ef - \u4ed6\u8005\u304b\u3089\u30ea\u30bd\u30fc\u30b9\u3092\u596a\u3048\u306a\u3044</li> <li>\u5faa\u74b0\u5f85\u3061 - \u5faa\u74b0\u7684\u306a\u5f85\u3061\u95a2\u4fc2\u304c\u5b58\u5728</li> </ol>"},{"location":"python/part-5/#1","title":"\u89e3\u6c7a\u7b561: \u30ea\u30bd\u30fc\u30b9\u9806\u5e8f\u4ed8\u3051","text":"<pre><code>if __name__ == \"__main__\":\n    chopstick_a = LockWithName(\"chopstick_a\")\n    chopstick_b = LockWithName(\"chopstick_b\")\n\n    # \u4e21\u65b9\u306e\u54f2\u5b66\u8005\u304c\u540c\u3058\u9806\u5e8f\u3067\u7bb8\u3092\u53d6\u308b\n    p1 = Philosopher(\"Philosopher #1\", chopstick_a, chopstick_b)\n    p2 = Philosopher(\"Philosopher #2\", chopstick_a, chopstick_b)\n</code></pre>"},{"location":"python/part-5/#2","title":"\u89e3\u6c7a\u7b562: \u4ef2\u88c1\u8005\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>class Waiter:\n    \"\"\"\u4ef2\u88c1\u8005\"\"\"\n    def __init__(self):\n        self.mutex = Lock()\n\n    def ask_for_chopsticks(self, left, right):\n        with self.mutex:\n            left.acquire()\n            right.acquire()\n\n    def release_chopsticks(self, left, right):\n        right.release()\n        left.release()\n</code></pre>"},{"location":"python/part-5/#_7","title":"\u30e9\u30a4\u30d6\u30ed\u30c3\u30af\u3068\u30b9\u30bf\u30d9\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"python/part-5/#_8","title":"\u30e9\u30a4\u30d6\u30ed\u30c3\u30af","text":"<p>\u30b9\u30ec\u30c3\u30c9\u304c\u72b6\u614b\u3092\u5909\u5316\u3055\u305b\u7d9a\u3051\u308b\u304c\u3001\u9032\u884c\u3057\u306a\u3044\u72b6\u614b\u3002</p>"},{"location":"python/part-5/#_9","title":"\u30b9\u30bf\u30d9\u30fc\u30b7\u30e7\u30f3","text":"<p>\u7279\u5b9a\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u9577\u671f\u9593\u30ea\u30bd\u30fc\u30b9\u3092\u53d6\u5f97\u3067\u304d\u306a\u3044\u72b6\u614b\u3002\u516c\u5e73\u306a\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u3067\u89e3\u6c7a\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-5/#_10","title":"\u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u306e\u6bd4\u8f03","text":"\u30d7\u30ea\u30df\u30c6\u30a3\u30d6 \u7528\u9014 \u540c\u6642\u30a2\u30af\u30bb\u30b9\u6570 Lock \u6392\u4ed6\u5236\u5fa1 1 RLock \u518d\u5e30\u7684\u30ed\u30c3\u30af 1\uff08\u540c\u4e00\u30b9\u30ec\u30c3\u30c9\u306f\u518d\u53d6\u5f97\u53ef\uff09 Semaphore \u30ea\u30bd\u30fc\u30b9\u6570\u5236\u9650 N Event \u30b9\u30ec\u30c3\u30c9\u9593\u30b7\u30b0\u30ca\u30eb N/A Condition \u6761\u4ef6\u5f85\u6a5f N/A"},{"location":"python/part-5/#_11","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VI \u3067\u306f\u3001\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3068\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u308f\u305a\u306b\u4e26\u884c\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u65b9\u6cd5\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-5/#_12","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/python/Chapter 8/race_condition/</li> <li>apps/python/Chapter 8/semaphore.py</li> <li>apps/python/Chapter 9/deadlock/</li> </ul>"},{"location":"python/part-6/","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":""},{"location":"python/part-6/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u308f\u305a\u306b\u4e26\u884c\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3068\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3068 Reactor \u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5\u3092\u901a\u3058\u3066\u7406\u89e3\u3092\u6df1\u3081\u307e\u3059\u3002</p>"},{"location":"python/part-6/#10-vs","title":"\u7b2c10\u7ae0: \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0","text":""},{"location":"python/part-6/#io","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u306e\u554f\u984c","text":"<p>\u5f93\u6765\u306e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3067\u306f\u3001I/O \u64cd\u4f5c\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u30b9\u30ec\u30c3\u30c9\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u307e\u3059\u3002</p> <pre><code># \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0: \u30c7\u30fc\u30bf\u304c\u5c4a\u304f\u307e\u3067\u5f85\u6a5f\ndata = socket.recv(1024)  # \u2190 \u3053\u3053\u3067\u30d6\u30ed\u30c3\u30af\nprocess(data)\n</code></pre>"},{"location":"python/part-6/#_2","title":"\u30b9\u30ec\u30c3\u30c9\u30fb\u30d1\u30fc\u30fb\u30b3\u30cd\u30af\u30b7\u30e7\u30f3","text":"<p>\u554f\u984c\u70b9: - \u30b9\u30ec\u30c3\u30c9\u4f5c\u6210\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9 - \u30e1\u30e2\u30ea\u6d88\u8cbb\uff08\u30b9\u30ec\u30c3\u30c9\u3042\u305f\u308a\u7d041MB\uff09 - \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306e\u30b3\u30b9\u30c8</p>"},{"location":"python/part-6/#io_1","title":"\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<p>I/O \u64cd\u4f5c\u304c\u5373\u5ea7\u306b\u8fd4\u308a\u3001\u30c7\u30fc\u30bf\u304c\u6e96\u5099\u3067\u304d\u3066\u3044\u306a\u3051\u308c\u3070\u5f8c\u3067\u518d\u8a66\u884c\u3057\u307e\u3059\u3002</p> <pre><code>socket.setblocking(False)\ntry:\n    data = socket.recv(1024)  # \u5373\u5ea7\u306b\u8fd4\u308b\nexcept BlockingIOError:\n    # \u30c7\u30fc\u30bf\u304c\u307e\u3060\u306a\u3044\n    pass\n</code></pre>"},{"location":"python/part-6/#11-reactor","title":"\u7b2c11\u7ae0: \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3068 Reactor \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"python/part-6/#_3","title":"\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7","text":"<p>\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u751f\u3092\u76e3\u8996\u3057\u3001\u5bfe\u5fdc\u3059\u308b\u30cf\u30f3\u30c9\u30e9\u3092\u5b9f\u884c\u3059\u308b\u30eb\u30fc\u30d7\u3067\u3059\u3002</p> <pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30b7\u30f3\u30d7\u30eb\u306a\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u5b9f\u88c5\"\"\"\n\nfrom __future__ import annotations\nfrom collections import deque\nfrom time import sleep\nimport typing as T\n\n\nclass Event:\n    \"\"\"\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3067\u5b9f\u884c\u53ef\u80fd\u306a\u30a4\u30d9\u30f3\u30c8\"\"\"\n\n    def __init__(self, name: str, action: T.Callable,\n                 next_event: T.Optional[Event] = None) -&gt; None:\n        self.name = name\n        self._action = action\n        self._next_event = next_event\n\n    def execute_action(self) -&gt; None:\n        \"\"\"\u30a4\u30d9\u30f3\u30c8\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\"\"\"\n        self._action(self)\n        if self._next_event:\n            event_loop.register_event(self._next_event)\n\n\nclass EventLoop:\n    \"\"\"\u30a4\u30d9\u30f3\u30c8\u3092\u7ba1\u7406\u3057\u5b9f\u884c\u3059\u308b\u30eb\u30fc\u30d7\"\"\"\n\n    def __init__(self) -&gt; None:\n        self._events: deque[Event] = deque()\n\n    def register_event(self, event: Event) -&gt; None:\n        \"\"\"\u30a4\u30d9\u30f3\u30c8\u3092\u767b\u9332\"\"\"\n        self._events.append(event)\n\n    def run_forever(self) -&gt; None:\n        \"\"\"\u30a4\u30d9\u30f3\u30c8\u3092\u6c38\u7d9a\u7684\u306b\u51e6\u7406\"\"\"\n        print(f\"Queue running with {len(self._events)} events\")\n        while True:\n            try:\n                event = self._events.popleft()\n            except IndexError:\n                continue\n            event.execute_action()\n\n\ndef knock(event: Event) -&gt; None:\n    print(event.name)\n    sleep(1)\n\n\ndef who(event: Event) -&gt; None:\n    print(event.name)\n    sleep(1)\n\n\nif __name__ == \"__main__\":\n    event_loop = EventLoop()\n\n    # \u30a4\u30d9\u30f3\u30c8\u30c1\u30a7\u30fc\u30f3: knock \u2192 who\n    replying = Event(\"Who's there?\", who)\n    knocking = Event(\"Knock-knock\", knock, replying)\n\n    for _ in range(2):\n        event_loop.register_event(knocking)\n\n    event_loop.run_forever()\n</code></pre>"},{"location":"python/part-6/#_4","title":"\u5b9f\u884c\u7d50\u679c","text":"<pre><code>Queue running with 2 events\nKnock-knock\nWho's there?\nKnock-knock\nWho's there?\n...\n</code></pre>"},{"location":"python/part-6/#reactor","title":"Reactor \u30d1\u30bf\u30fc\u30f3","text":"<p>I/O \u30a4\u30d9\u30f3\u30c8\u306e\u591a\u91cd\u5316\u3092\u884c\u3046\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002</p>"},{"location":"python/part-6/#_5","title":"\u69cb\u6210\u8981\u7d20","text":"\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 \u5f79\u5272 Reactor \u30a4\u30d9\u30f3\u30c8\u306e\u591a\u91cd\u5316\u3068\u632f\u308a\u5206\u3051 Handler \u7279\u5b9a\u30a4\u30d9\u30f3\u30c8\u306e\u51e6\u7406 Selector I/O \u306e\u6e96\u5099\u72b6\u614b\u3092\u76e3\u8996"},{"location":"python/part-6/#_6","title":"\u30d4\u30b6\u30b5\u30fc\u30d0\u30fc\u306e\u4f8b","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"Reactor \u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308b\u30d4\u30b6\u30b5\u30fc\u30d0\u30fc\"\"\"\n\nimport socket\nimport selectors\nfrom collections import deque\nimport typing as T\n\nselector = selectors.DefaultSelector()\norders: T.Deque[socket.socket] = deque()\n\n\ndef accept_order(server_socket: socket.socket) -&gt; None:\n    \"\"\"\u65b0\u898f\u63a5\u7d9a\u3092\u53d7\u3051\u4ed8\u3051\"\"\"\n    client, addr = server_socket.accept()\n    print(f\"Connection from {addr}\")\n    client.setblocking(False)\n    selector.register(client, selectors.EVENT_READ, read_order)\n\n\ndef read_order(client: socket.socket) -&gt; None:\n    \"\"\"\u6ce8\u6587\u3092\u8aad\u307f\u53d6\u308a\"\"\"\n    data = client.recv(1024)\n    if data:\n        print(f\"Order received: {data.decode()}\")\n        orders.append(client)\n        # \u66f8\u304d\u8fbc\u307f\u53ef\u80fd\u306b\u306a\u3063\u305f\u3089\u901a\u77e5\u3092\u53d7\u3051\u308b\n        selector.modify(client, selectors.EVENT_WRITE, send_pizza)\n    else:\n        selector.unregister(client)\n        client.close()\n\n\ndef send_pizza(client: socket.socket) -&gt; None:\n    \"\"\"\u30d4\u30b6\u3092\u9001\u4fe1\"\"\"\n    if orders:\n        orders.popleft()\n        client.send(b\"Here's your pizza!\")\n        selector.unregister(client)\n        client.close()\n\n\ndef run_server(host: str = 'localhost', port: int = 8000) -&gt; None:\n    \"\"\"\u30b5\u30fc\u30d0\u30fc\u3092\u5b9f\u884c\"\"\"\n    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    server.bind((host, port))\n    server.listen()\n    server.setblocking(False)\n\n    selector.register(server, selectors.EVENT_READ, accept_order)\n    print(f\"Pizza server running on {host}:{port}\")\n\n    # \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\n    while True:\n        events = selector.select()  # I/O \u30a4\u30d9\u30f3\u30c8\u3092\u5f85\u6a5f\n        for key, mask in events:\n            callback = key.data\n            callback(key.fileobj)\n\n\nif __name__ == \"__main__\":\n    run_server()\n</code></pre>"},{"location":"python/part-6/#selectors","title":"selectors \u30e2\u30b8\u30e5\u30fc\u30eb","text":"<p><code>selectors</code> \u306f\u3001I/O \u591a\u91cd\u5316\u306e\u9ad8\u30ec\u30d9\u30eb API \u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e <code>register(fd, events, data)</code> \u30d5\u30a1\u30a4\u30eb\u8a18\u8ff0\u5b50\u3092\u76e3\u8996\u767b\u9332 <code>unregister(fd)</code> \u76e3\u8996\u3092\u89e3\u9664 <code>select(timeout)</code> \u30a4\u30d9\u30f3\u30c8\u3092\u5f85\u6a5f <code>modify(fd, events, data)</code> \u76e3\u8996\u8a2d\u5b9a\u3092\u5909\u66f4"},{"location":"python/part-6/#_7","title":"\u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7","text":"\u30a4\u30d9\u30f3\u30c8 \u8aac\u660e <code>EVENT_READ</code> \u8aad\u307f\u53d6\u308a\u53ef\u80fd <code>EVENT_WRITE</code> \u66f8\u304d\u8fbc\u307f\u53ef\u80fd"},{"location":"python/part-6/#_8","title":"\u30b7\u30f3\u30b0\u30eb\u30b9\u30ec\u30c3\u30c9\u306e\u5229\u70b9","text":"\u5229\u70b9 \u8aac\u660e \u30ed\u30c3\u30af\u4e0d\u8981 \u5171\u6709\u72b6\u614b\u306e\u7af6\u5408\u306a\u3057 \u8efd\u91cf \u30b9\u30ec\u30c3\u30c9\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u306a\u3057 \u30b9\u30b1\u30fc\u30e9\u30d6\u30eb \u5927\u91cf\u63a5\u7d9a\u3092\u52b9\u7387\u7684\u306b\u51e6\u7406 \u4e88\u6e2c\u53ef\u80fd \u5b9f\u884c\u9806\u5e8f\u304c\u660e\u78ba"},{"location":"python/part-6/#_9","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VII \u3067\u306f\u3001Python \u306e <code>asyncio</code> \u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002\u30b3\u30eb\u30fc\u30c1\u30f3\u3001Future\u3001async/await \u306e\u4f7f\u3044\u65b9\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-6/#_10","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/python/Chapter 10/pizza_server.py</li> <li>apps/python/Chapter 11/event_loop.py</li> <li>apps/python/Chapter 11/pizza_reactor.py</li> </ul>"},{"location":"python/part-7/","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"python/part-7/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Python \u306e <code>asyncio</code> \u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002\u30b3\u30eb\u30fc\u30c1\u30f3\u3001Future\u3001async/await \u306e\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3057\u3001\u52b9\u7387\u7684\u306a I/O \u30d0\u30a6\u30f3\u30c9\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-7/#12","title":"\u7b2c12\u7ae0: \u30b3\u30eb\u30fc\u30c1\u30f3\u3068\u975e\u540c\u671f","text":""},{"location":"python/part-7/#_2","title":"\u30b3\u30eb\u30fc\u30c1\u30f3\u3068\u306f","text":"<p>\u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u3001\u5b9f\u884c\u3092\u4e2d\u65ad\u30fb\u518d\u958b\u3067\u304d\u308b\u95a2\u6570\u3067\u3059\u3002\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"python/part-7/#_3","title":"\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30b3\u30eb\u30fc\u30c1\u30f3","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u57fa\u672c\u5b9f\u88c5\"\"\"\n\nfrom collections import deque\nimport typing as T\n\nCoroutine = T.Generator[None, None, int]\n\n\nclass EventLoop:\n    def __init__(self) -&gt; None:\n        self.tasks: T.Deque[Coroutine] = deque()\n\n    def add_coroutine(self, task: Coroutine) -&gt; None:\n        \"\"\"\u30bf\u30b9\u30af\u3092\u30ad\u30e5\u30fc\u306b\u8ffd\u52a0\"\"\"\n        self.tasks.append(task)\n\n    def run_coroutine(self, task: Coroutine) -&gt; None:\n        \"\"\"\u30bf\u30b9\u30af\u30921\u30b9\u30c6\u30c3\u30d7\u5b9f\u884c\"\"\"\n        try:\n            task.send(None)  # \u6b21\u306e yield \u307e\u3067\u5b9f\u884c\n            self.add_coroutine(task)  # \u672a\u5b8c\u4e86\u306a\u3089\u518d\u767b\u9332\n        except StopIteration:\n            print(\"Task completed\")\n\n    def run_forever(self) -&gt; None:\n        \"\"\"\u30bf\u30b9\u30af\u304c\u306a\u304f\u306a\u308b\u307e\u3067\u5b9f\u884c\"\"\"\n        while self.tasks:\n            print(\"Event loop cycle.\")\n            self.run_coroutine(self.tasks.popleft())\n\n\ndef fibonacci(n: int) -&gt; Coroutine:\n    \"\"\"\u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u5217\u3092\u30b3\u30eb\u30fc\u30c1\u30f3\u3067\u751f\u6210\"\"\"\n    a, b = 0, 1\n    for i in range(n):\n        a, b = b, a + b\n        print(f\"Fibonacci({i}): {a}\")\n        yield  # \u5236\u5fa1\u3092\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u306b\u8fd4\u3059\n    return a\n\n\nif __name__ == \"__main__\":\n    event_loop = EventLoop()\n    event_loop.add_coroutine(fibonacci(5))\n    event_loop.run_forever()\n</code></pre>"},{"location":"python/part-7/#_4","title":"\u5b9f\u884c\u7d50\u679c","text":"<pre><code>Event loop cycle.\nFibonacci(0): 1\nEvent loop cycle.\nFibonacci(1): 1\nEvent loop cycle.\nFibonacci(2): 2\nEvent loop cycle.\nFibonacci(3): 3\nEvent loop cycle.\nFibonacci(4): 5\nTask completed\n</code></pre>"},{"location":"python/part-7/#asyncawait","title":"async/await \u69cb\u6587","text":"<p>Python 3.5 \u4ee5\u964d\u3067\u306f\u3001<code>async/await</code> \u69cb\u6587\u3067\u8aad\u307f\u3084\u3059\u304f\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"python/part-7/#_5","title":"\u57fa\u672c\u69cb\u6587","text":"<pre><code>import asyncio\n\n\nasync def fetch_data(url: str) -&gt; str:\n    \"\"\"\u975e\u540c\u671f\u3067\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\"\"\"\n    print(f\"Fetching {url}...\")\n    await asyncio.sleep(1)  # I/O \u5f85\u3061\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\n    return f\"Data from {url}\"\n\n\nasync def main():\n    # \u9010\u6b21\u5b9f\u884c\n    result1 = await fetch_data(\"url1\")\n    result2 = await fetch_data(\"url2\")\n    print(result1, result2)\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"python/part-7/#_6","title":"\u4e26\u884c\u5b9f\u884c","text":"<pre><code>async def main():\n    # \u4e26\u884c\u5b9f\u884c\uff08gather \u3092\u4f7f\u7528\uff09\n    results = await asyncio.gather(\n        fetch_data(\"url1\"),\n        fetch_data(\"url2\"),\n        fetch_data(\"url3\"),\n    )\n    print(results)\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"python/part-7/#future","title":"Future","text":"<p>Future \u306f\u3001\u307e\u3060\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u975e\u540c\u671f\u64cd\u4f5c\u306e\u7d50\u679c\u3092\u8868\u3059\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u3059\u3002</p>"},{"location":"python/part-7/#future_1","title":"Future \u306e\u72b6\u614b","text":""},{"location":"python/part-7/#future_2","title":"Future \u306e\u4f7f\u7528\u4f8b","text":"<pre><code>import asyncio\n\n\nasync def slow_operation() -&gt; str:\n    await asyncio.sleep(2)\n    return \"Operation completed\"\n\n\nasync def main():\n    # \u30bf\u30b9\u30af\u3092\u4f5c\u6210\uff08Future\u3092\u8fd4\u3059\uff09\n    task = asyncio.create_task(slow_operation())\n\n    print(f\"Task done: {task.done()}\")  # False\n\n    result = await task\n\n    print(f\"Task done: {task.done()}\")  # True\n    print(f\"Result: {result}\")\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"python/part-7/#_7","title":"\u975e\u540c\u671f\u30d4\u30b6\u30b5\u30fc\u30d0\u30fc","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"asyncio \u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d4\u30b6\u30b5\u30fc\u30d0\u30fc\"\"\"\n\nimport asyncio\n\n\nasync def handle_client(reader: asyncio.StreamReader,\n                        writer: asyncio.StreamWriter) -&gt; None:\n    \"\"\"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u51e6\u7406\"\"\"\n    addr = writer.get_extra_info('peername')\n    print(f\"Connection from {addr}\")\n\n    # \u6ce8\u6587\u3092\u8aad\u307f\u53d6\u308a\n    data = await reader.read(1024)\n    order = data.decode()\n    print(f\"Order received: {order}\")\n\n    # \u30d4\u30b6\u3092\u4f5c\u308b\uff08\u975e\u540c\u671f\u3067\u5f85\u6a5f\uff09\n    await asyncio.sleep(2)\n\n    # \u30d4\u30b6\u3092\u9001\u4fe1\n    writer.write(b\"Here's your pizza!\")\n    await writer.drain()\n\n    writer.close()\n    await writer.wait_closed()\n\n\nasync def run_server(host: str = 'localhost', port: int = 8000) -&gt; None:\n    \"\"\"\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\"\"\"\n    server = await asyncio.start_server(\n        handle_client, host, port)\n\n    addr = server.sockets[0].getsockname()\n    print(f\"Pizza server running on {addr}\")\n\n    async with server:\n        await server.serve_forever()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(run_server())\n</code></pre>"},{"location":"python/part-7/#asyncio-api","title":"asyncio \u306e\u4e3b\u8981 API","text":""},{"location":"python/part-7/#_8","title":"\u30bf\u30b9\u30af\u7ba1\u7406","text":"API \u8aac\u660e <code>asyncio.run(coro)</code> \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3066\u5b9f\u884c <code>asyncio.create_task(coro)</code> \u30bf\u30b9\u30af\u3092\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb <code>asyncio.gather(*coros)</code> \u8907\u6570\u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u4e26\u884c\u5b9f\u884c <code>asyncio.wait(tasks)</code> \u30bf\u30b9\u30af\u5b8c\u4e86\u3092\u5f85\u6a5f"},{"location":"python/part-7/#_9","title":"\u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6","text":"API \u8aac\u660e <code>asyncio.Lock()</code> \u975e\u540c\u671f\u30ed\u30c3\u30af <code>asyncio.Semaphore(n)</code> \u975e\u540c\u671f\u30bb\u30de\u30d5\u30a9 <code>asyncio.Event()</code> \u975e\u540c\u671f\u30a4\u30d9\u30f3\u30c8 <code>asyncio.Queue()</code> \u975e\u540c\u671f\u30ad\u30e5\u30fc"},{"location":"python/part-7/#io","title":"I/O","text":"API \u8aac\u660e <code>asyncio.sleep(delay)</code> \u975e\u540c\u671f\u30b9\u30ea\u30fc\u30d7 <code>asyncio.open_connection()</code> TCP \u63a5\u7d9a\u3092\u958b\u304f <code>asyncio.start_server()</code> TCP \u30b5\u30fc\u30d0\u30fc\u3092\u958b\u59cb"},{"location":"python/part-7/#_10","title":"\u4f7f\u3044\u5206\u3051\u306e\u6307\u91dd","text":"\u30b7\u30ca\u30ea\u30aa \u63a8\u5968 I/O \u30d0\u30a6\u30f3\u30c9\uff08\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001\u30d5\u30a1\u30a4\u30eb\uff09 asyncio CPU \u30d0\u30a6\u30f3\u30c9 multiprocessing \u6df7\u5408 asyncio + ProcessPoolExecutor"},{"location":"python/part-7/#_11","title":"\u6df7\u5408\u306e\u4f8b","text":"<pre><code>import asyncio\nfrom concurrent.futures import ProcessPoolExecutor\n\n\ndef cpu_bound_task(n: int) -&gt; int:\n    \"\"\"CPU \u3092\u4f7f\u3046\u51e6\u7406\"\"\"\n    return sum(i * i for i in range(n))\n\n\nasync def main():\n    loop = asyncio.get_event_loop()\n\n    with ProcessPoolExecutor() as pool:\n        # CPU \u30d0\u30a6\u30f3\u30c9\u30bf\u30b9\u30af\u3092\u30d7\u30ed\u30bb\u30b9\u30d7\u30fc\u30eb\u3067\u5b9f\u884c\n        result = await loop.run_in_executor(\n            pool, cpu_bound_task, 10000000)\n        print(f\"Result: {result}\")\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"python/part-7/#_12","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VIII \u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068\u5206\u6563\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002\u5927\u898f\u6a21\u30c7\u30fc\u30bf\u3092\u8907\u6570\u306e\u30ef\u30fc\u30ab\u30fc\u3067\u4e26\u5217\u51e6\u7406\u3059\u308b\u624b\u6cd5\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-7/#_13","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/python/Chapter 12/coroutine.py</li> <li>apps/python/Chapter 12/future_burger.py</li> <li>apps/python/Chapter 12/asynchronous_pizza/</li> </ul>"},{"location":"python/part-8/","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":""},{"location":"python/part-8/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u3063\u305f\u5206\u6563\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002\u884c\u5217\u4e57\u7b97\u3068\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u306e\u5b9f\u88c5\u3092\u901a\u3058\u3066\u3001\u5927\u898f\u6a21\u30c7\u30fc\u30bf\u306e\u4e26\u5217\u51e6\u7406\u624b\u6cd5\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"python/part-8/#13-mapreduce","title":"\u7b2c13\u7ae0: MapReduce \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"python/part-8/#mapreduce","title":"MapReduce \u3068\u306f","text":"<p>MapReduce \u306f\u3001\u5927\u898f\u6a21\u30c7\u30fc\u30bf\u3092\u4e26\u5217\u51e6\u7406\u3059\u308b\u305f\u3081\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u30e2\u30c7\u30eb\u3067\u3059\u3002</p>"},{"location":"python/part-8/#_2","title":"\u51e6\u7406\u30d5\u30ed\u30fc","text":""},{"location":"python/part-8/#_3","title":"\u884c\u5217\u4e57\u7b97\u306e\u4e26\u5217\u5316","text":""},{"location":"python/part-8/#_4","title":"\u9010\u6b21\u51e6\u7406\u7248","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u884c\u5217\u4e57\u7b97\uff08\u9010\u6b21\u51e6\u7406\u7248\uff09\"\"\"\n\nfrom typing import List\n\nRow = List[int]\nMatrix = List[Row]\n\n\ndef matrix_multiply(matrix_a: Matrix, matrix_b: Matrix) -&gt; Matrix:\n    \"\"\"2\u3064\u306e\u884c\u5217\u3092\u4e57\u7b97\"\"\"\n    num_rows_a = len(matrix_a)\n    num_cols_a = len(matrix_a[0])\n    num_cols_b = len(matrix_b[0])\n\n    result = [[0] * num_cols_b for _ in range(num_rows_a)]\n\n    for i in range(num_rows_a):\n        for j in range(num_cols_b):\n            for k in range(num_cols_a):\n                result[i][j] += matrix_a[i][k] * matrix_b[k][j]\n\n    return result\n</code></pre>"},{"location":"python/part-8/#_5","title":"\u4e26\u5217\u51e6\u7406\u7248","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u884c\u5217\u4e57\u7b97\uff08\u4e26\u5217\u51e6\u7406\u7248\uff09\"\"\"\n\nfrom typing import List, Tuple\nimport random\nfrom multiprocessing import Pool\n\nRow = List[int]\nColumn = List[int]\nMatrix = List[Row]\n\n\ndef process_row(args: Tuple[Matrix, Matrix, int]) -&gt; Column:\n    \"\"\"1\u884c\u5206\u306e\u8a08\u7b97\u3092\u5b9f\u884c\"\"\"\n    matrix_a, matrix_b, row_idx = args\n    num_cols_a = len(matrix_a[0])\n    num_cols_b = len(matrix_b[0])\n\n    result_row = [0] * num_cols_b\n    for j in range(num_cols_b):\n        for k in range(num_cols_a):\n            result_row[j] += matrix_a[row_idx][k] * matrix_b[k][j]\n    return result_row\n\n\ndef matrix_multiply_parallel(matrix_a: Matrix, matrix_b: Matrix) -&gt; Matrix:\n    \"\"\"\u884c\u5217\u3092\u4e26\u5217\u3067\u4e57\u7b97\"\"\"\n    num_rows_a = len(matrix_a)\n    num_cols_a = len(matrix_a[0])\n    num_rows_b = len(matrix_b)\n\n    if num_cols_a != num_rows_b:\n        raise ArithmeticError(\n            f\"Invalid dimensions: {num_rows_a}x{num_cols_a} * \"\n            f\"{num_rows_b}x{len(matrix_b[0])}\")\n\n    # \u5404\u884c\u306e\u8a08\u7b97\u3092\u4e26\u5217\u5b9f\u884c\n    with Pool() as pool:\n        args = [(matrix_a, matrix_b, i) for i in range(num_rows_a)]\n        results = pool.map(process_row, args)\n\n    return results\n\n\nif __name__ == \"__main__\":\n    rows, cols = 100, 100\n    A = [[random.randint(0, 10) for _ in range(cols)]\n         for _ in range(rows)]\n    B = [[random.randint(0, 10) for _ in range(rows)]\n         for _ in range(cols)]\n\n    C = matrix_multiply_parallel(A, B)\n    print(f\"Result matrix shape: {len(C)}x{len(C[0])}\")\n</code></pre>"},{"location":"python/part-8/#_6","title":"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6bd4\u8f03","text":"<pre><code>import time\nfrom multiprocessing import Pool\n\n\ndef time_sequential(A, B):\n    start = time.perf_counter()\n    matrix_multiply(A, B)\n    return time.perf_counter() - start\n\n\ndef time_parallel(A, B):\n    start = time.perf_counter()\n    matrix_multiply_parallel(A, B)\n    return time.perf_counter() - start\n\n\n# 500x500 \u884c\u5217\u306e\u5834\u5408\n# Sequential: ~15\u79d2\n# Parallel (4 cores): ~5\u79d2\n</code></pre>"},{"location":"python/part-8/#_7","title":"\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8","text":""},{"location":"python/part-8/#mapreduce_1","title":"MapReduce \u306b\u3088\u308b\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"MapReduce \u306b\u3088\u308b\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\"\"\"\n\nfrom collections import defaultdict\nfrom multiprocessing import Pool\nimport typing as T\n\n\ndef map_function(text: str) -&gt; T.List[T.Tuple[str, int]]:\n    \"\"\"Map: \u30c6\u30ad\u30b9\u30c8\u3092 (word, 1) \u306e\u30da\u30a2\u306b\u5909\u63db\"\"\"\n    words = text.lower().split()\n    return [(word, 1) for word in words]\n\n\ndef reduce_function(word_counts: T.List[T.Tuple[str, int]]) -&gt; T.Dict[str, int]:\n    \"\"\"Reduce: \u540c\u3058\u5358\u8a9e\u306e\u30ab\u30a6\u30f3\u30c8\u3092\u96c6\u7d04\"\"\"\n    result = defaultdict(int)\n    for word, count in word_counts:\n        result[word] += count\n    return dict(result)\n\n\ndef word_count_mapreduce(texts: T.List[str]) -&gt; T.Dict[str, int]:\n    \"\"\"MapReduce \u3067\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\"\"\"\n\n    # Map \u30d5\u30a7\u30fc\u30ba\uff08\u4e26\u5217\uff09\n    with Pool() as pool:\n        mapped = pool.map(map_function, texts)\n\n    # Shuffle: \u5168\u3066\u306e\u7d50\u679c\u3092\u30d5\u30e9\u30c3\u30c8\u5316\n    shuffled = [pair for sublist in mapped for pair in sublist]\n\n    # Reduce \u30d5\u30a7\u30fc\u30ba\n    result = reduce_function(shuffled)\n\n    return result\n\n\nif __name__ == \"__main__\":\n    texts = [\n        \"Hello world hello\",\n        \"World of programming\",\n        \"Hello programming world\",\n    ]\n\n    counts = word_count_mapreduce(texts)\n    for word, count in sorted(counts.items(), key=lambda x: -x[1]):\n        print(f\"{word}: {count}\")\n</code></pre>"},{"location":"python/part-8/#_8","title":"\u5b9f\u884c\u7d50\u679c","text":"<pre><code>world: 3\nhello: 3\nprogramming: 2\nof: 1\n</code></pre>"},{"location":"python/part-8/#_9","title":"\u5206\u6563\u51e6\u7406\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"python/part-8/#_10","title":"\u30de\u30b9\u30bf\u30fc\u30fb\u30ef\u30fc\u30ab\u30fc\u69cb\u6210","text":""},{"location":"python/part-8/#_11","title":"\u30ef\u30fc\u30ab\u30fc\u306e\u5b9f\u88c5\u4f8b","text":"<pre><code>#!/usr/bin/env python3\n\n\"\"\"\u5206\u6563\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u306e\u30ef\u30fc\u30ab\u30fc\"\"\"\n\nimport socket\nimport pickle\nfrom collections import defaultdict\n\n\ndef count_words(text: str) -&gt; dict:\n    \"\"\"\u30c6\u30ad\u30b9\u30c8\u5185\u306e\u5358\u8a9e\u3092\u30ab\u30a6\u30f3\u30c8\"\"\"\n    counts = defaultdict(int)\n    for word in text.lower().split():\n        counts[word] += 1\n    return dict(counts)\n\n\ndef worker(host: str = 'localhost', port: int = 9000) -&gt; None:\n    \"\"\"\u30ef\u30fc\u30ab\u30fc\u30d7\u30ed\u30bb\u30b9\"\"\"\n    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\n        s.connect((host, port))\n        print(\"Connected to master\")\n\n        while True:\n            # \u30bf\u30b9\u30af\u3092\u53d7\u4fe1\n            data = s.recv(4096)\n            if not data:\n                break\n\n            text = pickle.loads(data)\n            print(f\"Processing: {text[:50]}...\")\n\n            # \u51e6\u7406\u3092\u5b9f\u884c\n            result = count_words(text)\n\n            # \u7d50\u679c\u3092\u9001\u4fe1\n            s.send(pickle.dumps(result))\n\n\nif __name__ == \"__main__\":\n    worker()\n</code></pre>"},{"location":"python/part-8/#_12","title":"\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u306e\u8003\u616e\u4e8b\u9805","text":""},{"location":"python/part-8/#_13","title":"\u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0","text":"\u8981\u7d20 \u8aac\u660e \u30c7\u30fc\u30bf\u5206\u5272 \u30c7\u30fc\u30bf\u3092\u5747\u7b49\u306b\u5206\u914d \u8ca0\u8377\u5206\u6563 \u30ef\u30fc\u30ab\u30fc\u9593\u3067\u4f5c\u696d\u91cf\u3092\u5747\u7b49\u5316 \u8010\u969c\u5bb3\u6027 \u30ef\u30fc\u30ab\u30fc\u969c\u5bb3\u6642\u306e\u30ea\u30ab\u30d0\u30ea \u901a\u4fe1\u30b3\u30b9\u30c8 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9"},{"location":"python/part-8/#amdahl","title":"Amdahl \u306e\u6cd5\u5247","text":"<p>\u4e26\u5217\u5316\u306b\u3088\u308b\u9ad8\u901f\u5316\u306e\u9650\u754c\u3092\u793a\u3059\u6cd5\u5247:</p> <pre><code>Speedup = 1 / (S + P/N)\n\nS: \u9010\u6b21\u90e8\u5206\u306e\u5272\u5408\nP: \u4e26\u5217\u90e8\u5206\u306e\u5272\u5408 (P = 1 - S)\nN: \u30d7\u30ed\u30bb\u30c3\u30b5\u6570\n</code></pre>"},{"location":"python/part-8/#_14","title":"\u307e\u3068\u3081","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u5b66\u3093\u3060\u5185\u5bb9:</p> Part \u30c8\u30d4\u30c3\u30af \u30ad\u30fc\u30dd\u30a4\u30f3\u30c8 I \u9010\u6b21\u51e6\u7406 \u57fa\u672c\u6982\u5ff5\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6e2c\u5b9a II \u30d7\u30ed\u30bb\u30b9/\u30b9\u30ec\u30c3\u30c9 GIL\u3001\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30bf\u30a4\u30e0\u30b7\u30a7\u30a2\u30ea\u30f3\u30b0 IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 V \u540c\u671f Lock\u3001Semaphore\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3001Reactor VII \u975e\u540c\u671f asyncio\u3001\u30b3\u30eb\u30fc\u30c1\u30f3 VIII \u5206\u6563\u51e6\u7406 MapReduce"},{"location":"python/part-8/#_15","title":"\u53c2\u8003\u30b3\u30fc\u30c9","text":"<ul> <li>apps/python/Chapter 13/matmul/</li> <li>apps/python/Chapter 13/wordcount/</li> </ul>"},{"location":"python/part-8/#_16","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency - \u539f\u8457</li> <li>Python \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - concurrent.futures</li> <li>Python \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - asyncio</li> <li>MapReduce: Simplified Data Processing on Large Clusters - Google \u8ad6\u6587</li> </ul>"},{"location":"rust/","title":"Grokking Concurrency - Rust \u7248","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u306f\u300cGrokking Concurrency\u300d\uff08Kirill Bobrov \u8457\uff09\u306e\u5b66\u7fd2\u30b3\u30f3\u30d1\u30cb\u30aa\u30f3\u3068\u3057\u3066\u3001\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u6982\u5ff5\u3092 Rust \u3067\u5b9f\u88c5\u3057\u306a\u304c\u3089\u65e5\u672c\u8a9e\u3067\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"rust/#_1","title":"\u5bfe\u8c61\u8aad\u8005","text":"<ul> <li>Rust \u306e\u57fa\u790e\u77e5\u8b58\u304c\u3042\u308a\u3001\u4e26\u884c\u51e6\u7406\u306b\u8208\u5473\u304c\u3042\u308b\u958b\u767a\u8005</li> <li>\u6240\u6709\u6a29\u3068\u501f\u7528\u3092\u6d3b\u7528\u3057\u305f\u5b89\u5168\u306a\u4e26\u884c\u51e6\u7406\u3092\u5b66\u3073\u305f\u3044\u65b9</li> <li>\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u3001\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u7406\u89e3\u3057\u305f\u3044\u30a8\u30f3\u30b8\u30cb\u30a2</li> <li>Rayon \u3084 Tokio \u3092\u4f7f\u3063\u305f\u4e26\u5217\u51e6\u7406\u306b\u8208\u5473\u304c\u3042\u308b\u65b9</li> </ul>"},{"location":"rust/#_2","title":"\u8a18\u4e8b\u4e00\u89a7","text":""},{"location":"rust/#part-i","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":"<p>\u9010\u6b21\u51e6\u7406\u3068\u4e26\u884c\u51e6\u7406\u306e\u9055\u3044\u3001\u57fa\u672c\u6982\u5ff5\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c2\u7ae0 \u9010\u6b21\u51e6\u7406\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u4f8b <p>\u30ad\u30fc\u30ef\u30fc\u30c9: \u9010\u6b21\u51e6\u7406\u3001Iterator\u3001Option/Result</p>"},{"location":"rust/#part-ii","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":"<p>\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c\u3068\u6240\u6709\u6a29\u306e\u95a2\u4fc2\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c4\u7ae0 \u30b9\u30ec\u30c3\u30c9\u3001JoinHandle\u3001Send/Sync \u7b2c5\u7ae0 \u4e26\u5217\u51e6\u7406\u3001Rayon <p>\u30ad\u30fc\u30ef\u30fc\u30c9: std::thread\u3001Send\u3001Sync\u3001Rayon</p>"},{"location":"rust/#part-iii","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":"<p>\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u306e\u6982\u5ff5\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c6\u7ae0 \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3001Condvar\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: Condvar\u3001Mutex\u3001\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5</p>"},{"location":"rust/#part-iv","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":"<p>\u4e26\u5217\u51e6\u7406\u306e\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c7\u7ae0 \u30bf\u30b9\u30af\u5206\u89e3\u3001Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: Rayon\u3001mpsc\u3001Pipeline</p>"},{"location":"rust/#part-v","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":"<p>\u4e26\u884c\u51e6\u7406\u306b\u304a\u3051\u308b\u540c\u671f\u554f\u984c\u3068\u89e3\u6c7a\u7b56\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c8\u7ae0 Mutex\u3001Arc\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f <p>\u30ad\u30fc\u30ef\u30fc\u30c9: Mutex\u3001Arc\u3001MutexGuard</p>"},{"location":"rust/#part-vi-io","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<p>\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3068\u975e\u540c\u671f\u51e6\u7406\u306e\u57fa\u790e\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c10\u7ae0 \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O <p>\u30ad\u30fc\u30ef\u30fc\u30c9: async\u3001Future\u3001Tokio</p>"},{"location":"rust/#part-vii","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<p>Rust \u306e async/await \u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c12\u7ae0 Future\u3001async/await\u3001Tokio <p>\u30ad\u30fc\u30ef\u30fc\u30c9: async\u3001await\u3001tokio</p>"},{"location":"rust/#part-viii","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":"<p>MapReduce \u30d1\u30bf\u30fc\u30f3\u3068\u5206\u6563\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p> \u7ae0 \u30c8\u30d4\u30c3\u30af \u7b2c13\u7ae0 MapReduce\u3001\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8 <p>\u30ad\u30fc\u30ef\u30fc\u30c9: MapReduce\u3001Rayon\u3001\u4e26\u5217\u30a4\u30c6\u30ec\u30fc\u30bf</p>"},{"location":"rust/#_3","title":"\u4f7f\u7528\u30e9\u30a4\u30d6\u30e9\u30ea","text":"\u30e9\u30a4\u30d6\u30e9\u30ea \u7528\u9014 \u5bfe\u5fdc\u7ae0 std::thread \u30b9\u30ec\u30c3\u30c9\u64cd\u4f5c Part II-V std::sync \u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6 Part III, V rayon \u30c7\u30fc\u30bf\u4e26\u5217\u51e6\u7406 Part II, IV, VIII tokio \u975e\u540c\u671f\u30e9\u30f3\u30bf\u30a4\u30e0 Part VI, VII sha2 \u30cf\u30c3\u30b7\u30e5\u8a08\u7b97 Part I, II"},{"location":"rust/#_4","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u69cb\u6210","text":"<pre><code>grokking_concurrency/\n\u251c\u2500\u2500 apps/rust/                     # Rust \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\u2502   \u251c\u2500\u2500 Cargo.toml                 # \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 lib.rs                 # \u30e2\u30b8\u30e5\u30fc\u30eb\u5b9a\u7fa9\n\u2502       \u251c\u2500\u2500 ch02.rs                # \u9010\u6b21\u51e6\u7406\n\u2502       \u251c\u2500\u2500 ch04.rs                # \u30b9\u30ec\u30c3\u30c9\u57fa\u790e\n\u2502       \u251c\u2500\u2500 ch05.rs                # \u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\n\u2502       \u251c\u2500\u2500 ch06.rs                # \u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\n\u2502       \u251c\u2500\u2500 ch07.rs                # Fork/Join, Pipeline\n\u2502       \u251c\u2500\u2500 ch08.rs                # \u9280\u884c\u53e3\u5ea7\uff08\u540c\u671f\uff09\n\u2502       \u2514\u2500\u2500 ch13.rs                # MapReduce\n\u2514\u2500\u2500 docs/article/rust/             # \u89e3\u8aac\u8a18\u4e8b\n    \u251c\u2500\u2500 index.md                   # \u3053\u306e\u8a18\u4e8b\n    \u251c\u2500\u2500 part-1.md                  # Part I\n    \u2514\u2500\u2500 ...                        # \u4ee5\u964d\u306e Part\n</code></pre>"},{"location":"rust/#rust","title":"Rust \u3068\u4e26\u884c\u51e6\u7406","text":"<p>Rust \u306f\u6240\u6709\u6a29\u30b7\u30b9\u30c6\u30e0\u306b\u3088\u308a\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u30c7\u30fc\u30bf\u7af6\u5408\u3092\u9632\u304e\u307e\u3059\u3002</p>"},{"location":"rust/#_5","title":"\u30b9\u30ec\u30c3\u30c9","text":"<pre><code>use std::thread;\n\nfn main() {\n    let handle = thread::spawn(|| {\n        println!(\"Hello from thread!\");\n    });\n    handle.join().unwrap();\n}\n</code></pre>"},{"location":"rust/#arc-mutex","title":"Arc \u3068 Mutex","text":"<pre><code>use std::sync::{Arc, Mutex};\nuse std::thread;\n\nfn main() {\n    let counter = Arc::new(Mutex::new(0));\n    let mut handles = vec![];\n\n    for _ in 0..10 {\n        let counter = Arc::clone(&amp;counter);\n        let handle = thread::spawn(move || {\n            let mut num = counter.lock().unwrap();\n            *num += 1;\n        });\n        handles.push(handle);\n    }\n\n    for handle in handles {\n        handle.join().unwrap();\n    }\n\n    println!(\"Result: {}\", *counter.lock().unwrap());\n}\n</code></pre>"},{"location":"rust/#rayon","title":"Rayon \u306b\u3088\u308b\u4e26\u5217\u51e6\u7406","text":"<pre><code>use rayon::prelude::*;\n\nfn main() {\n    let sum: i32 = (1..=1000)\n        .into_par_iter()\n        .map(|x| x * 2)\n        .sum();\n    println!(\"Sum: {}\", sum);\n}\n</code></pre>"},{"location":"rust/#_6","title":"\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<pre><code>use tokio;\n\n#[tokio::main]\nasync fn main() {\n    let result = fetch_data().await;\n    println!(\"{}\", result);\n}\n\nasync fn fetch_data() -&gt; String {\n    tokio::time::sleep(tokio::time::Duration::from_secs(1)).await;\n    \"Data fetched\".to_string()\n}\n</code></pre>"},{"location":"rust/#_7","title":"\u4e3b\u8981\u306a\u6982\u5ff5","text":""},{"location":"rust/#_8","title":"\u6240\u6709\u6a29\u3068\u4e26\u884c\u51e6\u7406","text":"\u30c8\u30ec\u30a4\u30c8 \u8aac\u660e Send \u5225\u30b9\u30ec\u30c3\u30c9\u306b\u6240\u6709\u6a29\u3092\u79fb\u52d5\u53ef\u80fd Sync \u8907\u6570\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u53c2\u7167\u53ef\u80fd"},{"location":"rust/#_9","title":"\u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6","text":"\u578b \u8aac\u660e Mutex \u6392\u4ed6\u5236\u5fa1\u306b\u3088\u308b\u30c7\u30fc\u30bf\u4fdd\u8b77 RwLock \u8aad\u307f\u66f8\u304d\u30ed\u30c3\u30af Arc \u30b9\u30ec\u30c3\u30c9\u9593\u3067\u306e\u5171\u6709\u6240\u6709\u6a29 Condvar \u6761\u4ef6\u5909\u6570"},{"location":"rust/#_10","title":"\u4e26\u884c\u51e6\u7406\u306e\u5229\u70b9","text":"<ol> <li>\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306e\u5b89\u5168\u6027 - \u30c7\u30fc\u30bf\u7af6\u5408\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u691c\u51fa</li> <li>\u30bc\u30ed\u30b3\u30b9\u30c8\u62bd\u8c61\u5316 - \u5b89\u5168\u6027\u3092\u72a0\u7272\u306b\u3057\u306a\u3044\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9</li> <li>\u8868\u73fe\u529b - \u6240\u6709\u6a29\u306b\u3088\u308a\u610f\u56f3\u3092\u660e\u78ba\u306b\u8868\u73fe</li> <li>\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0 - Rayon\u3001Tokio \u7b49\u306e\u5f37\u529b\u306a\u30e9\u30a4\u30d6\u30e9\u30ea</li> </ol>"},{"location":"rust/#_11","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency - \u539f\u8457</li> <li>The Rust Programming Language - Fearless Concurrency</li> <li>Rust \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - std::thread</li> <li>Rayon</li> <li>Tokio</li> </ul>"},{"location":"rust/part-1/","title":"Part I: \u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e","text":""},{"location":"rust/part-1/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u4e26\u884c\u51e6\u7406\u306e\u57fa\u790e\u3068\u3057\u3066\u9010\u6b21\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-1/#_2","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\u306e\u5b9f\u88c5","text":""},{"location":"rust/part-1/#sha-256","title":"SHA-256 \u30cf\u30c3\u30b7\u30e5\u8a08\u7b97","text":"<pre><code>use sha2::{Sha256, Digest};\n\n/// Compute SHA-256 hash of a password\npub fn get_crypto_hash(password: &amp;str) -&gt; String {\n    let mut hasher = Sha256::new();\n    hasher.update(password.as_bytes());\n    let result = hasher.finalize();\n    format!(\"{:x}\", result)\n}\n</code></pre>"},{"location":"rust/part-1/#_3","title":"\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\u63a2\u7d22","text":"<pre><code>/// Crack password by brute force (sequential)\npub fn crack_password(\n    crypto_hash: &amp;str,\n    alphabet: &amp;[char],\n    length: usize,\n) -&gt; Option&lt;String&gt; {\n    if length == 0 {\n        return None;\n    }\n    crack_recursive(crypto_hash, alphabet, String::new(), length)\n}\n\nfn crack_recursive(\n    crypto_hash: &amp;str,\n    alphabet: &amp;[char],\n    prefix: String,\n    remaining: usize,\n) -&gt; Option&lt;String&gt; {\n    if remaining == 0 {\n        if get_crypto_hash(&amp;prefix) == crypto_hash {\n            return Some(prefix);\n        }\n        return None;\n    }\n\n    for &amp;c in alphabet {\n        let mut candidate = prefix.clone();\n        candidate.push(c);\n        if let Some(result) = crack_recursive(\n            crypto_hash, alphabet, candidate, remaining - 1\n        ) {\n            return Some(result);\n        }\n    }\n    None\n}\n</code></pre>"},{"location":"rust/part-1/#_4","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>fn main() {\n    let alphabet: Vec&lt;char&gt; = \"ab\".chars().collect();\n    let target_hash = get_crypto_hash(\"ab\");\n\n    match crack_password(&amp;target_hash, &amp;alphabet, 2) {\n        Some(password) =&gt; println!(\"Found: {}\", password),\n        None =&gt; println!(\"Not found\"),\n    }\n}\n</code></pre>"},{"location":"rust/part-1/#rust","title":"Rust \u306e\u7279\u5fb4","text":"\u6982\u5ff5 \u8aac\u660e Option \u5024\u304c\u5b58\u5728\u3057\u306a\u3044\u53ef\u80fd\u6027\u3092\u8868\u73fe Iterator \u9045\u5ef6\u8a55\u4fa1\u306b\u3088\u308b\u52b9\u7387\u7684\u306a\u51e6\u7406 \u6240\u6709\u6a29 \u30e1\u30e2\u30ea\u5b89\u5168\u6027\u306e\u4fdd\u8a3c"},{"location":"rust/part-1/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part II \u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u3063\u305f\u4e26\u884c\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-2/","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":""},{"location":"rust/part-2/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Rust \u306e std::thread \u3092\u4f7f\u3063\u305f\u30b9\u30ec\u30c3\u30c9\u64cd\u4f5c\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-2/#_2","title":"\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c","text":""},{"location":"rust/part-2/#_3","title":"\u30b9\u30ec\u30c3\u30c9\u306e\u4f5c\u6210","text":"<pre><code>use std::thread::{self, JoinHandle};\n\n/// Create and start a new thread\npub fn create_thread&lt;F&gt;(f: F) -&gt; JoinHandle&lt;()&gt;\nwhere\n    F: FnOnce() + Send + 'static,\n{\n    thread::spawn(f)\n}\n</code></pre>"},{"location":"rust/part-2/#_4","title":"\u8907\u6570\u30b9\u30ec\u30c3\u30c9\u306e\u5b9f\u884c","text":"<pre><code>/// Run multiple threads and wait for completion\npub fn run_threads&lt;F&gt;(count: usize, f: F)\nwhere\n    F: Fn(usize) + Send + Sync + Clone + 'static,\n{\n    let handles: Vec&lt;_&gt; = (0..count)\n        .map(|i| {\n            let f = f.clone();\n            thread::spawn(move || f(i))\n        })\n        .collect();\n\n    for handle in handles {\n        handle.join().unwrap();\n    }\n}\n</code></pre>"},{"location":"rust/part-2/#_5","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc","text":"<pre><code>use rayon::prelude::*;\n\n/// Crack password using parallel execution with Rayon\npub fn crack_password_parallel(\n    crypto_hash: &amp;str,\n    alphabet: &amp;[char],\n    length: usize,\n) -&gt; Option&lt;String&gt; {\n    if length == 0 {\n        return None;\n    }\n\n    let first_chars: Vec&lt;char&gt; = alphabet.to_vec();\n\n    first_chars\n        .par_iter()\n        .find_map_any(|&amp;first| {\n            crack_recursive(crypto_hash, alphabet, first.to_string(), length - 1)\n        })\n}\n</code></pre>"},{"location":"rust/part-2/#send-sync","title":"Send \u3068 Sync \u30c8\u30ec\u30a4\u30c8","text":"\u30c8\u30ec\u30a4\u30c8 \u8aac\u660e \u4f8b Send \u6240\u6709\u6a29\u3092\u5225\u30b9\u30ec\u30c3\u30c9\u306b\u79fb\u52d5\u53ef\u80fd \u591a\u304f\u306e\u578b Sync \u53c2\u7167\u3092\u8907\u6570\u30b9\u30ec\u30c3\u30c9\u3067\u5171\u6709\u53ef\u80fd &amp;T where T: Send !Send \u30b9\u30ec\u30c3\u30c9\u9593\u79fb\u52d5\u4e0d\u53ef Rc !Sync \u53c2\u7167\u5171\u6709\u4e0d\u53ef Cell"},{"location":"rust/part-2/#_6","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>use std::sync::atomic::{AtomicUsize, Ordering};\nuse std::sync::Arc;\n\nfn main() {\n    let counter = Arc::new(AtomicUsize::new(0));\n\n    let counter_clone = Arc::clone(&amp;counter);\n    run_threads(5, move |_| {\n        counter_clone.fetch_add(1, Ordering::SeqCst);\n    });\n\n    println!(\"Count: {}\", counter.load(Ordering::SeqCst)); // 5\n}\n</code></pre>"},{"location":"rust/part-2/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part III \u3067\u306f\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-3/","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"rust/part-3/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u4f8b\u306b\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-3/#_2","title":"\u30b2\u30fc\u30e0\u30bf\u30b9\u30af","text":"<pre><code>/// A game task that can be processed\npub struct GameTask {\n    pub name: String,\n    pub action: Box&lt;dyn Fn() + Send + Sync&gt;,\n}\n\nimpl GameTask {\n    pub fn new&lt;F&gt;(name: &amp;str, action: F) -&gt; Self\n    where\n        F: Fn() + Send + Sync + 'static,\n    {\n        GameTask {\n            name: name.to_string(),\n            action: Box::new(action),\n        }\n    }\n\n    pub fn execute(&amp;self) {\n        (self.action)();\n    }\n}\n</code></pre>"},{"location":"rust/part-3/#_3","title":"\u30d7\u30ed\u30bb\u30c3\u30b5\u30d5\u30ea\u30fc\u30a4\u30d9\u30f3\u30c8","text":"<pre><code>use std::sync::{Condvar, Mutex};\n\n/// Event for signaling processor availability\npub struct ProcessorFreeEvent {\n    state: Mutex&lt;bool&gt;,\n    condvar: Condvar,\n}\n\nimpl ProcessorFreeEvent {\n    pub fn new() -&gt; Self {\n        ProcessorFreeEvent {\n            state: Mutex::new(false),\n            condvar: Condvar::new(),\n        }\n    }\n\n    pub fn wait(&amp;self) {\n        let mut ready = self.state.lock().unwrap();\n        while !*ready {\n            ready = self.condvar.wait(ready).unwrap();\n        }\n        *ready = false;\n    }\n\n    pub fn signal(&amp;self) {\n        let mut ready = self.state.lock().unwrap();\n        *ready = true;\n        self.condvar.notify_one();\n    }\n}\n</code></pre>"},{"location":"rust/part-3/#_4","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7","text":"<pre><code>/// Simple game loop that processes tasks\npub fn game_loop(tasks: Vec&lt;GameTask&gt;, iterations: usize) {\n    for _ in 0..iterations {\n        for task in &amp;tasks {\n            task.execute();\n        }\n    }\n}\n\n/// Cooperative game loop with event signaling\npub fn cooperative_game_loop(\n    tasks: Vec&lt;Arc&lt;GameTask&gt;&gt;,\n    event: Arc&lt;ProcessorFreeEvent&gt;,\n    iterations: usize,\n) {\n    for _ in 0..iterations {\n        for task in &amp;tasks {\n            task.execute();\n            event.signal();\n            thread::yield_now();\n        }\n    }\n}\n</code></pre>"},{"location":"rust/part-3/#condvar","title":"Condvar \u306e\u4f7f\u3044\u65b9","text":"\u30e1\u30bd\u30c3\u30c9 \u8aac\u660e wait(guard) \u30b7\u30b0\u30ca\u30eb\u3092\u5f85\u6a5f notify_one() 1\u3064\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u8d77\u5e8a notify_all() \u5168\u30b9\u30ec\u30c3\u30c9\u3092\u8d77\u5e8a"},{"location":"rust/part-3/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part IV \u3067\u306f\u3001Fork/Join \u3068 Pipeline \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-4/","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"rust/part-4/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Fork/Join \u3068 Pipeline \u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-4/#forkjoin","title":"Fork/Join \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"rust/part-4/#_2","title":"\u6295\u7968\u30ab\u30a6\u30f3\u30bf\u30fc","text":"<pre><code>use rayon::prelude::*;\nuse std::collections::HashMap;\n\n/// Vote Counter using Fork/Join pattern\npub fn count_votes(votes: &amp;[&amp;str]) -&gt; HashMap&lt;String, usize&gt; {\n    if votes.is_empty() {\n        return HashMap::new();\n    }\n\n    // Use parallel fold and reduce\n    votes\n        .par_iter()\n        .fold(\n            || HashMap::new(),\n            |mut acc: HashMap&lt;String, usize&gt;, &amp;vote| {\n                *acc.entry(vote.to_string()).or_insert(0) += 1;\n                acc\n            },\n        )\n        .reduce(\n            || HashMap::new(),\n            |mut a, b| {\n                for (k, v) in b {\n                    *a.entry(k).or_insert(0) += v;\n                }\n                a\n            },\n        )\n}\n</code></pre>"},{"location":"rust/part-4/#pipeline","title":"Pipeline \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"rust/part-4/#pipeline_1","title":"Pipeline \u69cb\u9020\u4f53","text":"<pre><code>/// Pipeline that processes items through multiple stages\npub struct Pipeline {\n    stages: Vec&lt;Box&lt;dyn Fn(i32) -&gt; i32 + Send&gt;&gt;,\n}\n\nimpl Pipeline {\n    pub fn new() -&gt; Self {\n        Pipeline { stages: Vec::new() }\n    }\n\n    pub fn add_stage&lt;F&gt;(mut self, processor: F) -&gt; Self\n    where\n        F: Fn(i32) -&gt; i32 + Send + 'static,\n    {\n        self.stages.push(Box::new(processor));\n        self\n    }\n\n    pub fn process(&amp;self, input: i32) -&gt; i32 {\n        self.stages.iter().fold(input, |acc, stage| stage(acc))\n    }\n}\n</code></pre>"},{"location":"rust/part-4/#_3","title":"\u30c1\u30e3\u30cd\u30eb\u306b\u3088\u308b\u4e26\u884c\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3","text":"<pre><code>use std::sync::mpsc::{channel, Receiver, Sender};\nuse std::thread;\n\n/// Concurrent pipeline using channels\npub fn concurrent_pipeline&lt;T&gt;(\n    input: Vec&lt;T&gt;,\n    processors: Vec&lt;Box&lt;dyn Fn(T) -&gt; T + Send + 'static&gt;&gt;,\n) -&gt; Vec&lt;T&gt;\nwhere\n    T: Send + 'static + Clone,\n{\n    if processors.is_empty() {\n        return input;\n    }\n\n    let (first_tx, mut current_rx): (Sender&lt;T&gt;, Receiver&lt;T&gt;) = channel();\n\n    // Send initial input\n    let input_thread = thread::spawn(move || {\n        for item in input {\n            first_tx.send(item).unwrap();\n        }\n    });\n\n    // Create processor threads\n    let mut handles = vec![input_thread];\n\n    for processor in processors {\n        let (tx, rx): (Sender&lt;T&gt;, Receiver&lt;T&gt;) = channel();\n        let prev_rx = current_rx;\n        current_rx = rx;\n\n        let handle = thread::spawn(move || {\n            while let Ok(item) = prev_rx.recv() {\n                let result = processor(item);\n                if tx.send(result).is_err() {\n                    break;\n                }\n            }\n        });\n        handles.push(handle);\n    }\n\n    // Collect results\n    let mut results = Vec::new();\n    while let Ok(item) = current_rx.recv() {\n        results.push(item);\n    }\n\n    for handle in handles {\n        handle.join().unwrap();\n    }\n\n    results\n}\n</code></pre>"},{"location":"rust/part-4/#_4","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>fn main() {\n    // Pipeline\n    let pipeline = Pipeline::new()\n        .add_stage(|x| x + 1)\n        .add_stage(|x| x * 2)\n        .add_stage(|x| x - 3);\n\n    let result = pipeline.process(5);\n    // (5 + 1) * 2 - 3 = 9\n    println!(\"Result: {}\", result);\n\n    // Fork/Join\n    let votes = vec![\"A\", \"B\", \"A\", \"A\", \"B\", \"C\"];\n    let counts = count_votes(&amp;votes);\n    // {\"A\": 3, \"B\": 2, \"C\": 1}\n}\n</code></pre>"},{"location":"rust/part-4/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part V \u3067\u306f\u3001\u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-5/","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"rust/part-5/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u9280\u884c\u53e3\u5ea7\u3092\u4f8b\u306b Mutex \u3068 Arc \u3092\u4f7f\u3063\u305f\u540c\u671f\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-5/#_2","title":"\u9280\u884c\u53e3\u5ea7\u69cb\u9020\u4f53","text":"<pre><code>use std::sync::{Arc, Mutex};\n\n/// A thread-safe bank account\n#[derive(Debug)]\npub struct BankAccount {\n    balance: Mutex&lt;i64&gt;,\n    id: usize,\n}\n\nimpl BankAccount {\n    pub fn new(initial_balance: i64) -&gt; Self {\n        static COUNTER: std::sync::atomic::AtomicUsize =\n            std::sync::atomic::AtomicUsize::new(0);\n        BankAccount {\n            balance: Mutex::new(initial_balance),\n            id: COUNTER.fetch_add(1, std::sync::atomic::Ordering::SeqCst),\n        }\n    }\n\n    pub fn get_balance(&amp;self) -&gt; i64 {\n        *self.balance.lock().unwrap()\n    }\n\n    pub fn deposit(&amp;self, amount: i64) {\n        let mut balance = self.balance.lock().unwrap();\n        *balance += amount;\n    }\n\n    pub fn withdraw(&amp;self, amount: i64) -&gt; bool {\n        let mut balance = self.balance.lock().unwrap();\n        if *balance &gt;= amount {\n            *balance -= amount;\n            true\n        } else {\n            false\n        }\n    }\n}\n</code></pre>"},{"location":"rust/part-5/#_3","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f","text":"<pre><code>/// Transfer money between accounts atomically, avoiding deadlock\npub fn transfer(\n    from: &amp;Arc&lt;BankAccount&gt;,\n    to: &amp;Arc&lt;BankAccount&gt;,\n    amount: i64,\n) -&gt; bool {\n    // Always lock in consistent order to avoid deadlock\n    let (first, second, from_is_first) = if from.id &lt; to.id {\n        (from, to, true)\n    } else {\n        (to, from, false)\n    };\n\n    let mut first_guard = first.balance.lock().unwrap();\n    let mut second_guard = second.balance.lock().unwrap();\n\n    let (from_guard, to_guard) = if from_is_first {\n        (&amp;mut first_guard, &amp;mut second_guard)\n    } else {\n        (&amp;mut second_guard, &amp;mut first_guard)\n    };\n\n    if **from_guard &gt;= amount {\n        **from_guard -= amount;\n        **to_guard += amount;\n        true\n    } else {\n        false\n    }\n}\n</code></pre>"},{"location":"rust/part-5/#_4","title":"\u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6","text":"\u578b \u8aac\u660e Mutex \u6392\u4ed6\u30ed\u30c3\u30af RwLock \u8aad\u307f\u66f8\u304d\u30ed\u30c3\u30af Arc \u30a2\u30c8\u30df\u30c3\u30af\u53c2\u7167\u30ab\u30a6\u30f3\u30c8 AtomicUsize \u30a2\u30c8\u30df\u30c3\u30af\u6574\u6570"},{"location":"rust/part-5/#_5","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f\u6226\u7565","text":"<ol> <li>\u4e00\u8cab\u3057\u305f\u30ed\u30c3\u30af\u9806\u5e8f - ID \u3067\u30bd\u30fc\u30c8\u3057\u3066\u30ed\u30c3\u30af</li> <li>try_lock - \u30ed\u30c3\u30af\u53d6\u5f97\u5931\u6557\u6642\u306b\u30ea\u30c8\u30e9\u30a4</li> <li>\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8 - \u4e00\u5b9a\u6642\u9593\u3067\u30ed\u30c3\u30af\u89e3\u9664</li> </ol>"},{"location":"rust/part-5/#_6","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>use std::thread;\n\nfn main() {\n    let account1 = Arc::new(BankAccount::new(1000));\n    let account2 = Arc::new(BankAccount::new(1000));\n\n    let mut handles = vec![];\n\n    for i in 0..20 {\n        let a1 = Arc::clone(&amp;account1);\n        let a2 = Arc::clone(&amp;account2);\n\n        handles.push(thread::spawn(move || {\n            if i % 2 == 0 {\n                transfer(&amp;a1, &amp;a2, 10);\n            } else {\n                transfer(&amp;a2, &amp;a1, 10);\n            }\n        }));\n    }\n\n    for handle in handles {\n        handle.join().unwrap();\n    }\n\n    // Total remains 2000\n    let total = account1.get_balance() + account2.get_balance();\n    assert_eq!(total, 2000);\n}\n</code></pre>"},{"location":"rust/part-5/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VI \u3067\u306f\u3001\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-6/","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":""},{"location":"rust/part-6/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Rust \u306e async/await \u3092\u4f7f\u7528\u3057\u305f\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-6/#vs","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0","text":""},{"location":"rust/part-6/#io","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<pre><code>use std::fs;\n\n// \u30b9\u30ec\u30c3\u30c9\u306f I/O \u5b8c\u4e86\u307e\u3067\u5f85\u6a5f\nlet content = fs::read_to_string(\"file.txt\").unwrap();\n</code></pre>"},{"location":"rust/part-6/#io-async","title":"\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O (async)","text":"<pre><code>use tokio::fs;\n\nasync fn read_file_async(path: &amp;str) -&gt; String {\n    fs::read_to_string(path).await.unwrap()\n}\n</code></pre>"},{"location":"rust/part-6/#tokio","title":"Tokio \u306e\u57fa\u672c","text":"<pre><code>use tokio;\n\n#[tokio::main]\nasync fn main() {\n    let result = fetch_data(\"https://example.com\").await;\n    println!(\"{}\", result);\n}\n\nasync fn fetch_data(url: &amp;str) -&gt; String {\n    // \u975e\u540c\u671f HTTP \u30ea\u30af\u30a8\u30b9\u30c8\n    tokio::time::sleep(tokio::time::Duration::from_secs(1)).await;\n    format!(\"Data from {}\", url)\n}\n</code></pre>"},{"location":"rust/part-6/#_2","title":"\u4e26\u884c\u5b9f\u884c","text":"<pre><code>use tokio;\n\n#[tokio::main]\nasync fn main() {\n    // \u4e26\u884c\u5b9f\u884c\n    let (r1, r2, r3) = tokio::join!(\n        fetch_data(\"url1\"),\n        fetch_data(\"url2\"),\n        fetch_data(\"url3\"),\n    );\n\n    println!(\"{}, {}, {}\", r1, r2, r3);\n}\n</code></pre>"},{"location":"rust/part-6/#_3","title":"\u30e1\u30ea\u30c3\u30c8","text":"\u9805\u76ee \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 async \u30b9\u30ec\u30c3\u30c9\u6d88\u8cbb \u5f85\u6a5f\u4e2d\u3082\u5360\u6709 \u89e3\u653e \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 \u4f4e\u3044 \u9ad8\u3044 \u30b3\u30fc\u30c9\u8907\u96d1\u3055 \u4f4e\u3044 \u3084\u3084\u9ad8\u3044"},{"location":"rust/part-6/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VII \u3067\u306f\u3001\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u8a73\u7d30\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-7/","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"rust/part-7/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Rust \u306e Future \u3068 async/await \u3092\u8a73\u3057\u304f\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-7/#future","title":"Future \u30c8\u30ec\u30a4\u30c8","text":"<pre><code>use std::future::Future;\nuse std::pin::Pin;\nuse std::task::{Context, Poll};\n\n// Future \u306f Poll \u3092\u8fd4\u3059\npub trait Future {\n    type Output;\n    fn poll(self: Pin&lt;&amp;mut Self&gt;, cx: &amp;mut Context&lt;'_&gt;) -&gt; Poll&lt;Self::Output&gt;;\n}\n</code></pre>"},{"location":"rust/part-7/#asyncawait","title":"async/await \u306e\u57fa\u672c","text":"<pre><code>// async fn \u306f Future \u3092\u8fd4\u3059\nasync fn compute() -&gt; i32 {\n    42\n}\n\n// await \u3067\u7d50\u679c\u3092\u53d6\u5f97\nasync fn example() {\n    let result = compute().await;\n    println!(\"{}\", result);\n}\n</code></pre>"},{"location":"rust/part-7/#_2","title":"\u5408\u6210","text":"<pre><code>use tokio;\n\n// \u9806\u6b21\u5b9f\u884c\nasync fn sequential() -&gt; i32 {\n    let a = compute_a().await;\n    let b = compute_b().await;\n    a + b\n}\n\n// \u4e26\u5217\u5b9f\u884c\nasync fn parallel() -&gt; (i32, i32, i32) {\n    tokio::join!(\n        compute_a(),\n        compute_b(),\n        compute_c(),\n    )\n}\n</code></pre>"},{"location":"rust/part-7/#_3","title":"\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":"<pre><code>async fn safe_computation() -&gt; Result&lt;i32, String&gt; {\n    let result = risky_computation().await?;\n    Ok(result * 2)\n}\n\nasync fn risky_computation() -&gt; Result&lt;i32, String&gt; {\n    // \u30a8\u30e9\u30fc\u306e\u53ef\u80fd\u6027\u304c\u3042\u308b\u51e6\u7406\n    Ok(42)\n}\n</code></pre>"},{"location":"rust/part-7/#_4","title":"\u30ad\u30e3\u30f3\u30bb\u30eb","text":"<pre><code>use tokio::time::{timeout, Duration};\n\nasync fn with_timeout() {\n    let result = timeout(\n        Duration::from_secs(5),\n        long_running_task()\n    ).await;\n\n    match result {\n        Ok(value) =&gt; println!(\"Got: {:?}\", value),\n        Err(_) =&gt; println!(\"Timed out\"),\n    }\n}\n</code></pre>"},{"location":"rust/part-7/#select","title":"select!","text":"<pre><code>use tokio::select;\n\nasync fn race() {\n    select! {\n        result = task_a() =&gt; {\n            println!(\"A finished first: {:?}\", result);\n        }\n        result = task_b() =&gt; {\n            println!(\"B finished first: {:?}\", result);\n        }\n    }\n}\n</code></pre>"},{"location":"rust/part-7/#_5","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VIII \u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068\u4e26\u5217\u914d\u5217\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-8/","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":""},{"location":"rust/part-8/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068 Rayon \u306e\u4e26\u5217\u30a4\u30c6\u30ec\u30fc\u30bf\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"rust/part-8/#mapreduce","title":"MapReduce \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"rust/part-8/#_2","title":"\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u5b9f\u88c5","text":"<pre><code>use rayon::prelude::*;\nuse std::collections::HashMap;\n\n/// Map: Convert text to (word, 1) pairs\npub fn map(text: &amp;str) -&gt; Vec&lt;(String, usize)&gt; {\n    text.to_lowercase()\n        .split_whitespace()\n        .filter(|s| !s.is_empty())\n        .map(|word| (word.to_string(), 1))\n        .collect()\n}\n\n/// Reduce: Aggregate word counts\npub fn reduce(pairs: Vec&lt;(String, usize)&gt;) -&gt; HashMap&lt;String, usize&gt; {\n    let mut result = HashMap::new();\n    for (word, count) in pairs {\n        *result.entry(word).or_insert(0) += count;\n    }\n    result\n}\n\n/// MapReduce: Count words using parallel execution\npub fn count_words(texts: &amp;[&amp;str]) -&gt; HashMap&lt;String, usize&gt; {\n    // Map phase (parallel)\n    let mapped: Vec&lt;(String, usize)&gt; = texts\n        .par_iter()\n        .flat_map(|text| map(text))\n        .collect();\n\n    // Reduce phase\n    reduce(mapped)\n}\n</code></pre>"},{"location":"rust/part-8/#_3","title":"\u5b8c\u5168\u4e26\u5217\u7248","text":"<pre><code>/// Parallel reduce using Rayon\npub fn count_words_full_parallel(texts: &amp;[&amp;str]) -&gt; HashMap&lt;String, usize&gt; {\n    texts\n        .par_iter()\n        .flat_map(|text| map(text))\n        .fold(\n            || HashMap::new(),\n            |mut acc, (word, count)| {\n                *acc.entry(word).or_insert(0) += count;\n                acc\n            },\n        )\n        .reduce(\n            || HashMap::new(),\n            |mut a, b| {\n                for (k, v) in b {\n                    *a.entry(k).or_insert(0) += v;\n                }\n                a\n            },\n        )\n}\n</code></pre>"},{"location":"rust/part-8/#_4","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>fn main() {\n    let texts = vec![\n        \"hello world\",\n        \"hello rust\",\n        \"world of rust\",\n    ];\n\n    let result = count_words(&amp;texts);\n    // {\"hello\": 2, \"world\": 2, \"rust\": 2, \"of\": 1}\n}\n</code></pre>"},{"location":"rust/part-8/#rayon","title":"Rayon \u306e\u4e26\u5217\u30a4\u30c6\u30ec\u30fc\u30bf","text":"<pre><code>use rayon::prelude::*;\n\n// \u4e26\u5217 map\nlet doubled: Vec&lt;_&gt; = (1..1000000)\n    .into_par_iter()\n    .map(|x| x * 2)\n    .collect();\n\n// \u4e26\u5217 filter + map\nlet processed: Vec&lt;_&gt; = data\n    .par_iter()\n    .filter(|&amp;x| *x &gt; 0)\n    .map(|x| x * 2)\n    .collect();\n\n// \u4e26\u5217 fold + reduce\nlet sum: i32 = (1..1000000)\n    .into_par_iter()\n    .fold(|| 0, |acc, x| acc + x)\n    .reduce(|| 0, |a, b| a + b);\n</code></pre>"},{"location":"rust/part-8/#_5","title":"\u307e\u3068\u3081","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u5b66\u3093\u3060\u5185\u5bb9:</p> Part \u30c8\u30d4\u30c3\u30af \u30ad\u30fc\u30dd\u30a4\u30f3\u30c8 I \u9010\u6b21\u51e6\u7406 Option\u3001Iterator II \u30b9\u30ec\u30c3\u30c9 std::thread\u3001Send/Sync III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 Condvar\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7 IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001Pipeline V \u540c\u671f Mutex\u3001Arc\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 async/await VII \u975e\u540c\u671f Future\u3001Tokio VIII \u5206\u6563\u51e6\u7406 MapReduce\u3001Rayon"},{"location":"rust/part-8/#_6","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>The Rust Programming Language - Fearless Concurrency</li> <li>Rayon Documentation</li> <li>Tokio Documentation</li> <li>Grokking Concurrency</li> </ul>"},{"location":"scala/","title":"Scala \u3067\u5b66\u3076\u4e26\u884c\u51e6\u7406","text":""},{"location":"scala/#_1","title":"\u6982\u8981","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u306f\u3001Scala 3 \u3092\u4f7f\u7528\u3057\u3066\u4e26\u884c\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u57fa\u790e\u304b\u3089\u5fdc\u7528\u307e\u3067\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/#_2","title":"\u76ee\u6b21","text":"Part \u30c8\u30d4\u30c3\u30af \u5185\u5bb9 Part I \u9010\u6b21\u51e6\u7406 \u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 Part II \u30b9\u30ec\u30c3\u30c9 Thread\u3001Future\u3001\u4e26\u5217\u5b9f\u884c Part III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3001\u30bf\u30b9\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0 Part IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3 Part V \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1 synchronized\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f Part VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O NIO\u3001Selector Part VII \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 Future\u3001Promise Part VIII \u5206\u6563\u4e26\u5217\u51e6\u7406 MapReduce\u3001\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3"},{"location":"scala/#_3","title":"\u74b0\u5883\u8a2d\u5b9a","text":""},{"location":"scala/#_4","title":"\u5fc5\u8981\u306a\u30c4\u30fc\u30eb","text":"<ul> <li>Scala 3.3.1</li> <li>sbt 1.9.7</li> <li>JDK 11 \u4ee5\u4e0a</li> </ul>"},{"location":"scala/#_5","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210","text":"<pre><code>apps/scala/\n\u251c\u2500\u2500 build.sbt\n\u251c\u2500\u2500 project/\n\u2502   \u2514\u2500\u2500 build.properties\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main/scala/concurrency/\n\u2502   \u2502   \u251c\u2500\u2500 ch02/    # Part I\n\u2502   \u2502   \u251c\u2500\u2500 ch04/    # Part II\n\u2502   \u2502   \u251c\u2500\u2500 ch05/    # Part II\n\u2502   \u2502   \u251c\u2500\u2500 ch06/    # Part III\n\u2502   \u2502   \u251c\u2500\u2500 ch07/    # Part IV\n\u2502   \u2502   \u251c\u2500\u2500 ch08/    # Part V\n\u2502   \u2502   \u2514\u2500\u2500 ch13/    # Part VIII\n\u2502   \u2514\u2500\u2500 test/scala/concurrency/\n</code></pre>"},{"location":"scala/#_6","title":"\u30d3\u30eb\u30c9\u3068\u5b9f\u884c","text":"<pre><code>cd apps/scala\nsbt compile    # \u30b3\u30f3\u30d1\u30a4\u30eb\nsbt test       # \u30c6\u30b9\u30c8\u5b9f\u884c\n</code></pre>"},{"location":"scala/#_7","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Grokking Concurrency</li> <li>Scala Documentation</li> <li>Scala Parallel Collections</li> </ul>"},{"location":"scala/part-1/","title":"Part I: \u9010\u6b21\u51e6\u7406","text":""},{"location":"scala/part-1/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3092\u4f8b\u306b\u9010\u6b21\u51e6\u7406\u306e\u57fa\u790e\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-1/#_2","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ab\u30fc\u306e\u5b9f\u88c5","text":""},{"location":"scala/part-1/#_3","title":"\u7d44\u307f\u5408\u308f\u305b\u751f\u6210","text":"<pre><code>object PasswordCracker:\n  private val Letters: String = \"abcdefghijklmnopqrstuvwxyz\"\n\n  /** Generate all combinations of lowercase letters of the given length */\n  def getCombinations(length: Int): List[String] =\n    @tailrec\n    def generate(current: List[String], remaining: Int): List[String] =\n      if remaining == 0 then current\n      else\n        val next = for\n          prefix &lt;- current\n          letter &lt;- Letters\n        yield prefix + letter\n        generate(next, remaining - 1)\n\n    generate(List(\"\"), length)\n</code></pre>"},{"location":"scala/part-1/#_4","title":"\u30cf\u30c3\u30b7\u30e5\u8a08\u7b97","text":"<pre><code>import java.security.MessageDigest\n\n/** Calculate SHA-256 hash of the given password */\ndef getCryptoHash(password: String): String =\n  val digest = MessageDigest.getInstance(\"SHA-256\")\n  val bytes = digest.digest(password.getBytes(\"UTF-8\"))\n  bytes.map(b =&gt; f\"$b%02x\").mkString\n</code></pre>"},{"location":"scala/part-1/#_5","title":"\u30d1\u30b9\u30ef\u30fc\u30c9\u89e3\u6790","text":"<pre><code>/** Check if the password matches the given hash */\ndef checkPassword(password: String, cryptoHash: String): Boolean =\n  getCryptoHash(password) == cryptoHash\n\n/** Crack password by brute force */\ndef crackPassword(cryptoHash: String, length: Int): Option[String] =\n  getCombinations(length).find(checkPassword(_, cryptoHash))\n</code></pre>"},{"location":"scala/part-1/#_6","title":"\u7279\u5fb4","text":"<ul> <li>\u672b\u5c3e\u518d\u5e30: <code>@tailrec</code> \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u3092\u9632\u6b62</li> <li>for \u5185\u5305\u8868\u8a18: \u5ba3\u8a00\u7684\u306a\u7d44\u307f\u5408\u308f\u305b\u751f\u6210</li> <li>Option \u578b: null \u306e\u4ee3\u308f\u308a\u306b <code>Option[String]</code> \u3067\u7d50\u679c\u3092\u8868\u73fe</li> </ul>"},{"location":"scala/part-1/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part II \u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u3063\u305f\u4e26\u5217\u51e6\u7406\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-2/","title":"Part II: \u30d7\u30ed\u30bb\u30b9\u3068\u30b9\u30ec\u30c3\u30c9","text":""},{"location":"scala/part-2/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c\u64cd\u4f5c\u3068\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"scala/part-2/#_2","title":"\u30b9\u30ec\u30c3\u30c9\u306e\u57fa\u672c","text":""},{"location":"scala/part-2/#_3","title":"\u30b9\u30ec\u30c3\u30c9\u4f5c\u6210","text":"<pre><code>object ThreadBasics:\n\n  /** Create a worker thread with the given name and task */\n  def createWorker(name: String, task: () =&gt; Unit): Thread =\n    val thread = new Thread(() =&gt; task())\n    thread.setName(name)\n    thread\n\n  /** Create multiple worker threads */\n  def createMultipleWorkers(count: Int, task: Int =&gt; Unit): List[Thread] =\n    (0 until count).map { i =&gt;\n      val thread = new Thread(() =&gt; task(i))\n      thread.setName(s\"Worker-$i\")\n      thread\n    }.toList\n\n  /** Start all threads and wait for them to complete */\n  def startAndJoinAll(threads: List[Thread]): Unit =\n    threads.foreach(_.start())\n    threads.foreach(_.join())\n</code></pre>"},{"location":"scala/part-2/#_4","title":"\u4e26\u5217\u30d1\u30b9\u30ef\u30fc\u30c9\u30af\u30e9\u30c3\u30ad\u30f3\u30b0","text":""},{"location":"scala/part-2/#_5","title":"\u30c1\u30e3\u30f3\u30af\u5206\u5272","text":"<pre><code>case class ChunkRange(start: Int, end: Int)\n\nobject PasswordCrackerParallel:\n  /** Divide a range into chunks */\n  def getChunks(numChunks: Int, totalSize: Int): List[ChunkRange] =\n    val chunkSize = totalSize / numChunks\n    val remainder = totalSize % numChunks\n\n    (0 until numChunks).map { i =&gt;\n      val start = i * chunkSize + math.min(i, remainder)\n      val end = start + chunkSize + (if i &lt; remainder then 1 else 0)\n      ChunkRange(start, end)\n    }.toList\n</code></pre>"},{"location":"scala/part-2/#future","title":"Future \u306b\u3088\u308b\u4e26\u5217\u5b9f\u884c","text":"<pre><code>import scala.concurrent.{Future, Await, ExecutionContext}\nimport scala.concurrent.duration.Duration\nimport java.util.concurrent.atomic.AtomicReference\n\ngiven ExecutionContext = ExecutionContext.global\n\n/** Crack password using parallel execution */\ndef crackPasswordParallel(cryptoHash: String, length: Int): Option[String] =\n  val combinations = PasswordCracker.getCombinations(length)\n  val numCores = Runtime.getRuntime.availableProcessors()\n  val chunks = getChunks(numCores, combinations.length)\n\n  val result = new AtomicReference[Option[String]](None)\n\n  val futures = chunks.map { chunk =&gt;\n    Future {\n      val subList = combinations.slice(chunk.start, chunk.end)\n      subList.find { password =&gt;\n        result.get().isEmpty &amp;&amp; PasswordCracker.checkPassword(password, cryptoHash)\n      } match\n        case Some(found) =&gt; result.compareAndSet(None, Some(found))\n        case None =&gt; ()\n    }\n  }\n\n  futures.foreach(f =&gt; Await.ready(f, Duration.Inf))\n  result.get()\n</code></pre>"},{"location":"scala/part-2/#_6","title":"\u30dd\u30a4\u30f3\u30c8","text":"<ul> <li>ExecutionContext: Scala \u306e\u4e26\u884c\u51e6\u7406\u5b9f\u884c\u74b0\u5883</li> <li>Future: \u975e\u540c\u671f\u8a08\u7b97\u3092\u8868\u73fe</li> <li>AtomicReference: \u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306a\u7d50\u679c\u5171\u6709</li> </ul>"},{"location":"scala/part-2/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part III \u3067\u306f\u3001\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-3/","title":"Part III: \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"scala/part-3/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7\u3092\u4f8b\u306b\u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0\u3068\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-3/#_2","title":"\u30b2\u30fc\u30e0\u30bf\u30b9\u30af","text":"<pre><code>case class GameTask(name: String, action: () =&gt; Unit):\n  def run(): Unit = action()\n</code></pre>"},{"location":"scala/part-3/#_3","title":"\u30a4\u30d9\u30f3\u30c8\u540c\u671f","text":"<pre><code>class ProcessorFreeEvent:\n  private val lock = new Object\n  @volatile private var signaled = false\n\n  def waitForSignal(): Unit = lock.synchronized {\n    while !signaled do lock.wait()\n  }\n\n  def signal(): Unit = lock.synchronized {\n    signaled = true\n    lock.notifyAll()\n  }\n\n  def reset(): Unit = lock.synchronized {\n    signaled = false\n  }\n</code></pre>"},{"location":"scala/part-3/#_4","title":"\u30b2\u30fc\u30e0\u30eb\u30fc\u30d7","text":"<pre><code>object GameLoop:\n  /** Run all tasks in a single frame */\n  def runOneFrame(tasks: List[GameTask]): Unit =\n    tasks.foreach(_.run())\n\n  /** Run game loop for specified number of frames */\n  def run(tasks: List[GameTask], frames: Int): Unit =\n    (1 to frames).foreach { frame =&gt;\n      println(s\"Frame $frame\")\n      runOneFrame(tasks)\n    }\n</code></pre>"},{"location":"scala/part-3/#_5","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>val tasks = List(\n  GameTask(\"Input\", () =&gt; println(\"Processing input...\")),\n  GameTask(\"Update\", () =&gt; println(\"Updating game state...\")),\n  GameTask(\"Render\", () =&gt; println(\"Rendering frame...\"))\n)\n\nGameLoop.run(tasks, 3)\n</code></pre>"},{"location":"scala/part-3/#_6","title":"\u30dd\u30a4\u30f3\u30c8","text":"<ul> <li>case class: \u30a4\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u306a\u30c7\u30fc\u30bf\u69cb\u9020</li> <li>synchronized: JVM \u30ec\u30d9\u30eb\u306e\u30ed\u30c3\u30af</li> <li>@volatile: \u30e1\u30e2\u30ea\u53ef\u8996\u6027\u306e\u4fdd\u8a3c</li> </ul>"},{"location":"scala/part-3/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part IV \u3067\u306f\u3001Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-4/","title":"Part IV: \u30bf\u30b9\u30af\u5206\u89e3\u3068\u4e26\u5217\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"scala/part-4/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Fork/Join \u30d1\u30bf\u30fc\u30f3\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-4/#forkjoin","title":"Fork/Join \u30d1\u30bf\u30fc\u30f3: \u6295\u7968\u30ab\u30a6\u30f3\u30bf\u30fc","text":""},{"location":"scala/part-4/#_2","title":"\u9010\u6b21\u30ab\u30a6\u30f3\u30c8","text":"<pre><code>object VoteCounter:\n  /** Count votes sequentially */\n  def countVotes(votes: List[String]): Map[String, Int] =\n    votes.groupBy(identity).view.mapValues(_.size).toMap\n\n  /** Merge two vote count results */\n  def mergeResults(a: Map[String, Int], b: Map[String, Int]): Map[String, Int] =\n    (a.keys ++ b.keys).map { key =&gt;\n      key -&gt; (a.getOrElse(key, 0) + b.getOrElse(key, 0))\n    }.toMap\n</code></pre>"},{"location":"scala/part-4/#_3","title":"\u4e26\u5217\u30ab\u30a6\u30f3\u30c8","text":"<pre><code>import scala.concurrent.{Future, Await, ExecutionContext}\nimport scala.concurrent.duration.Duration\n\ngiven ExecutionContext = ExecutionContext.global\n\n/** Count votes using fork-join pattern */\ndef countVotesParallel(votes: List[String]): Map[String, Int] =\n  if votes.isEmpty then return Map.empty\n\n  val numCores = Runtime.getRuntime.availableProcessors()\n  val chunkSize = math.max(1, votes.size / numCores)\n  val chunks = votes.grouped(chunkSize).toList\n\n  val futures = chunks.map { chunk =&gt;\n    Future(countVotes(chunk))\n  }\n\n  val results = futures.map(f =&gt; Await.result(f, Duration.Inf))\n  results.reduce(mergeResults)\n</code></pre>"},{"location":"scala/part-4/#_4","title":"\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>case class Stage(name: String, processor: Any =&gt; Any)\n\nclass Pipeline[T](stages: List[Stage] = List.empty):\n\n  /** Add a stage to the pipeline */\n  def addStage[A, B](name: String, processor: A =&gt; B): Pipeline[T] =\n    new Pipeline[T](stages :+ Stage(name, x =&gt; processor(x.asInstanceOf[A])))\n\n  /** Process data through all stages */\n  def process(data: List[T]): List[Any] =\n    if stages.isEmpty then return data\n\n    data.map { item =&gt;\n      stages.foldLeft[Any](item) { (current, stage) =&gt;\n        stage.processor(current)\n      }\n    }\n\nobject Pipeline:\n  def apply[T](): Pipeline[T] = new Pipeline[T]()\n</code></pre>"},{"location":"scala/part-4/#_5","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>val pipeline = Pipeline[Int]()\n  .addStage(\"double\", (x: Int) =&gt; x * 2)\n  .addStage(\"addOne\", (x: Int) =&gt; x + 1)\n\nval results = pipeline.process(List(1, 2, 3))\n// List(3, 5, 7)\n</code></pre>"},{"location":"scala/part-4/#_6","title":"\u30dd\u30a4\u30f3\u30c8","text":"<ul> <li>groupBy + mapValues: \u95a2\u6570\u578b\u30b9\u30bf\u30a4\u30eb\u306e\u96c6\u8a08</li> <li>foldLeft: \u30b9\u30c6\u30fc\u30b8\u3092\u9806\u6b21\u9069\u7528</li> <li>\u30d3\u30eb\u30c0\u30fc\u30d1\u30bf\u30fc\u30f3: \u6d41\u66a2\u306a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9</li> </ul>"},{"location":"scala/part-4/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part V \u3067\u306f\u3001\u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-5/","title":"Part V: \u540c\u671f\u3068\u6392\u4ed6\u5236\u5fa1","text":""},{"location":"scala/part-5/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u9280\u884c\u53e3\u5ea7\u3092\u4f8b\u306b\u540c\u671f\u3068\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-5/#_2","title":"\u9280\u884c\u53e3\u5ea7\u30af\u30e9\u30b9","text":"<pre><code>class BankAccount(initialBalance: Int):\n  private val lock = new Object\n  private var balance: Int = initialBalance\n\n  def getBalance: Int = lock.synchronized {\n    balance\n  }\n\n  def deposit(amount: Int): Unit = lock.synchronized {\n    balance += amount\n  }\n\n  def withdraw(amount: Int): Boolean = lock.synchronized {\n    if balance &gt;= amount then\n      balance -= amount\n      true\n    else\n      false\n  }\n</code></pre>"},{"location":"scala/part-5/#_3","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f","text":"<pre><code>object BankAccount:\n  /** Transfer money between accounts atomically, avoiding deadlock */\n  def transfer(from: BankAccount, to: BankAccount, amount: Int): Boolean =\n    // Always lock in consistent order to avoid deadlock\n    val (first, second) = if System.identityHashCode(from) &lt; System.identityHashCode(to)\n      then (from, to)\n      else (to, from)\n\n    first.lock.synchronized {\n      second.lock.synchronized {\n        if from.balance &gt;= amount then\n          from.balance -= amount\n          to.balance += amount\n          true\n        else\n          false\n      }\n    }\n</code></pre>"},{"location":"scala/part-5/#_4","title":"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u3068\u306f","text":"<p>2 \u3064\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u4e92\u3044\u306e\u30ed\u30c3\u30af\u3092\u5f85\u3064\u72b6\u614b:</p> <pre><code>Thread A: lock(account1) -&gt; waiting for lock(account2)\nThread B: lock(account2) -&gt; waiting for lock(account1)\n</code></pre>"},{"location":"scala/part-5/#_5","title":"\u89e3\u6c7a\u7b56: \u30ed\u30c3\u30af\u9806\u5e8f\u306e\u7d71\u4e00","text":"<p><code>System.identityHashCode</code> \u3092\u4f7f\u7528\u3057\u3066\u30ed\u30c3\u30af\u9806\u5e8f\u3092\u6c7a\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u3059\u3079\u3066\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u540c\u3058\u9806\u5e8f\u3067\u30ed\u30c3\u30af\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002</p>"},{"location":"scala/part-5/#_6","title":"\u4e26\u884c\u30c6\u30b9\u30c8","text":"<pre><code>test(\"BankAccount should handle concurrent transfers safely\"):\n  val account1 = new BankAccount(1000)\n  val account2 = new BankAccount(1000)\n\n  val executor = Executors.newFixedThreadPool(10)\n  val latch = new CountDownLatch(100)\n\n  (1 to 50).foreach { _ =&gt;\n    executor.submit(new Runnable:\n      def run(): Unit =\n        BankAccount.transfer(account1, account2, 10)\n        latch.countDown()\n    )\n    executor.submit(new Runnable:\n      def run(): Unit =\n        BankAccount.transfer(account2, account1, 10)\n        latch.countDown()\n    )\n  }\n\n  latch.await()\n  executor.shutdown()\n\n  // Total balance should be preserved\n  (account1.getBalance + account2.getBalance) shouldBe 2000\n</code></pre>"},{"location":"scala/part-5/#_7","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VI \u3067\u306f\u3001\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-6/","title":"Part VI: \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":""},{"location":"scala/part-6/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Java NIO \u3092\u4f7f\u7528\u3057\u305f\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O \u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-6/#vs","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 vs \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0","text":""},{"location":"scala/part-6/#io","title":"\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<pre><code>// \u30b9\u30ec\u30c3\u30c9\u306f I/O \u5b8c\u4e86\u307e\u3067\u5f85\u6a5f\nval socket = new Socket(\"localhost\", 8080)\nval input = socket.getInputStream\nval data = input.read() // \u30d6\u30ed\u30c3\u30af\n</code></pre>"},{"location":"scala/part-6/#io_1","title":"\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 I/O","text":"<pre><code>import java.nio.channels._\nimport java.nio.ByteBuffer\n\nval channel = SocketChannel.open()\nchannel.configureBlocking(false)\nchannel.connect(new InetSocketAddress(\"localhost\", 8080))\n\n// \u63a5\u7d9a\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u3059\u3050\u306b\u623b\u308b\nwhile !channel.finishConnect() do\n  // \u4ed6\u306e\u4f5c\u696d\u304c\u3067\u304d\u308b\n</code></pre>"},{"location":"scala/part-6/#selector","title":"Selector \u30d1\u30bf\u30fc\u30f3","text":"<pre><code>import java.nio.channels.{Selector, SelectionKey}\n\nval selector = Selector.open()\nchannel.register(selector, SelectionKey.OP_READ)\n\n// \u30a4\u30d9\u30f3\u30c8\u3092\u5f85\u6a5f\nwhile true do\n  selector.select() // \u30d6\u30ed\u30c3\u30af\uff08\u30a4\u30d9\u30f3\u30c8\u304c\u3042\u308b\u307e\u3067\uff09\n\n  val keys = selector.selectedKeys().iterator()\n  while keys.hasNext do\n    val key = keys.next()\n    keys.remove()\n\n    if key.isReadable then\n      // \u8aad\u307f\u53d6\u308a\u51e6\u7406\n      handleRead(key)\n</code></pre>"},{"location":"scala/part-6/#_2","title":"\u30e1\u30ea\u30c3\u30c8","text":"\u9805\u76ee \u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 \u30b9\u30ec\u30c3\u30c9\u6570 \u63a5\u7d9a\u6570\u306b\u6bd4\u4f8b \u5c11\u6570\u3067\u5bfe\u5fdc\u53ef\u80fd \u30e1\u30e2\u30ea \u591a\u3044 \u5c11\u306a\u3044 \u8907\u96d1\u3055 \u4f4e\u3044 \u9ad8\u3044"},{"location":"scala/part-6/#_3","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VII \u3067\u306f\u3001Scala \u306e Future \u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-7/","title":"Part VII: \u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"scala/part-7/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001Scala \u306e Future \u3068 Promise \u3092\u4f7f\u3063\u305f\u975e\u540c\u671f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-7/#future","title":"Future \u306e\u57fa\u672c","text":"<pre><code>import scala.concurrent.{Future, ExecutionContext}\nimport scala.concurrent.ExecutionContext.Implicits.global\n\nval future: Future[Int] = Future {\n  Thread.sleep(1000)\n  42\n}\n\n// \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\nfuture.onComplete {\n  case Success(value) =&gt; println(s\"Result: $value\")\n  case Failure(e) =&gt; println(s\"Error: ${e.getMessage}\")\n}\n</code></pre>"},{"location":"scala/part-7/#future_1","title":"Future \u306e\u5408\u6210","text":""},{"location":"scala/part-7/#map-flatmap","title":"map \u3068 flatMap","text":"<pre><code>val f1: Future[Int] = Future(10)\nval f2: Future[Int] = Future(20)\n\n// map: \u7d50\u679c\u3092\u5909\u63db\nval doubled: Future[Int] = f1.map(_ * 2)\n\n// flatMap: Future \u3092\u9023\u7d50\nval sum: Future[Int] = f1.flatMap(a =&gt; f2.map(b =&gt; a + b))\n</code></pre>"},{"location":"scala/part-7/#for","title":"for \u5185\u5305\u8868\u8a18","text":"<pre><code>val result: Future[Int] = for\n  a &lt;- Future(10)\n  b &lt;- Future(20)\n  c &lt;- Future(30)\nyield a + b + c\n</code></pre>"},{"location":"scala/part-7/#_2","title":"\u4e26\u5217\u5b9f\u884c","text":"<pre><code>import scala.concurrent.{Future, Await}\nimport scala.concurrent.duration._\n\n// \u4e26\u5217\u306b\u5b9f\u884c\u3055\u308c\u308b\nval futures = List(\n  Future { Thread.sleep(1000); \"A\" },\n  Future { Thread.sleep(1000); \"B\" },\n  Future { Thread.sleep(1000); \"C\" }\n)\n\n// \u5168\u3066\u3092\u5f85\u6a5f\nval results: Future[List[String]] = Future.sequence(futures)\nval values = Await.result(results, 5.seconds)\n// List(\"A\", \"B\", \"C\") - \u7d04 1 \u79d2\u3067\u5b8c\u4e86\n</code></pre>"},{"location":"scala/part-7/#promise","title":"Promise","text":"<pre><code>import scala.concurrent.Promise\n\nval promise = Promise[Int]()\nval future = promise.future\n\n// \u5225\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u5b8c\u4e86\nFuture {\n  Thread.sleep(1000)\n  promise.success(42)\n}\n\nfuture.onComplete {\n  case Success(v) =&gt; println(s\"Got: $v\")\n  case Failure(e) =&gt; println(s\"Failed: $e\")\n}\n</code></pre>"},{"location":"scala/part-7/#_3","title":"\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":"<pre><code>val future = Future {\n  throw new RuntimeException(\"Error!\")\n}\n\n// recover: \u5931\u6557\u6642\u306e\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\nval recovered = future.recover {\n  case _: RuntimeException =&gt; 0\n}\n\n// recoverWith: \u5931\u6557\u6642\u306b\u5225\u306e Future\nval recoveredWith = future.recoverWith {\n  case _: RuntimeException =&gt; Future.successful(0)\n}\n</code></pre>"},{"location":"scala/part-7/#_4","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>Part VIII \u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-8/","title":"Part VIII: \u5206\u6563\u4e26\u5217\u51e6\u7406","text":""},{"location":"scala/part-8/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001MapReduce \u30d1\u30bf\u30fc\u30f3\u3068 Scala \u306e\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"scala/part-8/#mapreduce","title":"MapReduce \u30d1\u30bf\u30fc\u30f3","text":""},{"location":"scala/part-8/#_2","title":"\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u5b9f\u88c5","text":"<pre><code>import scala.collection.parallel.CollectionConverters.*\n\nobject WordCount:\n\n  /** Map: Convert text to (word, 1) pairs */\n  def map(text: String): List[(String, Int)] =\n    text.toLowerCase\n      .split(\"\\\\s+\")\n      .filter(_.nonEmpty)\n      .map(word =&gt; (word, 1))\n      .toList\n\n  /** Reduce: Aggregate word counts */\n  def reduce(pairs: List[(String, Int)]): Map[String, Int] =\n    pairs.groupBy(_._1).view.mapValues(_.map(_._2).sum).toMap\n\n  /** MapReduce: Count words in multiple texts using parallel collections */\n  def countWords(texts: List[String]): Map[String, Int] =\n    // Map phase (parallel)\n    val mapped = texts.par.flatMap(map).toList\n\n    // Reduce phase\n    reduce(mapped)\n</code></pre>"},{"location":"scala/part-8/#_3","title":"\u4f7f\u7528\u4f8b","text":"<pre><code>val texts = List(\n  \"hello world\",\n  \"hello scala\",\n  \"world of scala\"\n)\n\nval result = WordCount.countWords(texts)\n// Map(hello -&gt; 2, world -&gt; 2, scala -&gt; 2, of -&gt; 1)\n</code></pre>"},{"location":"scala/part-8/#_4","title":"\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3","text":""},{"location":"scala/part-8/#_5","title":"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9","text":"<pre><code>import scala.collection.parallel.CollectionConverters.*\n\nval numbers = (1 to 1000000).toList\n\n// \u9010\u6b21\u51e6\u7406\nval seqSum = numbers.map(_ * 2).sum\n\n// \u4e26\u5217\u51e6\u7406\nval parSum = numbers.par.map(_ * 2).sum\n</code></pre>"},{"location":"scala/part-8/#_6","title":"\u6ce8\u610f\u70b9","text":"<pre><code>// \u9806\u5e8f\u304c\u4fdd\u8a3c\u3055\u308c\u306a\u3044\nval result = (1 to 10).par.map(x =&gt; s\"$x: ${Thread.currentThread.getName}\")\n// \u9806\u5e8f\u306f\u30e9\u30f3\u30c0\u30e0\n\n// \u526f\u4f5c\u7528\u306e\u3042\u308b\u64cd\u4f5c\u306f\u5371\u967a\nvar counter = 0\n(1 to 1000).par.foreach(_ =&gt; counter += 1) // \u7af6\u5408\u72b6\u614b\n// counter &lt; 1000 \u306b\u306a\u308b\u53ef\u80fd\u6027\u3042\u308a\n</code></pre>"},{"location":"scala/part-8/#_7","title":"\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u9078\u629e","text":"\u30b3\u30ec\u30af\u30b7\u30e7\u30f3 \u4e26\u5217\u7248 \u9069\u3057\u305f\u64cd\u4f5c List ParVector map, filter Array ParArray \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30a2\u30af\u30bb\u30b9 Range ParRange \u9023\u7d9a\u51e6\u7406 Map ParMap \u30ad\u30fc\u64cd\u4f5c"},{"location":"scala/part-8/#_8","title":"\u307e\u3068\u3081","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u5b66\u3093\u3060\u5185\u5bb9:</p> Part \u30c8\u30d4\u30c3\u30af \u30ad\u30fc\u30dd\u30a4\u30f3\u30c8 I \u9010\u6b21\u51e6\u7406 \u57fa\u672c\u6982\u5ff5\u3001\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9 II \u30b9\u30ec\u30c3\u30c9 Thread\u3001Future III \u30de\u30eb\u30c1\u30bf\u30b9\u30ad\u30f3\u30b0 \u30b2\u30fc\u30e0\u30eb\u30fc\u30d7 IV \u4e26\u5217\u30d1\u30bf\u30fc\u30f3 Fork/Join\u3001Pipeline V \u540c\u671f synchronized\u3001\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f VI \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0 NIO\u3001Selector VII \u975e\u540c\u671f Future\u3001Promise VIII \u5206\u6563\u51e6\u7406 MapReduce\u3001\u4e26\u5217\u30b3\u30ec\u30af\u30b7\u30e7\u30f3"},{"location":"scala/part-8/#_9","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Scala Parallel Collections</li> <li>Scala Futures and Promises</li> <li>Grokking Concurrency</li> </ul>"}]}